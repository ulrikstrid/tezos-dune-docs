<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Level_repr (tezos-protocol-alpha.Tezos_raw_protocol_alpha.Level_repr)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-protocol-alpha</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_alpha</a> &#x00BB; Level_repr</nav><h1>Module <code>Tezos_raw_protocol_alpha.Level_repr</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = <span class="keyword">private</span> </code><code>{</code><table class="record"><tr id="type-t.level" class="anchored"><td class="def field"><a href="#type-t.level" class="anchor"></a><code>level : <a href="../Raw_level_repr/index.html#type-t">Raw_level_repr.t</a>;</code></td><td class="doc"><p>The level of the block relative to genesis. This is also the Shell's notion of level.</p></td></tr><tr id="type-t.level_position" class="anchored"><td class="def field"><a href="#type-t.level_position" class="anchor"></a><code>level_position : int32;</code></td><td class="doc"><p>The level of the block relative to the block that starts the alpha family of protocols.</p></td></tr><tr id="type-t.cycle" class="anchored"><td class="def field"><a href="#type-t.cycle" class="anchor"></a><code>cycle : <a href="../Cycle_repr/index.html#type-t">Cycle_repr.t</a>;</code></td><td class="doc"><p>The current cycle's number. Note that cycles are a protocol-specific notion. As a result, the cycle number starts at 0 with the first block of the first version of protocol alpha.</p></td></tr><tr id="type-t.cycle_position" class="anchored"><td class="def field"><a href="#type-t.cycle_position" class="anchor"></a><code>cycle_position : int32;</code></td><td class="doc"><p>The current level of the block relative to the first block of the current cycle.</p></td></tr><tr id="type-t.expected_commitment" class="anchored"><td class="def field"><a href="#type-t.expected_commitment" class="anchor"></a><code>expected_commitment : bool;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-level"><a href="#type-level" class="anchor"></a><code><span class="keyword">type</span> level</code><code> = <a href="index.html#type-t">t</a></code></dt></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../Tezos_protocol_environment_alpha__Environment/Compare/index.html#module-type-S">Tezos_protocol_environment_alpha__Environment.Compare.S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../Tezos_protocol_environment_alpha__Environment/Compare/module-type-S/index.html#type-t">t</a> := <a href="index.html#type-level">level</a></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec value" id="val-(=)"><a href="#val-(=)" class="anchor"></a><code><span class="keyword">val</span> (=) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&lt;&gt;)"><a href="#val-(&lt;&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;&gt;) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&lt;)"><a href="#val-(&lt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&lt;=)"><a href="#val-(&lt;=)" class="anchor"></a><code><span class="keyword">val</span> (&lt;=) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&gt;=)"><a href="#val-(&gt;=)" class="anchor"></a><code><span class="keyword">val</span> (&gt;=) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&gt;)"><a href="#val-(&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&gt;) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-max"><a href="#val-max" class="anchor"></a><code><span class="keyword">val</span> max : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-min"><a href="#val-min" class="anchor"></a><code><span class="keyword">val</span> min : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt></dl></details></div></div></div><dl><dt class="spec value" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span class="keyword">val</span> encoding : <span><a href="index.html#type-level">level</a> <a href="../../Tezos_protocol_environment_alpha__Environment/Data_encoding/index.html#type-t">Tezos_protocol_environment_alpha__Environment.Data_encoding.t</a></span></code></dt><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <a href="../../Tezos_protocol_environment_alpha__Environment/Format/index.html#type-formatter">Tezos_protocol_environment_alpha__Environment.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-level">level</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-pp_full"><a href="#val-pp_full" class="anchor"></a><code><span class="keyword">val</span> pp_full : <a href="../../Tezos_protocol_environment_alpha__Environment/Format/index.html#type-formatter">Tezos_protocol_environment_alpha__Environment.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-level">level</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-diff"><a href="#val-diff" class="anchor"></a><code><span class="keyword">val</span> diff : <a href="index.html#type-level">level</a> <span>&#45;&gt;</span> <a href="index.html#type-level">level</a> <span>&#45;&gt;</span> int32</code></dt></dl><dl><dt class="spec type" id="type-cycle_era"><a href="#type-cycle_era" class="anchor"></a><code><span class="keyword">type</span> cycle_era</code><code> = </code><code>{</code><table class="record"><tr id="type-cycle_era.first_level" class="anchored"><td class="def field"><a href="#type-cycle_era.first_level" class="anchor"></a><code>first_level : <a href="../Raw_level_repr/index.html#type-t">Raw_level_repr.t</a>;</code></td><td class="doc"><p>The first level of a cycle era.</p></td></tr><tr id="type-cycle_era.first_cycle" class="anchored"><td class="def field"><a href="#type-cycle_era.first_cycle" class="anchor"></a><code>first_cycle : <a href="../Cycle_repr/index.html#type-t">Cycle_repr.t</a>;</code></td><td class="doc"><p>The first cycle of a cycle era.</p></td></tr><tr id="type-cycle_era.blocks_per_cycle" class="anchored"><td class="def field"><a href="#type-cycle_era.blocks_per_cycle" class="anchor"></a><code>blocks_per_cycle : int32;</code></td><td class="doc"><p>The value of the blocks_per_cycle constant used during the cycle era starting with first_level.</p></td></tr><tr id="type-cycle_era.blocks_per_commitment" class="anchored"><td class="def field"><a href="#type-cycle_era.blocks_per_commitment" class="anchor"></a><code>blocks_per_commitment : int32;</code></td><td class="doc"><p>The value of the blocks_per_commitment constant used during the cycle era starting with first_level.</p></td></tr></table><code>}</code></dt><dd><p>A cycle era is a chunk of cycles having the same number of levels per cycle and the same number of blocks per commitment.</p></dd></dl><dl><dt class="spec type" id="type-cycle_eras"><a href="#type-cycle_eras" class="anchor"></a><code><span class="keyword">type</span> cycle_eras</code></dt><dd><p>Stores the cycles eras of the Alpha family of protocols</p></dd></dl><dl><dt class="spec value" id="val-cycle_eras_encoding"><a href="#val-cycle_eras_encoding" class="anchor"></a><code><span class="keyword">val</span> cycle_eras_encoding : <span><a href="index.html#type-cycle_eras">cycle_eras</a> <a href="../../Tezos_protocol_environment_alpha__Environment/Data_encoding/index.html#type-t">Tezos_protocol_environment_alpha__Environment.Data_encoding.t</a></span></code></dt><dt class="spec value" id="val-create_cycle_eras"><a href="#val-create_cycle_eras" class="anchor"></a><code><span class="keyword">val</span> create_cycle_eras : <span><a href="index.html#type-cycle_era">cycle_era</a> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-cycle_eras">cycle_eras</a> <a href="../../Tezos_protocol_environment_alpha__Environment/Error_monad/index.html#type-tzresult">Tezos_protocol_environment_alpha__Environment.Error_monad.tzresult</a></span></code></dt><dd><p>Preconditions on the input list of cycle eras:</p><ul><li>the list is not empty</li><li>the first levels and the first cycles are decreasing, meaning that the first era in the list is the current era, and the last era in the list is the oldest era Invariants:</li><li>the first era therefore contains the same constants as in Constants</li><li>the first level of an era is the first level of a cycle</li></ul></dd></dl><dl><dt class="spec value" id="val-current_era"><a href="#val-current_era" class="anchor"></a><code><span class="keyword">val</span> current_era : <a href="index.html#type-cycle_eras">cycle_eras</a> <span>&#45;&gt;</span> <a href="index.html#type-cycle_era">cycle_era</a></code></dt><dd><p>Returns the current era</p></dd></dl><dl><dt class="spec value" id="val-root_level"><a href="#val-root_level" class="anchor"></a><code><span class="keyword">val</span> root_level : <a href="index.html#type-cycle_eras">cycle_eras</a> <span>&#45;&gt;</span> <a href="index.html#type-level">level</a></code></dt><dd><p>Returns the first level of the oldest era</p></dd></dl><dl><dt class="spec value" id="val-from_raw"><a href="#val-from_raw" class="anchor"></a><code><span class="keyword">val</span> from_raw : <span>cycle_eras:<a href="index.html#type-cycle_eras">cycle_eras</a></span> <span>&#45;&gt;</span> <span>?&#8288;offset:int32</span> <span>&#45;&gt;</span> <a href="../Raw_level_repr/index.html#type-t">Raw_level_repr.t</a> <span>&#45;&gt;</span> <a href="index.html#type-level">level</a></code></dt><dd><p>Returns the annotated level corresponding to a raw level and an offset. A positive offset corresponds to a higher level.</p></dd></dl><dl><dt class="spec value" id="val-first_level_in_cycle"><a href="#val-first_level_in_cycle" class="anchor"></a><code><span class="keyword">val</span> first_level_in_cycle : <span>cycle_eras:<a href="index.html#type-cycle_eras">cycle_eras</a></span> <span>&#45;&gt;</span> <a href="../Cycle_repr/index.html#type-t">Cycle_repr.t</a> <span>&#45;&gt;</span> <a href="index.html#type-level">level</a></code></dt><dd><p>Returns the first level of the given cycle.</p></dd></dl><dl><dt class="spec value" id="val-last_of_cycle"><a href="#val-last_of_cycle" class="anchor"></a><code><span class="keyword">val</span> last_of_cycle : <span>cycle_eras:<a href="index.html#type-cycle_eras">cycle_eras</a></span> <span>&#45;&gt;</span> <a href="index.html#type-level">level</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Returns true if the given level is the last of a cycle.</p></dd></dl></div></body></html>