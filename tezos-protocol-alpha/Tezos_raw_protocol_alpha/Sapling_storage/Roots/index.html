<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Roots (tezos-protocol-alpha.Tezos_raw_protocol_alpha.Sapling_storage.Roots)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../../index.html">tezos-protocol-alpha</a> &#x00BB; <a href="../../index.html">Tezos_raw_protocol_alpha</a> &#x00BB; <a href="../index.html">Sapling_storage</a> &#x00BB; Roots</nav><header class="odoc-preamble"><h1>Module <code><span>Sapling_storage.Roots</span></code></h1><p>Bounded queue of roots. The full size is initialized with the default uncommitted root, that's why roots storage doesn't need to be carbonated. A maximum of one new root is added per protocol level. If multiple transactions for the same shielded pool are processed during the same contract call or several calls in the same block, only the last root will be stored. This property prevents transactions in the same block from depending on each other and guarantees that a transaction will be valid for a least two hours (hence the 120 size) after being forged.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value" id="val-size" class="anchored"><a href="#val-size" class="anchor"></a><code><span><span class="keyword">val</span> size : int32</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get" class="anchored"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Lazy_storage_kind/Sapling_state/Id/index.html#type-t">Lazy_storage_kind.Sapling_state.Id.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../../Storage/Sapling/Roots/index.html#type-value">Storage.Sapling.Roots.value</a>, <span><a href="../../../Tezos_protocol_environment_alpha/Environment/Error_monad/index.html#type-error">Storage_sigs.Err.error</a> <a href="../../../Tezos_protocol_environment_alpha/Environment/Error_monad/index.html#type-trace">Storage_sigs.Err.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-init" class="anchored"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : <span><a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Lazy_storage_kind/Sapling_state/Id/index.html#type-t">Lazy_storage_kind.Sapling_state.Id.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../../Raw_context/index.html#type-t">Raw_context.t</a>, <span><a href="../../../Tezos_protocol_environment_alpha/Environment/Error_monad/index.html#type-error">Storage_sigs.Err.error</a> <a href="../../../Tezos_protocol_environment_alpha/Environment/Error_monad/index.html#type-trace">Storage_sigs.Err.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mem" class="anchored"><a href="#val-mem" class="anchor"></a><code><span><span class="keyword">val</span> mem : <span><a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Lazy_storage_kind/Sapling_state/Id/index.html#type-t">Lazy_storage_kind.Sapling_state.Id.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../Tezos_protocol_environment_alpha/Environment/Sapling/Hash/index.html#type-t">Env.Sapling.Hash.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(bool, <span><a href="../../../Tezos_protocol_environment_alpha/Environment/Error_monad/index.html#type-error">Storage_sigs.Err.error</a> <a href="../../../Tezos_protocol_environment_alpha/Environment/Error_monad/index.html#type-trace">Storage_sigs.Err.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-add" class="anchored"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span><a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Lazy_storage_kind/Sapling_state/Id/index.html#type-t">Lazy_storage_kind.Sapling_state.Id.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Storage/Sapling/Roots/index.html#type-value">Storage.Sapling.Roots.value</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="../../Raw_context/index.html#type-t">Raw_context.t</a>, <span><a href="../../../Tezos_protocol_environment_alpha/Environment/Error_monad/index.html#type-error">Storage_sigs.Err.error</a> <a href="../../../Tezos_protocol_environment_alpha/Environment/Error_monad/index.html#type-trace">Storage_sigs.Err.trace</a></span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div></div></div></body></html>