<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Seed_repr (tezos-protocol-008-PtEdoTez.Tezos_raw_protocol_008_PtEdoTez.Seed_repr)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">tezos-protocol-008-PtEdoTez</a> &#x00BB; <a href="../index.html">Tezos_raw_protocol_008_PtEdoTez</a> &#x00BB; Seed_repr</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_raw_protocol_008_PtEdoTez.Seed_repr</span></code></h1><p>Tezos Protocol Implementation - Random number generation</p><p>This is not expected to be a good cryptographic random number generator. In particular this is supposed to be used in situations where the seed is a globally known information.</p><p>The only expected property is: It should be difficult to find a seed such that the generated sequence is a given one.</p></header><nav class="odoc-toc"><ul><li><a href="#random-generation">Random Generation</a></li><li><a href="#predefined-seeds">Predefined seeds</a></li><li><a href="#entropy">Entropy</a></li><li><a href="#predefined-nonce">Predefined nonce</a></li><li><a href="#serializers">Serializers</a></li></ul></nav><div class="odoc-content"><h3 id="random-generation"><a href="#random-generation" class="anchor"></a>Random Generation</h3><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The state of the random number generator</p></div></div><div class="odoc-spec"><div class="spec type" id="type-seed" class="anchored"><a href="#type-seed" class="anchor"></a><code><span><span class="keyword">type</span> seed</span></code></div><div class="spec-doc"><p>A random seed, to derive random sequences from</p></div></div><div class="odoc-spec"><div class="spec type" id="type-sequence" class="anchored"><a href="#type-sequence" class="anchor"></a><code><span><span class="keyword">type</span> sequence</span></code></div><div class="spec-doc"><p>A random sequence, to derive random values from</p></div></div><div class="odoc-spec"><div class="spec value" id="val-initialize_new" class="anchored"><a href="#val-initialize_new" class="anchor"></a><code><span><span class="keyword">val</span> initialize_new : <span><a href="#type-seed">seed</a> <span class="arrow">&#45;&gt;</span></span> <span><span>bytes list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>initialize_new state ident</code> returns a new generator</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sequence" class="anchored"><a href="#val-sequence" class="anchor"></a><code><span><span class="keyword">val</span> sequence : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int32 <span class="arrow">&#45;&gt;</span></span> <a href="#type-sequence">sequence</a></span></code></div><div class="spec-doc"><p><code>sequence state n</code> prepares the n-th sequence of a state</p></div></div><div class="odoc-spec"><div class="spec value" id="val-take" class="anchored"><a href="#val-take" class="anchor"></a><code><span><span class="keyword">val</span> take : <span><a href="#type-sequence">sequence</a> <span class="arrow">&#45;&gt;</span></span> bytes * <a href="#type-sequence">sequence</a></span></code></div><div class="spec-doc"><p>Generates the next random value in the sequence</p></div></div><div class="odoc-spec"><div class="spec value" id="val-take_int32" class="anchored"><a href="#val-take_int32" class="anchor"></a><code><span><span class="keyword">val</span> take_int32 : <span><a href="#type-sequence">sequence</a> <span class="arrow">&#45;&gt;</span></span> <span>int32 <span class="arrow">&#45;&gt;</span></span> int32 * <a href="#type-sequence">sequence</a></span></code></div><div class="spec-doc"><p>Generates the next random value as a bounded <code>int32</code></p></div></div><h3 id="predefined-seeds"><a href="#predefined-seeds" class="anchor"></a>Predefined seeds</h3><div class="odoc-spec"><div class="spec value" id="val-empty" class="anchored"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <a href="#type-seed">seed</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-deterministic_seed" class="anchored"><a href="#val-deterministic_seed" class="anchor"></a><code><span><span class="keyword">val</span> deterministic_seed : <span><a href="#type-seed">seed</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-seed">seed</a></span></code></div><div class="spec-doc"><p>Returns a new seed by hashing the one passed with a constant.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-initial_seeds" class="anchored"><a href="#val-initial_seeds" class="anchor"></a><code><span><span class="keyword">val</span> initial_seeds : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-seed">seed</a> list</span></span></code></div><div class="spec-doc"><p><code>initial_seeds n</code> generates the first <code>n</code> seeds for which there are no nonces. The first seed is a constant value. The kth seed is the hash of seed (k-1) concatenated with a constant.</p></div></div><h3 id="entropy"><a href="#entropy" class="anchor"></a>Entropy</h3><div class="odoc-spec"><div class="spec type" id="type-nonce" class="anchored"><a href="#type-nonce" class="anchor"></a><code><span><span class="keyword">type</span> nonce</span></code></div><div class="spec-doc"><p>A nonce for adding entropy to the generator</p></div></div><div class="odoc-spec"><div class="spec value" id="val-nonce" class="anchored"><a href="#val-nonce" class="anchor"></a><code><span><span class="keyword">val</span> nonce : <span><a href="#type-seed">seed</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-nonce">nonce</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-seed">seed</a></span></code></div><div class="spec-doc"><p>Add entropy to the seed generator</p></div></div><div class="odoc-spec"><div class="spec value" id="val-make_nonce" class="anchored"><a href="#val-make_nonce" class="anchor"></a><code><span><span class="keyword">val</span> make_nonce : <span>bytes <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-nonce">nonce</a>, <span><span class="xref-unresolved">Tezos_protocol_environment_008_PtEdoTez__Environment.Error_monad.error</span> list</span>)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div><div class="spec-doc"><p>Use a byte sequence as a nonce</p></div></div><div class="odoc-spec"><div class="spec value" id="val-hash" class="anchored"><a href="#val-hash" class="anchor"></a><code><span><span class="keyword">val</span> hash : <span><a href="#type-nonce">nonce</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Nonce_hash/index.html#type-t">Nonce_hash.t</a></span></code></div><div class="spec-doc"><p>Compute the has of a nonce</p></div></div><div class="odoc-spec"><div class="spec value" id="val-check_hash" class="anchored"><a href="#val-check_hash" class="anchor"></a><code><span><span class="keyword">val</span> check_hash : <span><a href="#type-nonce">nonce</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Nonce_hash/index.html#type-t">Nonce_hash.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>check_hash nonce hash</code> is true if the nonce correspond to the hash</p></div></div><div class="odoc-spec"><div class="spec value" id="val-nonce_hash_key_part" class="anchored"><a href="#val-nonce_hash_key_part" class="anchor"></a><code><span><span class="keyword">val</span> nonce_hash_key_part : <span><a href="../Nonce_hash/index.html#type-t">Nonce_hash.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>For using nonce hashes as keys in the hierarchical database</p></div></div><h3 id="predefined-nonce"><a href="#predefined-nonce" class="anchor"></a>Predefined nonce</h3><div class="odoc-spec"><div class="spec value" id="val-initial_nonce_0" class="anchored"><a href="#val-initial_nonce_0" class="anchor"></a><code><span><span class="keyword">val</span> initial_nonce_0 : <a href="#type-nonce">nonce</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-initial_nonce_hash_0" class="anchored"><a href="#val-initial_nonce_hash_0" class="anchor"></a><code><span><span class="keyword">val</span> initial_nonce_hash_0 : <a href="../Nonce_hash/index.html#type-t">Nonce_hash.t</a></span></code></div></div><h3 id="serializers"><a href="#serializers" class="anchor"></a>Serializers</h3><div class="odoc-spec"><div class="spec value" id="val-nonce_encoding" class="anchored"><a href="#val-nonce_encoding" class="anchor"></a><code><span><span class="keyword">val</span> nonce_encoding : <span><a href="#type-nonce">nonce</a> <span class="xref-unresolved">Tezos_base__TzPervasives</span>.Data_encoding.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-seed_encoding" class="anchored"><a href="#val-seed_encoding" class="anchor"></a><code><span><span class="keyword">val</span> seed_encoding : <span><a href="#type-seed">seed</a> <span class="xref-unresolved">Tezos_base__TzPervasives</span>.Data_encoding.t</span></span></code></div></div></div></body></html>