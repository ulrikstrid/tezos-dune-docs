<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Updater (tezos-protocol-functor-003-PsddFKi3.Tezos_protocol_003_PsddFKi3_functor.Functor.Make.1-Tezos_protocol_environment.Updater)</title><link rel="stylesheet" href="../../../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">tezos-protocol-functor-003-PsddFKi3</a> &#x00BB; <a href="../../../../index.html">Tezos_protocol_003_PsddFKi3_functor</a> &#x00BB; <a href="../../../index.html">Functor</a> &#x00BB; <a href="../../index.html">Make</a> &#x00BB; <a href="../index.html">1-Tezos_protocol_environment</a> &#x00BB; Updater</nav><header class="odoc-preamble"><h1>Module <code><span>1-Tezos_protocol_environment.Updater</span></code></h1><p>Tezos Protocol Environment - Protocol updater.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-validation_result" class="anchored"><a href="#type-validation_result" class="anchor"></a><code><span><span class="keyword">type</span> validation_result</span><span> = </span><span>{</span></code><table><tr id="type-validation_result.context" class="anchored"><td class="def record field"><a href="#type-validation_result.context" class="anchor"></a><code><span>context : <a href="../Context/index.html#type-t">Context.t</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The resulting context, it will be used for the next block.</p><span class="comment-delim">*)</span></td></tr><tr id="type-validation_result.fitness" class="anchored"><td class="def record field"><a href="#type-validation_result.fitness" class="anchor"></a><code><span>fitness : <a href="../Fitness/index.html#type-t">Fitness.t</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The effective fitness of the block (to be compared with the 'announced' one in the block header.</p><span class="comment-delim">*)</span></td></tr><tr id="type-validation_result.message" class="anchored"><td class="def record field"><a href="#type-validation_result.message" class="anchor"></a><code><span>message : <span>string option</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>An optional informative message to be used as in the 'git commit' of the block's context.</p><span class="comment-delim">*)</span></td></tr><tr id="type-validation_result.max_operations_ttl" class="anchored"><td class="def record field"><a href="#type-validation_result.max_operations_ttl" class="anchor"></a><code><span>max_operations_ttl : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The &quot;time-to-live&quot; of operation for the next block: any operations whose 'branch' is older than 'ttl' blocks in the past cannot be included in the next block.</p><span class="comment-delim">*)</span></td></tr><tr id="type-validation_result.last_allowed_fork_level" class="anchored"><td class="def record field"><a href="#type-validation_result.last_allowed_fork_level" class="anchor"></a><code><span>last_allowed_fork_level : <a href="../Int32/index.html#type-t">Int32.t</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The level of the last block for which the node might consider an alternate branch. The shell should consider as invalid any branch whose fork point is older than the given level</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Validation result: the record returned by the protocol on the successful validation of a block.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-quota" class="anchored"><a href="#type-quota" class="anchor"></a><code><span><span class="keyword">type</span> quota</span><span> = </span><span>{</span></code><table><tr id="type-quota.max_size" class="anchored"><td class="def record field"><a href="#type-quota.max_size" class="anchor"></a><code><span>max_size : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The maximum size (in bytes) of the serialized list of operations.</p><span class="comment-delim">*)</span></td></tr><tr id="type-quota.max_op" class="anchored"><td class="def record field"><a href="#type-quota.max_op" class="anchor"></a><code><span>max_op : <span>int option</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The maximum number of operation. <code>None</code> means no limit.</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-rpc_context" class="anchored"><a href="#type-rpc_context" class="anchor"></a><code><span><span class="keyword">type</span> rpc_context</span><span> = </span><span>{</span></code><table><tr id="type-rpc_context.block_hash" class="anchored"><td class="def record field"><a href="#type-rpc_context.block_hash" class="anchor"></a><code><span>block_hash : <a href="../Block_hash/index.html#type-t">Block_hash.t</a>;</span></code></td></tr><tr id="type-rpc_context.block_header" class="anchored"><td class="def record field"><a href="#type-rpc_context.block_header" class="anchor"></a><code><span>block_header : <a href="../Block_header/index.html#type-shell_header">Block_header.shell_header</a>;</span></code></td></tr><tr id="type-rpc_context.context" class="anchored"><td class="def record field"><a href="#type-rpc_context.context" class="anchor"></a><code><span>context : <a href="../Context/index.html#type-t">Context.t</a>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-PROTOCOL" class="anchored"><a href="#module-type-PROTOCOL" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-PROTOCOL/index.html">PROTOCOL</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This is the signature of a Tezos protocol implementation. It has access to the standard library and the Environment module.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-activate" class="anchored"><a href="#val-activate" class="anchor"></a><code><span><span class="keyword">val</span> activate : <span><a href="../Context/index.html#type-t">Context.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Protocol_hash/index.html#type-t">Protocol_hash.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Context/index.html#type-t">Context.t</a> <a href="../Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Activates a given protocol version from a given context. This means that the context used for the next block will use this version (this is not an immediate change). The version must have been previously compiled successfully.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-fork_test_chain" class="anchored"><a href="#val-fork_test_chain" class="anchor"></a><code><span><span class="keyword">val</span> fork_test_chain : <span><a href="../Context/index.html#type-t">Context.t</a> <span class="arrow">&#45;&gt;</span></span> <span>protocol:<a href="../Protocol_hash/index.html#type-t">Protocol_hash.t</a> <span class="arrow">&#45;&gt;</span></span> <span>expiration:<a href="../Time/index.html#type-t">Time.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Context/index.html#type-t">Context.t</a> <a href="../Lwt/index.html#type-t">Lwt.t</a></span></span></code></div><div class="spec-doc"><p>Fork a test chain. The forked chain will use the current block as genesis, and <code>protocol</code> as economic protocol. The chain will be destroyed when a (successor) block will have a timestamp greater than <code>expiration</code>. The protocol must have been previously compiled successfully.</p></div></div></div></body></html>