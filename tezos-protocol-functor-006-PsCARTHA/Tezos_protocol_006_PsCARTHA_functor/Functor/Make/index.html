<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (tezos-protocol-functor-006-PsCARTHA.Tezos_protocol_006_PsCARTHA_functor.Functor.Make)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">tezos-protocol-functor-006-PsCARTHA</a> &#x00BB; <a href="../../index.html">Tezos_protocol_006_PsCARTHA_functor</a> &#x00BB; <a href="../index.html">Functor</a> &#x00BB; Make</nav><h1>Module <code>Functor.Make</code></h1></header><h3 class="heading">Parameters</h3><ul><li><code><a href="argument-1-Tezos_protocol_environment/index.html">Tezos_protocol_environment</a> : <a href="../../../../tezos-protocol-environment-sigs/Tezos_protocol_environment_sigs__V0/index.html#module-type-T">Tezos_protocol_environment_sigs__V0.T</a></code></li></ul><h3 class="heading">Signature</h3><dl><dt class="spec value" id="val-hash"><a href="#val-hash" class="anchor"></a><code><span class="keyword">val</span> hash : <a href="argument-1-Tezos_protocol_environment/Protocol_hash/index.html#type-t">Tezos_protocol_environment.Protocol_hash.t</a></code></dt></dl><div class="spec module" id="module-Misc"><a href="#module-Misc" class="anchor"></a><code><span class="keyword">module</span> <a href="Misc/index.html">Misc</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Storage_description"><a href="#module-Storage_description" class="anchor"></a><code><span class="keyword">module</span> <a href="Storage_description/index.html">Storage_description</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-State_hash"><a href="#module-State_hash" class="anchor"></a><code><span class="keyword">module</span> <a href="State_hash/index.html">State_hash</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Nonce_hash"><a href="#module-Nonce_hash" class="anchor"></a><code><span class="keyword">module</span> <a href="Nonce_hash/index.html">Nonce_hash</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Script_expr_hash"><a href="#module-Script_expr_hash" class="anchor"></a><code><span class="keyword">module</span> <a href="Script_expr_hash/index.html">Script_expr_hash</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Contract_hash"><a href="#module-Contract_hash" class="anchor"></a><code><span class="keyword">module</span> <a href="Contract_hash/index.html">Contract_hash</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Blinded_public_key_hash"><a href="#module-Blinded_public_key_hash" class="anchor"></a><code><span class="keyword">module</span> <a href="Blinded_public_key_hash/index.html">Blinded_public_key_hash</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Qty_repr"><a href="#module-Qty_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Qty_repr/index.html">Qty_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Tez_repr"><a href="#module-Tez_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Tez_repr/index.html">Tez_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Period_repr"><a href="#module-Period_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Period_repr/index.html">Period_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Time_repr"><a href="#module-Time_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Time_repr/index.html">Time_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Constants_repr"><a href="#module-Constants_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Constants_repr/index.html">Constants_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Fitness_repr"><a href="#module-Fitness_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Fitness_repr/index.html">Fitness_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Raw_level_repr"><a href="#module-Raw_level_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Raw_level_repr/index.html">Raw_level_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Voting_period_repr"><a href="#module-Voting_period_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Voting_period_repr/index.html">Voting_period_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Cycle_repr"><a href="#module-Cycle_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Cycle_repr/index.html">Cycle_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Level_repr"><a href="#module-Level_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Level_repr/index.html">Level_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Seed_repr"><a href="#module-Seed_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Seed_repr/index.html">Seed_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Gas_limit_repr"><a href="#module-Gas_limit_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Gas_limit_repr/index.html">Gas_limit_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Script_int_repr"><a href="#module-Script_int_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Script_int_repr/index.html">Script_int_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Script_timestamp_repr"><a href="#module-Script_timestamp_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Script_timestamp_repr/index.html">Script_timestamp_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Michelson_v1_primitives"><a href="#module-Michelson_v1_primitives" class="anchor"></a><code><span class="keyword">module</span> <a href="Michelson_v1_primitives/index.html">Michelson_v1_primitives</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Script_repr"><a href="#module-Script_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Script_repr/index.html">Script_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Legacy_script_support_repr"><a href="#module-Legacy_script_support_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Legacy_script_support_repr/index.html">Legacy_script_support_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Contract_repr"><a href="#module-Contract_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Contract_repr/index.html">Contract_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Roll_repr"><a href="#module-Roll_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Roll_repr/index.html">Roll_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Vote_repr"><a href="#module-Vote_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Vote_repr/index.html">Vote_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Block_header_repr"><a href="#module-Block_header_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Block_header_repr/index.html">Block_header_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Operation_repr"><a href="#module-Operation_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Operation_repr/index.html">Operation_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Manager_repr"><a href="#module-Manager_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Manager_repr/index.html">Manager_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Commitment_repr"><a href="#module-Commitment_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Commitment_repr/index.html">Commitment_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Parameters_repr"><a href="#module-Parameters_repr" class="anchor"></a><code><span class="keyword">module</span> <a href="Parameters_repr/index.html">Parameters_repr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Raw_context"><a href="#module-Raw_context" class="anchor"></a><code><span class="keyword">module</span> <a href="Raw_context/index.html">Raw_context</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Storage_sigs"><a href="#module-Storage_sigs" class="anchor"></a><code><span class="keyword">module</span> <a href="Storage_sigs/index.html">Storage_sigs</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Storage_functors"><a href="#module-Storage_functors" class="anchor"></a><code><span class="keyword">module</span> <a href="Storage_functors/index.html">Storage_functors</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Storage"><a href="#module-Storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Storage/index.html">Storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Constants_storage"><a href="#module-Constants_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Constants_storage/index.html">Constants_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Level_storage"><a href="#module-Level_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Level_storage/index.html">Level_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Nonce_storage"><a href="#module-Nonce_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Nonce_storage/index.html">Nonce_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Seed_storage"><a href="#module-Seed_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Seed_storage/index.html">Seed_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Roll_storage"><a href="#module-Roll_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Roll_storage/index.html">Roll_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Delegate_storage"><a href="#module-Delegate_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Delegate_storage/index.html">Delegate_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Contract_storage"><a href="#module-Contract_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Contract_storage/index.html">Contract_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Bootstrap_storage"><a href="#module-Bootstrap_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Bootstrap_storage/index.html">Bootstrap_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Fitness_storage"><a href="#module-Fitness_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Fitness_storage/index.html">Fitness_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Vote_storage"><a href="#module-Vote_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Vote_storage/index.html">Vote_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Commitment_storage"><a href="#module-Commitment_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Commitment_storage/index.html">Commitment_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Init_storage"><a href="#module-Init_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Init_storage/index.html">Init_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Fees_storage"><a href="#module-Fees_storage" class="anchor"></a><code><span class="keyword">module</span> <a href="Fees_storage/index.html">Fees_storage</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Alpha_context"><a href="#module-Alpha_context" class="anchor"></a><code><span class="keyword">module</span> <a href="Alpha_context/index.html">Alpha_context</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Script_typed_ir"><a href="#module-Script_typed_ir" class="anchor"></a><code><span class="keyword">module</span> <a href="Script_typed_ir/index.html">Script_typed_ir</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Script_tc_errors"><a href="#module-Script_tc_errors" class="anchor"></a><code><span class="keyword">module</span> <a href="Script_tc_errors/index.html">Script_tc_errors</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Michelson_v1_gas"><a href="#module-Michelson_v1_gas" class="anchor"></a><code><span class="keyword">module</span> <a href="Michelson_v1_gas/index.html">Michelson_v1_gas</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Script_ir_annot"><a href="#module-Script_ir_annot" class="anchor"></a><code><span class="keyword">module</span> <a href="Script_ir_annot/index.html">Script_ir_annot</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Script_ir_translator"><a href="#module-Script_ir_translator" class="anchor"></a><code><span class="keyword">module</span> <a href="Script_ir_translator/index.html">Script_ir_translator</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Script_tc_errors_registration"><a href="#module-Script_tc_errors_registration" class="anchor"></a><code><span class="keyword">module</span> <a href="Script_tc_errors_registration/index.html">Script_tc_errors_registration</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Script_interpreter"><a href="#module-Script_interpreter" class="anchor"></a><code><span class="keyword">module</span> <a href="Script_interpreter/index.html">Script_interpreter</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Baking"><a href="#module-Baking" class="anchor"></a><code><span class="keyword">module</span> <a href="Baking/index.html">Baking</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Amendment"><a href="#module-Amendment" class="anchor"></a><code><span class="keyword">module</span> <a href="Amendment/index.html">Amendment</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Apply_results"><a href="#module-Apply_results" class="anchor"></a><code><span class="keyword">module</span> <a href="Apply_results/index.html">Apply_results</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Apply"><a href="#module-Apply" class="anchor"></a><code><span class="keyword">module</span> <a href="Apply/index.html">Apply</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Services_registration"><a href="#module-Services_registration" class="anchor"></a><code><span class="keyword">module</span> <a href="Services_registration/index.html">Services_registration</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Constants_services"><a href="#module-Constants_services" class="anchor"></a><code><span class="keyword">module</span> <a href="Constants_services/index.html">Constants_services</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Contract_services"><a href="#module-Contract_services" class="anchor"></a><code><span class="keyword">module</span> <a href="Contract_services/index.html">Contract_services</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Delegate_services"><a href="#module-Delegate_services" class="anchor"></a><code><span class="keyword">module</span> <a href="Delegate_services/index.html">Delegate_services</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Helpers_services"><a href="#module-Helpers_services" class="anchor"></a><code><span class="keyword">module</span> <a href="Helpers_services/index.html">Helpers_services</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Voting_services"><a href="#module-Voting_services" class="anchor"></a><code><span class="keyword">module</span> <a href="Voting_services/index.html">Voting_services</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Alpha_services"><a href="#module-Alpha_services" class="anchor"></a><code><span class="keyword">module</span> <a href="Alpha_services/index.html">Alpha_services</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Main"><a href="#module-Main" class="anchor"></a><code><span class="keyword">module</span> <a href="Main/index.html">Main</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="index.html#module-Main">Main</a></code></span></summary><aside><p>Tezos Protocol Implementation - Protocol Signature Instance</p></aside><dl><dt class="spec type" id="type-validation_mode"><a href="#type-validation_mode" class="anchor"></a><code><span class="keyword">type</span> validation_mode</code><code> = </code><table class="variant"><tr id="type-validation_mode.Application" class="anchored"><td class="def constructor"><a href="#type-validation_mode.Application" class="anchor"></a><code>| </code><code><span class="constructor">Application</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-validation_mode.block_header" class="anchored"><td class="def field"><a href="#type-validation_mode.block_header" class="anchor"></a><code>block_header : <a href="Alpha_context/Block_header/index.html#type-t">Alpha_context.Block_header.t</a>;</code></td></tr><tr id="type-validation_mode.baker" class="anchored"><td class="def field"><a href="#type-validation_mode.baker" class="anchor"></a><code>baker : <a href="Alpha_context/index.html#type-public_key_hash">Alpha_context.public_key_hash</a>;</code></td></tr><tr id="type-validation_mode.block_delay" class="anchored"><td class="def field"><a href="#type-validation_mode.block_delay" class="anchor"></a><code>block_delay : <a href="Alpha_context/Period/index.html#type-t">Alpha_context.Period.t</a>;</code></td></tr></table><code>}</code></td></tr><tr id="type-validation_mode.Partial_application" class="anchored"><td class="def constructor"><a href="#type-validation_mode.Partial_application" class="anchor"></a><code>| </code><code><span class="constructor">Partial_application</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-validation_mode.block_header" class="anchored"><td class="def field"><a href="#type-validation_mode.block_header" class="anchor"></a><code>block_header : <a href="Alpha_context/Block_header/index.html#type-t">Alpha_context.Block_header.t</a>;</code></td></tr><tr id="type-validation_mode.baker" class="anchored"><td class="def field"><a href="#type-validation_mode.baker" class="anchor"></a><code>baker : <a href="Alpha_context/index.html#type-public_key_hash">Alpha_context.public_key_hash</a>;</code></td></tr><tr id="type-validation_mode.block_delay" class="anchored"><td class="def field"><a href="#type-validation_mode.block_delay" class="anchor"></a><code>block_delay : <a href="Alpha_context/Period/index.html#type-t">Alpha_context.Period.t</a>;</code></td></tr></table><code>}</code></td></tr><tr id="type-validation_mode.Partial_construction" class="anchored"><td class="def constructor"><a href="#type-validation_mode.Partial_construction" class="anchor"></a><code>| </code><code><span class="constructor">Partial_construction</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-validation_mode.predecessor" class="anchored"><td class="def field"><a href="#type-validation_mode.predecessor" class="anchor"></a><code>predecessor : <a href="argument-1-Tezos_protocol_environment/Block_hash/index.html#type-t">Tezos_protocol_environment.Block_hash.t</a>;</code></td></tr></table><code>}</code></td></tr><tr id="type-validation_mode.Full_construction" class="anchored"><td class="def constructor"><a href="#type-validation_mode.Full_construction" class="anchor"></a><code>| </code><code><span class="constructor">Full_construction</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-validation_mode.predecessor" class="anchored"><td class="def field"><a href="#type-validation_mode.predecessor" class="anchor"></a><code>predecessor : <a href="argument-1-Tezos_protocol_environment/Block_hash/index.html#type-t">Tezos_protocol_environment.Block_hash.t</a>;</code></td></tr><tr id="type-validation_mode.protocol_data" class="anchored"><td class="def field"><a href="#type-validation_mode.protocol_data" class="anchor"></a><code>protocol_data : <a href="Alpha_context/Block_header/index.html#type-contents">Alpha_context.Block_header.contents</a>;</code></td></tr><tr id="type-validation_mode.baker" class="anchored"><td class="def field"><a href="#type-validation_mode.baker" class="anchor"></a><code>baker : <a href="Alpha_context/index.html#type-public_key_hash">Alpha_context.public_key_hash</a>;</code></td></tr><tr id="type-validation_mode.block_delay" class="anchored"><td class="def field"><a href="#type-validation_mode.block_delay" class="anchor"></a><code>block_delay : <a href="Alpha_context/Period/index.html#type-t">Alpha_context.Period.t</a>;</code></td></tr></table><code>}</code></td></tr></table></dt><dt class="spec type" id="type-validation_state"><a href="#type-validation_state" class="anchor"></a><code><span class="keyword">type</span> validation_state</code><code> = </code><code>{</code><table class="record"><tr id="type-validation_state.mode" class="anchored"><td class="def field"><a href="#type-validation_state.mode" class="anchor"></a><code>mode : <a href="index.html#type-validation_mode">validation_mode</a>;</code></td></tr><tr id="type-validation_state.chain_id" class="anchored"><td class="def field"><a href="#type-validation_state.chain_id" class="anchor"></a><code>chain_id : <a href="argument-1-Tezos_protocol_environment/Chain_id/index.html#type-t">Tezos_protocol_environment.Chain_id.t</a>;</code></td></tr><tr id="type-validation_state.ctxt" class="anchored"><td class="def field"><a href="#type-validation_state.ctxt" class="anchor"></a><code>ctxt : <a href="Alpha_context/index.html#type-t">Alpha_context.t</a>;</code></td></tr><tr id="type-validation_state.op_count" class="anchored"><td class="def field"><a href="#type-validation_state.op_count" class="anchor"></a><code>op_count : int;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-operation_data"><a href="#type-operation_data" class="anchor"></a><code><span class="keyword">type</span> operation_data</code><code> = <a href="Alpha_context/index.html#type-packed_protocol_data">Alpha_context.packed_protocol_data</a></code></dt><dt class="spec type" id="type-operation"><a href="#type-operation" class="anchor"></a><code><span class="keyword">type</span> operation</code><code> = <a href="Alpha_context/index.html#type-packed_operation">Alpha_context.packed_operation</a></code><code> = </code><code>{</code><table class="record"><tr id="type-operation.shell" class="anchored"><td class="def field"><a href="#type-operation.shell" class="anchor"></a><code>shell : <a href="argument-1-Tezos_protocol_environment/Operation/index.html#type-shell_header">Tezos_protocol_environment.Operation.shell_header</a>;</code></td></tr><tr id="type-operation.protocol_data" class="anchored"><td class="def field"><a href="#type-operation.protocol_data" class="anchor"></a><code>protocol_data : <a href="index.html#type-operation_data">operation_data</a>;</code></td></tr></table><code>}</code></dt></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="argument-1-Tezos_protocol_environment/Updater/index.html#module-type-PROTOCOL">Tezos_protocol_environment.Updater.PROTOCOL</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="argument-1-Tezos_protocol_environment/Updater/module-type-PROTOCOL/index.html#type-block_header_data">block_header_data</a> = <a href="Alpha_context/Block_header/index.html#type-protocol_data">Alpha_context.Block_header.protocol_data</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="argument-1-Tezos_protocol_environment/Updater/module-type-PROTOCOL/index.html#type-block_header_metadata">block_header_metadata</a> = <a href="Apply_results/index.html#type-block_metadata">Apply_results.block_metadata</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="argument-1-Tezos_protocol_environment/Updater/module-type-PROTOCOL/index.html#type-block_header">block_header</a> = <a href="Alpha_context/Block_header/index.html#type-t">Alpha_context.Block_header.t</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="argument-1-Tezos_protocol_environment/Updater/module-type-PROTOCOL/index.html#type-operation_data">operation_data</a> := <a href="index.html#type-operation_data">operation_data</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="argument-1-Tezos_protocol_environment/Updater/module-type-PROTOCOL/index.html#type-operation_receipt">operation_receipt</a> = <a href="Apply_results/index.html#type-packed_operation_metadata">Apply_results.packed_operation_metadata</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="argument-1-Tezos_protocol_environment/Updater/module-type-PROTOCOL/index.html#type-operation">operation</a> := <a href="index.html#type-operation">operation</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="argument-1-Tezos_protocol_environment/Updater/module-type-PROTOCOL/index.html#type-validation_state">validation_state</a> := <a href="index.html#type-validation_state">validation_state</a></code></span></summary><dl><dt class="spec value" id="val-max_block_length"><a href="#val-max_block_length" class="anchor"></a><code><span class="keyword">val</span> max_block_length : int</code></dt><dd><p>The maximum size of a block header in bytes.</p></dd></dl><dl><dt class="spec value" id="val-max_operation_data_length"><a href="#val-max_operation_data_length" class="anchor"></a><code><span class="keyword">val</span> max_operation_data_length : int</code></dt><dd><p>The maximum size of an operation in bytes.</p></dd></dl><dl><dt class="spec value" id="val-validation_passes"><a href="#val-validation_passes" class="anchor"></a><code><span class="keyword">val</span> validation_passes : <span><a href="argument-1-Tezos_protocol_environment/Updater/index.html#type-quota">Tezos_protocol_environment.Updater.quota</a> list</span></code></dt><dd><p>The number of validation passes (length of the list) and the operation's quota for each pass.</p></dd></dl><dl><dt class="spec type" id="type-block_header_data"><a href="#type-block_header_data" class="anchor"></a><code><span class="keyword">type</span> block_header_data</code><code> = <a href="Alpha_context/Block_header/index.html#type-protocol_data">Alpha_context.Block_header.protocol_data</a></code></dt><dd><p>The version specific type of blocks.</p></dd></dl><dl><dt class="spec value" id="val-block_header_data_encoding"><a href="#val-block_header_data_encoding" class="anchor"></a><code><span class="keyword">val</span> block_header_data_encoding : <span><a href="index.html#type-block_header_data">block_header_data</a> <a href="argument-1-Tezos_protocol_environment/Data_encoding/index.html#type-t">Tezos_protocol_environment.Data_encoding.t</a></span></code></dt><dd><p>Encoding for version specific part of block headers.</p></dd></dl><dl><dt class="spec type" id="type-block_header"><a href="#type-block_header" class="anchor"></a><code><span class="keyword">type</span> block_header</code><code> = <a href="Alpha_context/Block_header/index.html#type-t">Alpha_context.Block_header.t</a></code><code> = </code><code>{</code><table class="record"><tr id="type-block_header.shell" class="anchored"><td class="def field"><a href="#type-block_header.shell" class="anchor"></a><code>shell : <a href="argument-1-Tezos_protocol_environment/Block_header/index.html#type-shell_header">Tezos_protocol_environment.Block_header.shell_header</a>;</code></td></tr><tr id="type-block_header.protocol_data" class="anchored"><td class="def field"><a href="#type-block_header.protocol_data" class="anchor"></a><code>protocol_data : <a href="index.html#type-block_header_data">block_header_data</a>;</code></td></tr></table><code>}</code></dt><dd><p>A fully parsed block header.</p></dd></dl><dl><dt class="spec type" id="type-block_header_metadata"><a href="#type-block_header_metadata" class="anchor"></a><code><span class="keyword">type</span> block_header_metadata</code><code> = <a href="Apply_results/index.html#type-block_metadata">Apply_results.block_metadata</a></code></dt><dd><p>Version-specific side information computed by the protocol during the validation of a block. Should not include information about the evaluation of operations which is handled separately by <code>operation_metadata</code>. To be used as an execution trace by tools (client, indexer). Not necessary for validation.</p></dd></dl><dl><dt class="spec value" id="val-block_header_metadata_encoding"><a href="#val-block_header_metadata_encoding" class="anchor"></a><code><span class="keyword">val</span> block_header_metadata_encoding : <span><a href="index.html#type-block_header_metadata">block_header_metadata</a> <a href="argument-1-Tezos_protocol_environment/Data_encoding/index.html#type-t">Tezos_protocol_environment.Data_encoding.t</a></span></code></dt><dd><p>Encoding for version-specific block metadata.</p></dd></dl><dl><dt class="spec type" id="type-operation_data"><a href="#type-operation_data" class="anchor"></a><code><span class="keyword">type</span> operation_data</code></dt><dd><p>The version specific type of operations.</p></dd></dl><dl><dt class="spec type" id="type-operation_receipt"><a href="#type-operation_receipt" class="anchor"></a><code><span class="keyword">type</span> operation_receipt</code><code> = <a href="Apply_results/index.html#type-packed_operation_metadata">Apply_results.packed_operation_metadata</a></code></dt><dd><p>Version-specific side information computed by the protocol during the validation of each operation, to be used conjointly with <a href="index.html#type-block_header_metadata"><code>block_header_metadata</code></a>.</p></dd></dl><dl><dt class="spec type" id="type-operation"><a href="#type-operation" class="anchor"></a><code><span class="keyword">type</span> operation</code><code> = </code><code>{</code><table class="record"><tr id="type-operation.shell" class="anchored"><td class="def field"><a href="#type-operation.shell" class="anchor"></a><code>shell : <a href="argument-1-Tezos_protocol_environment/Operation/index.html#type-shell_header">Tezos_protocol_environment.Operation.shell_header</a>;</code></td></tr><tr id="type-operation.protocol_data" class="anchored"><td class="def field"><a href="#type-operation.protocol_data" class="anchor"></a><code>protocol_data : <a href="index.html#type-operation_data">operation_data</a>;</code></td></tr></table><code>}</code></dt><dd><p>A fully parsed operation.</p></dd></dl><dl><dt class="spec value" id="val-operation_data_encoding"><a href="#val-operation_data_encoding" class="anchor"></a><code><span class="keyword">val</span> operation_data_encoding : <span><a href="index.html#type-operation_data">operation_data</a> <a href="argument-1-Tezos_protocol_environment/Data_encoding/index.html#type-t">Tezos_protocol_environment.Data_encoding.t</a></span></code></dt><dd><p>Encoding for version-specific operation data.</p></dd></dl><dl><dt class="spec value" id="val-operation_receipt_encoding"><a href="#val-operation_receipt_encoding" class="anchor"></a><code><span class="keyword">val</span> operation_receipt_encoding : <span><a href="index.html#type-operation_receipt">operation_receipt</a> <a href="argument-1-Tezos_protocol_environment/Data_encoding/index.html#type-t">Tezos_protocol_environment.Data_encoding.t</a></span></code></dt><dd><p>Encoding for version-specific operation receipts.</p></dd></dl><dl><dt class="spec value" id="val-operation_data_and_receipt_encoding"><a href="#val-operation_data_and_receipt_encoding" class="anchor"></a><code><span class="keyword">val</span> operation_data_and_receipt_encoding : <span><span>(<a href="index.html#type-operation_data">operation_data</a> * <a href="index.html#type-operation_receipt">operation_receipt</a>)</span> <a href="argument-1-Tezos_protocol_environment/Data_encoding/index.html#type-t">Tezos_protocol_environment.Data_encoding.t</a></span></code></dt><dd><p>Encoding that mixes an operation data and its receipt.</p></dd></dl><dl><dt class="spec value" id="val-acceptable_passes"><a href="#val-acceptable_passes" class="anchor"></a><code><span class="keyword">val</span> acceptable_passes : <a href="index.html#type-operation">operation</a> <span>&#45;&gt;</span> <span>int list</span></code></dt><dd><p>The Validation passes in which an operation can appear. For instance <code>[0]</code> if it only belongs to the first pass. An answer of <code>[]</code> means that the operation is ill-formed and cannot be included at all.</p></dd></dl><dl><dt class="spec value" id="val-compare_operations"><a href="#val-compare_operations" class="anchor"></a><code><span class="keyword">val</span> compare_operations : <a href="index.html#type-operation">operation</a> <span>&#45;&gt;</span> <a href="index.html#type-operation">operation</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Basic ordering of operations. <code>compare_operations op1 op2</code> means that <code>op1</code> should appear before <code>op2</code> in a block.</p></dd></dl><dl><dt class="spec type" id="type-validation_state"><a href="#type-validation_state" class="anchor"></a><code><span class="keyword">type</span> validation_state</code></dt><dd><p>A functional state that is transmitted through the steps of a block validation sequence. It must retain the current state of the store (that can be extracted from the outside using <a href="index.html#val-current_context"><code>current_context</code></a>, and whose final value is produced by <a href="index.html#val-finalize_block"><code>finalize_block</code></a>). It can also contain the information that must be remembered during the validation, which must be immutable (as validator or baker implementations are allowed to pause, replay or backtrack during the validation process).</p></dd></dl><dl><dt class="spec value" id="val-current_context"><a href="#val-current_context" class="anchor"></a><code><span class="keyword">val</span> current_context : <a href="index.html#type-validation_state">validation_state</a> <span>&#45;&gt;</span> <span><span><a href="argument-1-Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a> <a href="argument-1-Tezos_protocol_environment/Error_monad/index.html#type-tzresult">Tezos_protocol_environment.Error_monad.tzresult</a></span> <a href="argument-1-Tezos_protocol_environment/Lwt/index.html#type-t">Tezos_protocol_environment.Lwt.t</a></span></code></dt><dd><p>Access the context at a given validation step.</p></dd></dl><dl><dt class="spec value" id="val-begin_partial_application"><a href="#val-begin_partial_application" class="anchor"></a><code><span class="keyword">val</span> begin_partial_application : <span>chain_id:<a href="argument-1-Tezos_protocol_environment/Chain_id/index.html#type-t">Tezos_protocol_environment.Chain_id.t</a></span> <span>&#45;&gt;</span> <span>ancestor_context:<a href="argument-1-Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a></span> <span>&#45;&gt;</span> <span>predecessor_timestamp:<a href="argument-1-Tezos_protocol_environment/Time/index.html#type-t">Tezos_protocol_environment.Time.t</a></span> <span>&#45;&gt;</span> <span>predecessor_fitness:<a href="argument-1-Tezos_protocol_environment/Fitness/index.html#type-t">Tezos_protocol_environment.Fitness.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-block_header">block_header</a> <span>&#45;&gt;</span> <span><span><a href="index.html#type-validation_state">validation_state</a> <a href="argument-1-Tezos_protocol_environment/Error_monad/index.html#type-tzresult">Tezos_protocol_environment.Error_monad.tzresult</a></span> <a href="argument-1-Tezos_protocol_environment/Lwt/index.html#type-t">Tezos_protocol_environment.Lwt.t</a></span></code></dt><dd><p>Checks that a block is well formed in a given context. This function should run quickly, as its main use is to reject bad blocks from the chain as early as possible. The input context is the one resulting of an ancestor block of same protocol version. This ancestor of the current head is guaranteed to be more recent than `last_allowed_fork_level`.</p><p>The resulting `validation_state` will be used for multi-pass validation.</p></dd></dl><dl><dt class="spec value" id="val-begin_application"><a href="#val-begin_application" class="anchor"></a><code><span class="keyword">val</span> begin_application : <span>chain_id:<a href="argument-1-Tezos_protocol_environment/Chain_id/index.html#type-t">Tezos_protocol_environment.Chain_id.t</a></span> <span>&#45;&gt;</span> <span>predecessor_context:<a href="argument-1-Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a></span> <span>&#45;&gt;</span> <span>predecessor_timestamp:<a href="argument-1-Tezos_protocol_environment/Time/index.html#type-t">Tezos_protocol_environment.Time.t</a></span> <span>&#45;&gt;</span> <span>predecessor_fitness:<a href="argument-1-Tezos_protocol_environment/Fitness/index.html#type-t">Tezos_protocol_environment.Fitness.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-block_header">block_header</a> <span>&#45;&gt;</span> <span><span><a href="index.html#type-validation_state">validation_state</a> <a href="argument-1-Tezos_protocol_environment/Error_monad/index.html#type-tzresult">Tezos_protocol_environment.Error_monad.tzresult</a></span> <a href="argument-1-Tezos_protocol_environment/Lwt/index.html#type-t">Tezos_protocol_environment.Lwt.t</a></span></code></dt><dd><p>The first step in a block validation sequence. Initializes a validation context for validating a block. Takes as argument the <a href="argument-1-Tezos_protocol_environment/Block_header/index.html#type-t"><code>Tezos_protocol_environment.Block_header.t</code></a> to initialize the context for this block. The function <code>precheck_block</code> may not have been called before <code>begin_application</code>, so all the check performed by the former must be repeated in the latter.</p></dd></dl><dl><dt class="spec value" id="val-begin_construction"><a href="#val-begin_construction" class="anchor"></a><code><span class="keyword">val</span> begin_construction : <span>chain_id:<a href="argument-1-Tezos_protocol_environment/Chain_id/index.html#type-t">Tezos_protocol_environment.Chain_id.t</a></span> <span>&#45;&gt;</span> <span>predecessor_context:<a href="argument-1-Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a></span> <span>&#45;&gt;</span> <span>predecessor_timestamp:<a href="argument-1-Tezos_protocol_environment/Time/index.html#type-t">Tezos_protocol_environment.Time.t</a></span> <span>&#45;&gt;</span> <span>predecessor_level:<a href="argument-1-Tezos_protocol_environment/Int32/index.html#type-t">Tezos_protocol_environment.Int32.t</a></span> <span>&#45;&gt;</span> <span>predecessor_fitness:<a href="argument-1-Tezos_protocol_environment/Fitness/index.html#type-t">Tezos_protocol_environment.Fitness.t</a></span> <span>&#45;&gt;</span> <span>predecessor:<a href="argument-1-Tezos_protocol_environment/Block_hash/index.html#type-t">Tezos_protocol_environment.Block_hash.t</a></span> <span>&#45;&gt;</span> <span>timestamp:<a href="argument-1-Tezos_protocol_environment/Time/index.html#type-t">Tezos_protocol_environment.Time.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;protocol_data:<a href="index.html#type-block_header_data">block_header_data</a></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <span><span><a href="index.html#type-validation_state">validation_state</a> <a href="argument-1-Tezos_protocol_environment/Error_monad/index.html#type-tzresult">Tezos_protocol_environment.Error_monad.tzresult</a></span> <a href="argument-1-Tezos_protocol_environment/Lwt/index.html#type-t">Tezos_protocol_environment.Lwt.t</a></span></code></dt><dd><p>Initializes a validation context for constructing a new block (as opposed to validating an existing block). When the <code>protocol_data</code> argument is specified, it should contains a 'prototype' of a the protocol specific part of a block header, and the function should produce the exact same effect on the context than would produce the validation of a block containing an &quot;equivalent&quot; (but complete) header. For instance, if the block header usually includes a signature, the header provided to <a href="index.html#val-begin_construction"><code>begin_construction</code></a> should includes a faked signature.</p></dd></dl><dl><dt class="spec value" id="val-apply_operation"><a href="#val-apply_operation" class="anchor"></a><code><span class="keyword">val</span> apply_operation : <a href="index.html#type-validation_state">validation_state</a> <span>&#45;&gt;</span> <a href="index.html#type-operation">operation</a> <span>&#45;&gt;</span> <span><span><span>(<a href="index.html#type-validation_state">validation_state</a> * <a href="index.html#type-operation_receipt">operation_receipt</a>)</span> <a href="argument-1-Tezos_protocol_environment/Error_monad/index.html#type-tzresult">Tezos_protocol_environment.Error_monad.tzresult</a></span> <a href="argument-1-Tezos_protocol_environment/Lwt/index.html#type-t">Tezos_protocol_environment.Lwt.t</a></span></code></dt><dd><p>Called after <a href="index.html#val-begin_application"><code>begin_application</code></a> (or <a href="index.html#val-begin_construction"><code>begin_construction</code></a>) and before <a href="index.html#val-finalize_block"><code>finalize_block</code></a>, with each operation in the block.</p></dd></dl><dl><dt class="spec value" id="val-finalize_block"><a href="#val-finalize_block" class="anchor"></a><code><span class="keyword">val</span> finalize_block : <a href="index.html#type-validation_state">validation_state</a> <span>&#45;&gt;</span> <span><span><span>(<a href="argument-1-Tezos_protocol_environment/Updater/index.html#type-validation_result">Tezos_protocol_environment.Updater.validation_result</a> * <a href="index.html#type-block_header_metadata">block_header_metadata</a>)</span> <a href="argument-1-Tezos_protocol_environment/Error_monad/index.html#type-tzresult">Tezos_protocol_environment.Error_monad.tzresult</a></span> <a href="argument-1-Tezos_protocol_environment/Lwt/index.html#type-t">Tezos_protocol_environment.Lwt.t</a></span></code></dt><dd><p>The last step in a block validation sequence. It produces the context that will be used as input for the validation of its successor block candidates.</p></dd></dl><dl><dt class="spec value" id="val-rpc_services"><a href="#val-rpc_services" class="anchor"></a><code><span class="keyword">val</span> rpc_services : <span><a href="argument-1-Tezos_protocol_environment/Updater/index.html#type-rpc_context">Tezos_protocol_environment.Updater.rpc_context</a> <a href="argument-1-Tezos_protocol_environment/RPC_directory/index.html#type-t">Tezos_protocol_environment.RPC_directory.t</a></span></code></dt><dd><p>The list of remote procedures exported by this implementation</p></dd></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : <a href="argument-1-Tezos_protocol_environment/Context/index.html#type-t">Tezos_protocol_environment.Context.t</a> <span>&#45;&gt;</span> <a href="argument-1-Tezos_protocol_environment/Block_header/index.html#type-shell_header">Tezos_protocol_environment.Block_header.shell_header</a> <span>&#45;&gt;</span> <span><span><a href="argument-1-Tezos_protocol_environment/Updater/index.html#type-validation_result">Tezos_protocol_environment.Updater.validation_result</a> <a href="argument-1-Tezos_protocol_environment/Error_monad/index.html#type-tzresult">Tezos_protocol_environment.Error_monad.tzresult</a></span> <a href="argument-1-Tezos_protocol_environment/Lwt/index.html#type-t">Tezos_protocol_environment.Lwt.t</a></span></code></dt><dd><p>Initialize the context (or upgrade the context after a protocol amendment). This function receives the context resulting of the application of a block that triggered the amendment. It also receives the header of the block that triggered the amendment.</p></dd></dl></details></div></div></div></details></div></div></div></div></body></html>