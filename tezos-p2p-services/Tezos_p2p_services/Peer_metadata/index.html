<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Peer_metadata (tezos-p2p-services.Tezos_p2p_services.Peer_metadata)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-p2p-services</a> &#x00BB; <a href="../index.html">Tezos_p2p_services</a> &#x00BB; Peer_metadata</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_p2p_services.Peer_metadata</span></code></h1><p>All the (persistent) metadata associated to a peer.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-encoding" class="anchored"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : <span><a href="#type-t">t</a> <span class="xref-unresolved">Tezos_base__TzPervasives</span>.Data_encoding.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-empty" class="anchored"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-distributed_db_score" class="anchored"><a href="#val-distributed_db_score" class="anchor"></a><code><span><span class="keyword">val</span> distributed_db_score : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>the aggregate score function computed from the metadata collected for a peer</p></div></div><div class="odoc-spec"><div class="spec value" id="val-prevalidation_score" class="anchored"><a href="#val-prevalidation_score" class="anchor"></a><code><span><span class="keyword">val</span> prevalidation_score : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-score" class="anchored"><a href="#val-score" class="anchor"></a><code><span><span class="keyword">val</span> score : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-requests_kind" class="anchored"><a href="#type-requests_kind" class="anchor"></a><code><span><span class="keyword">type</span> requests_kind</span><span> = </span></code><table><tr id="type-requests_kind.Branch" class="anchored"><td class="def variant constructor"><a href="#type-requests_kind.Branch" class="anchor"></a><code><span>| </span><span><span class="constructor">Branch</span></span></code></td></tr><tr id="type-requests_kind.Head" class="anchored"><td class="def variant constructor"><a href="#type-requests_kind.Head" class="anchor"></a><code><span>| </span><span><span class="constructor">Head</span></span></code></td></tr><tr id="type-requests_kind.Block_header" class="anchored"><td class="def variant constructor"><a href="#type-requests_kind.Block_header" class="anchor"></a><code><span>| </span><span><span class="constructor">Block_header</span></span></code></td></tr><tr id="type-requests_kind.Operations" class="anchored"><td class="def variant constructor"><a href="#type-requests_kind.Operations" class="anchor"></a><code><span>| </span><span><span class="constructor">Operations</span></span></code></td></tr><tr id="type-requests_kind.Protocols" class="anchored"><td class="def variant constructor"><a href="#type-requests_kind.Protocols" class="anchor"></a><code><span>| </span><span><span class="constructor">Protocols</span></span></code></td></tr><tr id="type-requests_kind.Operation_hashes_for_block" class="anchored"><td class="def variant constructor"><a href="#type-requests_kind.Operation_hashes_for_block" class="anchor"></a><code><span>| </span><span><span class="constructor">Operation_hashes_for_block</span></span></code></td></tr><tr id="type-requests_kind.Operations_for_block" class="anchored"><td class="def variant constructor"><a href="#type-requests_kind.Operations_for_block" class="anchor"></a><code><span>| </span><span><span class="constructor">Operations_for_block</span></span></code></td></tr><tr id="type-requests_kind.Checkpoint" class="anchored"><td class="def variant constructor"><a href="#type-requests_kind.Checkpoint" class="anchor"></a><code><span>| </span><span><span class="constructor">Checkpoint</span></span></code></td></tr><tr id="type-requests_kind.Protocol_branch" class="anchored"><td class="def variant constructor"><a href="#type-requests_kind.Protocol_branch" class="anchor"></a><code><span>| </span><span><span class="constructor">Protocol_branch</span></span></code></td></tr><tr id="type-requests_kind.Predecessor_header" class="anchored"><td class="def variant constructor"><a href="#type-requests_kind.Predecessor_header" class="anchor"></a><code><span>| </span><span><span class="constructor">Predecessor_header</span></span></code></td></tr><tr id="type-requests_kind.Other" class="anchored"><td class="def variant constructor"><a href="#type-requests_kind.Other" class="anchor"></a><code><span>| </span><span><span class="constructor">Other</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-resource_kind" class="anchored"><a href="#type-resource_kind" class="anchor"></a><code><span><span class="keyword">type</span> resource_kind</span><span> = </span></code><table><tr id="type-resource_kind.Block" class="anchored"><td class="def variant constructor"><a href="#type-resource_kind.Block" class="anchor"></a><code><span>| </span><span><span class="constructor">Block</span></span></code></td></tr><tr id="type-resource_kind.Operations" class="anchored"><td class="def variant constructor"><a href="#type-resource_kind.Operations" class="anchor"></a><code><span>| </span><span><span class="constructor">Operations</span></span></code></td></tr><tr id="type-resource_kind.Protocol" class="anchored"><td class="def variant constructor"><a href="#type-resource_kind.Protocol" class="anchor"></a><code><span>| </span><span><span class="constructor">Protocol</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-advertisement" class="anchored"><a href="#type-advertisement" class="anchor"></a><code><span><span class="keyword">type</span> advertisement</span><span> = </span></code><table><tr id="type-advertisement.Head" class="anchored"><td class="def variant constructor"><a href="#type-advertisement.Head" class="anchor"></a><code><span>| </span><span><span class="constructor">Head</span></span></code></td></tr><tr id="type-advertisement.Branch" class="anchored"><td class="def variant constructor"><a href="#type-advertisement.Branch" class="anchor"></a><code><span>| </span><span><span class="constructor">Branch</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-metadata" class="anchored"><a href="#type-metadata" class="anchor"></a><code><span><span class="keyword">type</span> metadata</span><span> = </span></code><table><tr id="type-metadata.Received_request" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Received_request" class="anchor"></a><code><span>| </span><span><span class="constructor">Received_request</span> <span class="keyword">of</span> <a href="#type-requests_kind">requests_kind</a></span></code></td></tr><tr id="type-metadata.Sent_request" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Sent_request" class="anchor"></a><code><span>| </span><span><span class="constructor">Sent_request</span> <span class="keyword">of</span> <a href="#type-requests_kind">requests_kind</a></span></code></td></tr><tr id="type-metadata.Failed_request" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Failed_request" class="anchor"></a><code><span>| </span><span><span class="constructor">Failed_request</span> <span class="keyword">of</span> <a href="#type-requests_kind">requests_kind</a></span></code></td></tr><tr id="type-metadata.Scheduled_request" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Scheduled_request" class="anchor"></a><code><span>| </span><span><span class="constructor">Scheduled_request</span> <span class="keyword">of</span> <a href="#type-requests_kind">requests_kind</a></span></code></td></tr><tr id="type-metadata.Received_response" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Received_response" class="anchor"></a><code><span>| </span><span><span class="constructor">Received_response</span> <span class="keyword">of</span> <a href="#type-requests_kind">requests_kind</a></span></code></td></tr><tr id="type-metadata.Sent_response" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Sent_response" class="anchor"></a><code><span>| </span><span><span class="constructor">Sent_response</span> <span class="keyword">of</span> <a href="#type-requests_kind">requests_kind</a></span></code></td></tr><tr id="type-metadata.Unexpected_response" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Unexpected_response" class="anchor"></a><code><span>| </span><span><span class="constructor">Unexpected_response</span></span></code></td></tr><tr id="type-metadata.Unactivated_chain" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Unactivated_chain" class="anchor"></a><code><span>| </span><span><span class="constructor">Unactivated_chain</span></span></code></td></tr><tr id="type-metadata.Inactive_chain" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Inactive_chain" class="anchor"></a><code><span>| </span><span><span class="constructor">Inactive_chain</span></span></code></td></tr><tr id="type-metadata.Future_block" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Future_block" class="anchor"></a><code><span>| </span><span><span class="constructor">Future_block</span></span></code></td></tr><tr id="type-metadata.Unadvertised" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Unadvertised" class="anchor"></a><code><span>| </span><span><span class="constructor">Unadvertised</span> <span class="keyword">of</span> <a href="#type-resource_kind">resource_kind</a></span></code></td></tr><tr id="type-metadata.Sent_advertisement" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Sent_advertisement" class="anchor"></a><code><span>| </span><span><span class="constructor">Sent_advertisement</span> <span class="keyword">of</span> <a href="#type-advertisement">advertisement</a></span></code></td></tr><tr id="type-metadata.Received_advertisement" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Received_advertisement" class="anchor"></a><code><span>| </span><span><span class="constructor">Received_advertisement</span> <span class="keyword">of</span> <a href="#type-advertisement">advertisement</a></span></code></td></tr><tr id="type-metadata.Outdated_response" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Outdated_response" class="anchor"></a><code><span>| </span><span><span class="constructor">Outdated_response</span></span></code></td></tr><tr id="type-metadata.Valid_blocks" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Valid_blocks" class="anchor"></a><code><span>| </span><span><span class="constructor">Valid_blocks</span></span></code></td></tr><tr id="type-metadata.Old_heads" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Old_heads" class="anchor"></a><code><span>| </span><span><span class="constructor">Old_heads</span></span></code></td></tr><tr id="type-metadata.Cannot_download" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Cannot_download" class="anchor"></a><code><span>| </span><span><span class="constructor">Cannot_download</span></span></code></td></tr><tr id="type-metadata.Cannot_parse" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Cannot_parse" class="anchor"></a><code><span>| </span><span><span class="constructor">Cannot_parse</span></span></code></td></tr><tr id="type-metadata.Refused_by_prefilter" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Refused_by_prefilter" class="anchor"></a><code><span>| </span><span><span class="constructor">Refused_by_prefilter</span></span></code></td></tr><tr id="type-metadata.Refused_by_postfilter" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Refused_by_postfilter" class="anchor"></a><code><span>| </span><span><span class="constructor">Refused_by_postfilter</span></span></code></td></tr><tr id="type-metadata.Applied" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Applied" class="anchor"></a><code><span>| </span><span><span class="constructor">Applied</span></span></code></td></tr><tr id="type-metadata.Branch_delayed" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Branch_delayed" class="anchor"></a><code><span>| </span><span><span class="constructor">Branch_delayed</span></span></code></td></tr><tr id="type-metadata.Branch_refused" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Branch_refused" class="anchor"></a><code><span>| </span><span><span class="constructor">Branch_refused</span></span></code></td></tr><tr id="type-metadata.Refused" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Refused" class="anchor"></a><code><span>| </span><span><span class="constructor">Refused</span></span></code></td></tr><tr id="type-metadata.Duplicate" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Duplicate" class="anchor"></a><code><span>| </span><span><span class="constructor">Duplicate</span></span></code></td></tr><tr id="type-metadata.Outdated" class="anchored"><td class="def variant constructor"><a href="#type-metadata.Outdated" class="anchor"></a><code><span>| </span><span><span class="constructor">Outdated</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-incr" class="anchored"><a href="#val-incr" class="anchor"></a><code><span><span class="keyword">val</span> incr : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-metadata">metadata</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>incr score counters . Used to compute the final score for a peer</p></div></div><div class="odoc-spec"><div class="spec value" id="val-update_requests" class="anchored"><a href="#val-update_requests" class="anchor"></a><code><span><span class="keyword">val</span> update_requests : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-requests_kind">requests_kind</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-update_responses" class="anchored"><a href="#val-update_responses" class="anchor"></a><code><span><span class="keyword">val</span> update_responses : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-requests_kind">requests_kind</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></div></body></html>