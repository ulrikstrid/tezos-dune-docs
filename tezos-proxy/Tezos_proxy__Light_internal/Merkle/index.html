<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Merkle (tezos-proxy.Tezos_proxy__Light_internal.Merkle)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">tezos-proxy</a> &#x00BB; <a href="../index.html">Tezos_proxy__Light_internal</a> &#x00BB; Merkle</nav><h1>Module <code>Tezos_proxy__Light_internal.Merkle</code></h1><p>Module containing operations of Merkle proofs used by the light mode</p></header><dl><dt class="spec value" id="val-merkle_tree_to_irmin_tree"><a href="#val-merkle_tree_to_irmin_tree" class="anchor"></a><code><span class="keyword">val</span> merkle_tree_to_irmin_tree : <a href="../../../tezos-context/Tezos_context_memory/Context/Tree/index.html#type-repo">Tezos_context_memory.Context.Tree.repo</a> <span>&#45;&gt;</span> <a href="../../../tezos-shell-services/Tezos_shell_services/Block_services/index.html#type-merkle_tree">Tezos_shell_services.Block_services.merkle_tree</a> <span>&#45;&gt;</span> <span><span><span>(<a href="../../../tezos-context/Tezos_context_memory/Context/index.html#type-tree">Tezos_context_memory.Context.tree</a>, string)</span> Stdlib.result</span> Lwt.t</span></code></dt><dd><p>Transform a Merkle tree into an Irmin tree. Parameters are:</p><p>* The repo where the result should live * The Merkle tree to translate</p><p>Returns: The Irmin tree obtained or an error message</p></dd></dl><dl><dt class="spec value" id="val-contains_merkle_tree"><a href="#val-contains_merkle_tree" class="anchor"></a><code><span class="keyword">val</span> contains_merkle_tree : <a href="../../../tezos-context/Tezos_context_memory/Context/index.html#type-tree">Tezos_context_memory.Context.tree</a> <span>&#45;&gt;</span> <a href="../../../tezos-shell-services/Tezos_shell_services/Block_services/index.html#type-merkle_tree">Tezos_shell_services.Block_services.merkle_tree</a> <span>&#45;&gt;</span> <span><span><span>(unit, string)</span> Stdlib.result</span> Lwt.t</span></code></dt><dd><p>Whether an Irmin tree contains a Merkle tree (in particular whether they agree on hashes). Returns unit if the Irmin tree contains the Merkle tree, otherwise a message explaining why it is not the case.</p></dd></dl><dl><dt class="spec value" id="val-union_irmin_tree_merkle_tree"><a href="#val-union_irmin_tree_merkle_tree" class="anchor"></a><code><span class="keyword">val</span> union_irmin_tree_merkle_tree : <a href="../../../tezos-context/Tezos_context_memory/Context/Tree/index.html#type-repo">Tezos_context_memory.Context.Tree.repo</a> <span>&#45;&gt;</span> <a href="../../../tezos-context/Tezos_context_memory/Context/index.html#type-tree">Tezos_context_memory.Context.tree</a> <span>&#45;&gt;</span> <a href="../../../tezos-shell-services/Tezos_shell_services/Block_services/index.html#type-merkle_tree">Tezos_shell_services.Block_services.merkle_tree</a> <span>&#45;&gt;</span> <span><span><span>(<a href="../../../tezos-context/Tezos_context_memory/Context/index.html#type-tree">Tezos_context_memory.Context.tree</a>, string)</span> Stdlib.result</span> Lwt.t</span></code></dt><dd><p>Union an Irmin tree and a Merkle tree. Parameters are:</p><p>* The repo where the Irmin tree is stored (necessary to create shallow trees from Merkle hashes) * The Irmin tree * The Merkle tree</p><p>Returns: an augmented variant of the input Irmin tree or an error message.</p></dd></dl><dl><dt class="spec value" id="val-trees_shape_match"><a href="#val-trees_shape_match" class="anchor"></a><code><span class="keyword">val</span> trees_shape_match : <span>string list</span> <span>&#45;&gt;</span> <a href="../../../tezos-shell-services/Tezos_shell_services/Block_services/index.html#type-merkle_tree">Tezos_shell_services.Block_services.merkle_tree</a> <span>&#45;&gt;</span> <a href="../../../tezos-shell-services/Tezos_shell_services/Block_services/index.html#type-merkle_tree">Tezos_shell_services.Block_services.merkle_tree</a> <span>&#45;&gt;</span> <span><span>(unit, <span>string list</span>)</span> Stdlib.result</span></code></dt><dd><p><code>trees_shape_match path t1 t2</code> returns <code>Ok ()</code> if <code>t1</code> and <code>t2</code> have the same shape (tree of keys), otherwise an <code>Error</code> explaining how the shapes differ. The shape check tolerates a shape difference for nodes along the key's path (because at the end of this path, the first endpoint returns data; whereas validating endpoints return a hash).</p></dd></dl></div></body></html>