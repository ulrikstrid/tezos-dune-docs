<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_dropbox (tezos-stdlib.Tezos_stdlib.Lwt_dropbox)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-stdlib</a> &#x00BB; <a href="../index.html">Tezos_stdlib</a> &#x00BB; Lwt_dropbox</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_stdlib.Lwt_dropbox</span></code></h1></header><div class="odoc-content"><p>A 'dropbox' with a single element.</p><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div><div class="spec-doc"><p>Type of dropbox holding a value of type <code>'a</code></p></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Closed" class="anchored"><a href="#exception-Closed" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Closed</span></span></code></div><div class="spec-doc"><p>The exception returned when trying to access a 'closed' dropbox.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Create an empty dropbox.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-put" class="anchored"><a href="#val-put" class="anchor"></a><code><span><span class="keyword">val</span> put : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>put t e</code> puts the element <code>e</code> inside the dropbox <code>t</code>. If the dropbox already held an element, the old element is discarded and replaced by the new one.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">[Close]</span> <p>if <code>close t</code> has been called.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-take" class="anchored"><a href="#val-take" class="anchor"></a><code><span><span class="keyword">val</span> take : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>take t</code> is a promise that resolves as soon as an element is held by <code>t</code>. The element is removed from <code>t</code> when the promise resolves.</p><p>If <code>t</code> already holds an element when <code>take t</code> is called, the promise resolves immediately. Otherwise, the promise resolves when an element is <code>put</code> there.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">[Close]</span> <p>if <code>close t</code> has been called.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-take_with_timeout" class="anchored"><a href="#val-take_with_timeout" class="anchor"></a><code><span><span class="keyword">val</span> take_with_timeout : <span><span>unit <span class="xref-unresolved">Lwt</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>take_with_timeout timeout t</code> behaves like <code>take t</code> except that it returns <code>None</code> if <code>timeout</code> resolves before an element is <code>put</code>.</p><p>Note that <code>timeout</code> is canceled (i.e., fails with <code>Canceled</code>) if an element is <code>put</code> in time (or if one is already present).</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">[Close]</span> <p>if <code>close t</code> has been called.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-peek" class="anchored"><a href="#val-peek" class="anchor"></a><code><span><span class="keyword">val</span> peek : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> option</span></span></code></div><div class="spec-doc"><p><code>peek t</code> is <code>Some e</code> if <code>t</code> holds <code>e</code> and <code>None</code> if <code>t</code> does not hold any element.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <span class="value">[Close]</span> <p>if <code>close t</code> has been called.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-close" class="anchored"><a href="#val-close" class="anchor"></a><code><span><span class="keyword">val</span> close : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>close t</code> closes the dropbox <code>t</code>. It terminates all the waiting reader with the exception <code>Closed</code>. All further read or write will also immediately fail with <code>Closed</code>, except if the dropbox is not empty when <code>close</code> is called. In that case, a single (and last) <code>take</code> will succeed.</p></div></div></div></body></html>