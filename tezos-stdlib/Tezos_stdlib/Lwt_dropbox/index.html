<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_dropbox (tezos-stdlib.Tezos_stdlib.Lwt_dropbox)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-stdlib</a> &#x00BB; <a href="../index.html">Tezos_stdlib</a> &#x00BB; Lwt_dropbox</nav><h1>Module <code>Tezos_stdlib.Lwt_dropbox</code></h1></header><aside><p>A 'dropbox' with a single element.</p></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt><dd><p>Type of dropbox holding a value of type <code>'a</code></p></dd></dl><dl><dt class="spec exception" id="exception-Closed"><a href="#exception-Closed" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Closed</span></code></dt><dd><p>The exception returned when trying to access a 'closed' dropbox.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p>Create an empty dropbox.</p></dd></dl><dl><dt class="spec value" id="val-put"><a href="#val-put" class="anchor"></a><code><span class="keyword">val</span> put : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>put t e</code> puts the element <code>e</code> inside the dropbox <code>t</code>. If the dropbox already held an element, the old element is discarded and replaced by the new one.</p><dl><dt>raises [Close]</dt><dd><p>if <code>close t</code> has been called.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-take"><a href="#val-take" class="anchor"></a><code><span class="keyword">val</span> take : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span></code></dt><dd><p><code>take t</code> is a promise that resolves as soon as an element is held by <code>t</code>. The element is removed from <code>t</code> when the promise resolves.</p><p>If <code>t</code> already holds an element when <code>take t</code> is called, the promise resolves immediately. Otherwise, the promise resolves when an element is <code>put</code> there.</p><dl><dt>raises [Close]</dt><dd><p>if <code>close t</code> has been called.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-take_with_timeout"><a href="#val-take_with_timeout" class="anchor"></a><code><span class="keyword">val</span> take_with_timeout : <span>unit Lwt.t</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> Lwt.t</span></code></dt><dd><p><code>take_with_timeout timeout t</code> behaves like <code>take t</code> except that it returns <code>None</code> if <code>timeout</code> resolves before an element is <code>put</code>.</p><p>Note that <code>timeout</code> is canceled (i.e., fails with <code>Canceled</code>) if an element is <code>put</code> in time (or if one is already present).</p><dl><dt>raises [Close]</dt><dd><p>if <code>close t</code> has been called.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-peek"><a href="#val-peek" class="anchor"></a><code><span class="keyword">val</span> peek : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span></code></dt><dd><p><code>peek t</code> is <code>Some e</code> if <code>t</code> holds <code>e</code> and <code>None</code> if <code>t</code> does not hold any element.</p><dl><dt>raises [Close]</dt><dd><p>if <code>close t</code> has been called.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-close"><a href="#val-close" class="anchor"></a><code><span class="keyword">val</span> close : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>close t</code> closes the dropbox <code>t</code>. It terminates all the waiting reader with the exception <code>Closed</code>. All further read or write will also immediately fail with <code>Closed</code>, except if the dropbox is not empty when <code>close</code> is called. In that case, a single (and last) <code>take</code> will succeed.</p></dd></dl></div></body></html>