<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_idle_waiter (tezos-stdlib.Tezos_stdlib.Lwt_idle_waiter)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-stdlib</a> &#x00BB; <a href="../index.html">Tezos_stdlib</a> &#x00BB; Lwt_idle_waiter</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_stdlib.Lwt_idle_waiter</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>A lightweight scheduler to run tasks concurrently as well as special callbacks that must be run in mutual exclusion with the tasks (and each other).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Creates a new task / idle callback scheduler</p></div></div><div class="odoc-spec"><div class="spec value" id="val-task" class="anchored"><a href="#val-task" class="anchor"></a><code><span><span class="keyword">val</span> task : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Schedule a task to be run as soon as no idle callback is running, or as soon as the next idle callback has been run if it was scheduled by <a href="#val-force_idle"><code>force_idle</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-when_idle" class="anchored"><a href="#val-when_idle" class="anchor"></a><code><span><span class="keyword">val</span> when_idle : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Runs a callback as soon as no task is running. Does not prevent new tasks from being scheduled, the calling code should ensure that some idle time will eventually come. Calling this function from inside the callback will result in a dead lock.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-force_idle" class="anchored"><a href="#val-force_idle" class="anchor"></a><code><span><span class="keyword">val</span> force_idle : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Runs a callback as soon as possible. Lets all current tasks finish, but postpones all new tasks until the end of the callback. Calling this function from inside the callback will result in a dead lock.</p></div></div></div></body></html>