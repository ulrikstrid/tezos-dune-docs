<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_idle_waiter (tezos-stdlib.Tezos_stdlib.Lwt_idle_waiter)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-stdlib</a> &#x00BB; <a href="../index.html">Tezos_stdlib</a> &#x00BB; Lwt_idle_waiter</nav><h1>Module <code>Tezos_stdlib.Lwt_idle_waiter</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>A lightweight scheduler to run tasks concurrently as well as special callbacks that must be run in mutual exclusion with the tasks (and each other).</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Creates a new task / idle callback scheduler</p></dd></dl><dl><dt class="spec value" id="val-task"><a href="#val-task" class="anchor"></a><code><span class="keyword">val</span> task : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span></code></dt><dd><p>Schedule a task to be run as soon as no idle callback is running, or as soon as the next idle callback has been run if it was scheduled by <a href="index.html#val-force_idle"><code>force_idle</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-when_idle"><a href="#val-when_idle" class="anchor"></a><code><span class="keyword">val</span> when_idle : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span></code></dt><dd><p>Runs a callback as soon as no task is running. Does not prevent new tasks from being scheduled, the calling code should ensure that some idle time will eventually come. Calling this function from inside the callback will result in a dead lock.</p></dd></dl><dl><dt class="spec value" id="val-force_idle"><a href="#val-force_idle" class="anchor"></a><code><span class="keyword">val</span> force_idle : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> Lwt.t</span></code></dt><dd><p>Runs a callback as soon as possible. Lets all current tasks finish, but postpones all new tasks until the end of the callback. Calling this function from inside the callback will result in a dead lock.</p></dd></dl></div></body></html>