<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Scriptable (tezos-clic.Tezos_clic_unix.Scriptable)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">tezos-clic</a> &#x00BB; <a href="../index.html">Tezos_clic_unix</a> &#x00BB; Scriptable</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_clic_unix.Scriptable</span></code></h1><p>Manage a common <code>&quot;--for-script &lt;FORMAT&gt;&quot;</code> option to make the output of certain commands script-friendly.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-output_format" class="anchored"><a href="#type-output_format" class="anchor"></a><code><span><span class="keyword">type</span> output_format</span></code></div><div class="spec-doc"><p>A representation of the output format.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-clic_arg" class="anchored"><a href="#val-clic_arg" class="anchor"></a><code><span><span class="keyword">val</span> clic_arg : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-output_format">output_format</a> option</span>, <span class="type-var">_</span>)</span> <a href="../../Tezos_clic/Clic/index.html#type-arg">Tezos_clic.Clic.arg</a></span></span></code></div><div class="spec-doc"><p>Command line argument for <code>Clic</code>.command (and the <code>Clic.args*</code> functions). Not that this is the only way to obtain a value of type <a href="#type-output_format"><code>output_format</code></a>. On the command line, it appears as <code>--for-script</code> with values <code>TSV</code> or <code>CSV</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-output" class="anchored"><a href="#val-output" class="anchor"></a><code><span><span class="keyword">val</span> output : <span>?channel:<span class="xref-unresolved">Lwt_io</span>.output_channel <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-output_format">output_format</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span>for_human:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../../../tezos-error-monad/Tezos_error_monad/Error_monad/index.html#type-tzresult">Tezos_error_monad.Error_monad.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span>
<span>for_script:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> list</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../../../tezos-error-monad/Tezos_error_monad/Error_monad/index.html#type-tzresult">Tezos_error_monad.Error_monad.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>output fmt_opt ~for_human ~for_script</code> behaves in one of two ways. If <code>fmt_opt</code> is <code>Some _</code>, then it formats the value returned by <code>for_script ()</code>. The function's return value is formatted as lines of columns of values (list of lists of strings). This is to help scripts to decode/interpret/parse the output. Otherwise, if <code>fmt_opt</code> is <code>None</code>, it calls <code>for_human ()</code> which is responsible for the whole formatting.</p><p>The optional argument <code>channel</code> is used when automatically formatting the value returned by <code>for_script ()</code>. It has no effect on <code>for_human ()</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-output_row" class="anchored"><a href="#val-output_row" class="anchor"></a><code><span><span class="keyword">val</span> output_row : <span>?channel:<span class="xref-unresolved">Lwt_io</span>.output_channel <span class="arrow">&#45;&gt;</span></span>
<span><span><a href="#type-output_format">output_format</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span>for_human:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../../../tezos-error-monad/Tezos_error_monad/Error_monad/index.html#type-tzresult">Tezos_error_monad.Error_monad.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>for_script:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span>string list</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../../../tezos-error-monad/Tezos_error_monad/Error_monad/index.html#type-tzresult">Tezos_error_monad.Error_monad.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-output"><code>output</code></a> but for a single row of data.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-output_for_human" class="anchored"><a href="#val-output_for_human" class="anchor"></a><code><span><span class="keyword">val</span> output_for_human : <span><span><a href="#type-output_format">output_format</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../../../tezos-error-monad/Tezos_error_monad/Error_monad/index.html#type-tzresult">Tezos_error_monad.Error_monad.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../../../tezos-error-monad/Tezos_error_monad/Error_monad/index.html#type-tzresult">Tezos_error_monad.Error_monad.tzresult</a></span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>output_for_human fmt_opt for_human</code> behaves in either of two ways. If <code>fmt_opt</code> is <code>None</code>, then it calls <code>for_human ()</code>. Otherwise, it does nothing.</p><p>Use this function to provide output that is of no interest to automatic tools.</p></div></div></div></body></html>