<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>File_descriptor_sink (tezos-stdlib-unix.Tezos_stdlib_unix.File_descriptor_sink)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-stdlib-unix</a> &#x00BB; <a href="../index.html">Tezos_stdlib_unix</a> &#x00BB; File_descriptor_sink</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_stdlib_unix.File_descriptor_sink</span></code></h1><p>An implementation of <code>Tezos_base</code>.Internal_event.SINK which writes the events as JSON into a single file-descriptor.</p><p>It is registered with the URI scheme <code>&quot;file-descriptor-path&quot;</code> to output to a file or <code>&quot;file-descriptor-stdout&quot;</code>/<code>&quot;file-descriptor-stderr&quot;</code> for <code>stdout</code> and <code>stderr</code> respectively.</p><p>Available options are</p><ul><li><code>&quot;level-at-least&quot;</code> the minimal log-level that the sink will output (see <a href="../../../tezos-event-logging/Tezos_event_logging/Internal_event/index.html#type-level"><code>Tezos_event_logging.Internal_event.level</code></a>).</li><li><code>&quot;format&quot;</code> the output format used to separate JSON records: acceptable values are <code>&quot;one-per-line&quot;</code> (the default), and <code>&quot;netstring&quot;</code> (see <a href="https://en.wikipedia.org/wiki/Netstring">The Netstring format</a>).</li></ul><p>Options available only for <code>&quot;file-descriptor-path://&quot;</code>:</p><ul><li><code>&quot;with-pid=true&quot;</code> adds the current process id to the file path provided.</li><li><code>&quot;fresh=true&quot;</code> smashes the content of the file if it already exists instead of appending to it.</li><li><code>&quot;chmod=&lt;INT&gt;&quot;</code> sets the access-rights of the file at creation time (default is <code>0o600</code>, provided <a href="https://en.wikipedia.org/wiki/Umask"><code>umask</code></a> allows it).</li></ul><p>Examples:</p><ul><li><code>&quot;export TEZOS_EVENTS_CONFIG=file-descriptor-path:///the/path/to/write.log?format=one-per-line&amp;level-at-least=notice&amp;with-pid=true&amp;chmod=0o640&quot;</code>: Executables will write all log events of level at least <code>Notice</code> to a file <code>&quot;/the/path/to/write-XXXX.log&quot;</code> where <code>&quot;XXXX&quot;</code> is the process ID, the file will be also readable by the user's group (<code>0o640</code>).</li><li><code>&quot;export TEZOS_EVENTS_CONFIG=file-descriptor-stderr://?format=netstring&quot;</code> Executables will write to <code>stderr</code>.</li><li><code>&quot;export TEZOS_EVENTS_CONFIG=file-descriptor-path:///dev/fd/4?format=netstring&quot;</code> Executables will write to the <code>4</code> file-descriptor likely opened by a parent monitoring process (non-standard feature available on mainstream UNIX hosts, e.g. Linux and MacOSX).</li></ul><ul><li><code>&quot;export TEZOS_NODE_HOSTNAME=hostname&quot;</code> The <code>hostname</code> will be used in the JSON representation of the event. By default, it is the hostname given by <code>Unix.gethostname ()</code>.</li></ul></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Sink_implementation_path" class="anchored"><a href="#module-Sink_implementation_path" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Sink_implementation_path/index.html">Sink_implementation_path</a></span><span> : <a href="../../../tezos-event-logging/Tezos_event_logging/Internal_event/module-type-SINK/index.html">Tezos_event_logging.Internal_event.SINK</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../tezos-event-logging/Tezos_event_logging/Internal_event/module-type-SINK/index.html#type-t">t</a> = <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Sink_implementation_stdout" class="anchored"><a href="#module-Sink_implementation_stdout" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Sink_implementation_stdout/index.html">Sink_implementation_stdout</a></span><span> : <a href="../../../tezos-event-logging/Tezos_event_logging/Internal_event/module-type-SINK/index.html">Tezos_event_logging.Internal_event.SINK</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../tezos-event-logging/Tezos_event_logging/Internal_event/module-type-SINK/index.html#type-t">t</a> = <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Sink_implementation_stderr" class="anchored"><a href="#module-Sink_implementation_stderr" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Sink_implementation_stderr/index.html">Sink_implementation_stderr</a></span><span> : <a href="../../../tezos-event-logging/Tezos_event_logging/Internal_event/module-type-SINK/index.html">Tezos_event_logging.Internal_event.SINK</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../tezos-event-logging/Tezos_event_logging/Internal_event/module-type-SINK/index.html#type-t">t</a> = <a href="#type-t">t</a></span></span></code></div></div></div></body></html>