<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tezos_shell_services__History_mode (tezos-shell-services.Tezos_shell_services__History_mode)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">tezos-shell-services</a> &#x00BB; Tezos_shell_services__History_mode</nav><h1>Module <code>Tezos_shell_services__History_mode</code></h1><p>History modes for the chain history storage</p><p>History modes allow a node to require less disk storage. Indeed, depending on the chosen history mode, some parts of the complete chain history can be deleted as they are not required anymore. Three history modes are provided:</p><ul><li>Full mode (default mode): The node stores the minimal data since the genesis required to reconstruct (or 'replay') the complete chain's ledger state.</li></ul><ul><li>Rolling mode: This is the lightest mode as it only maintains a minimal rolling fragment of the chain data so the node can still validate new blocks and synchronize with the head.</li></ul><ul><li>Archive: This is the heaviest mode as it keeps the whole chain data to be able to query any information stored on the chain since the genesis. It is particularly suitable for indexers or block explorers.</li></ul></header><dl><dt class="spec type" id="type-additional_cycles"><a href="#type-additional_cycles" class="anchor"></a><code><span class="keyword">type</span> additional_cycles</code><code> = </code><code>{</code><table class="record"><tr id="type-additional_cycles.offset" class="anchored"><td class="def field"><a href="#type-additional_cycles.offset" class="anchor"></a><code>offset : int;</code></td></tr></table><code>}</code></dt><dd><p>The type for defining the number of additional cycles to preserve.</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><table class="variant"><tr id="type-t.Archive" class="anchored"><td class="def constructor"><a href="#type-t.Archive" class="anchor"></a><code>| </code><code><span class="constructor">Archive</span></code></td></tr><tr id="type-t.Full" class="anchored"><td class="def constructor"><a href="#type-t.Full" class="anchor"></a><code>| </code><code><span class="constructor">Full</span> <span class="keyword">of</span> <a href="index.html#type-additional_cycles">additional_cycles</a></code></td></tr><tr id="type-t.Rolling" class="anchored"><td class="def constructor"><a href="#type-t.Rolling" class="anchor"></a><code>| </code><code><span class="constructor">Rolling</span> <span class="keyword">of</span> <a href="index.html#type-additional_cycles">additional_cycles</a></code></td></tr></table></dt><dd><p>The type for defining an history mode.</p></dd></dl><dl><dt class="spec value" id="val-default_offset"><a href="#val-default_offset" class="anchor"></a><code><span class="keyword">val</span> default_offset : int</code></dt><dd><p>The default value for the number of additional cycles to preserve.</p></dd></dl><dl><dt class="spec value" id="val-default_full"><a href="#val-default_full" class="anchor"></a><code><span class="keyword">val</span> default_full : <a href="index.html#type-t">t</a></code></dt><dd><p>The default full history mode value. Based on <code>default_offset</code>.</p></dd></dl><dl><dt class="spec value" id="val-default_rolling"><a href="#val-default_rolling" class="anchor"></a><code><span class="keyword">val</span> default_rolling : <a href="index.html#type-t">t</a></code></dt><dd><p>The default rolling history mode value. Based on <code>default_offset</code>.</p></dd></dl><dl><dt class="spec value" id="val-default"><a href="#val-default" class="anchor"></a><code><span class="keyword">val</span> default : <a href="index.html#type-t">t</a></code></dt><dd><p>The default history mode value.</p></dd></dl><dl><dt class="spec value" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span class="keyword">val</span> encoding : <span><a href="index.html#type-t">t</a> <a href="../../tezos-base/Tezos_base__TzPervasives/index.html#module-Data_encoding">Tezos_base__TzPervasives.Data_encoding</a>.t</span></code></dt><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-pp_short"><a href="#val-pp_short" class="anchor"></a><code><span class="keyword">val</span> pp_short : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-tag"><a href="#val-tag" class="anchor"></a><code><span class="keyword">val</span> tag : <span><a href="index.html#type-t">t</a> <a href="../../tezos-base/Tezos_base__TzPervasives/Tag/index.html#type-def">Tezos_base__TzPervasives.Tag.def</a></span></code></dt></dl><dl><dt class="spec module" id="module-Legacy"><a href="#module-Legacy" class="anchor"></a><code><span class="keyword">module</span> <a href="Legacy/index.html">Legacy</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The module for handling legacy history modes. It is only used for legacy support, see <span class="xref-unresolved" title="unresolved reference to &quot;Tezos_store.Legacy&quot;"><code>Tezos_store</code>.Legacy</span> and <span class="xref-unresolved" title="unresolved reference to &quot;Tezos_store.Snapshots&quot;"><code>Tezos_store</code>.Snapshots</span>.</p></dd></dl><dl><dt class="spec value" id="val-convert"><a href="#val-convert" class="anchor"></a><code><span class="keyword">val</span> convert : <a href="Legacy/index.html#type-t">Legacy.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>convert legacy</code> returns the history mode of a given <code>legacy</code> history mode, using the default offset values.</p></dd></dl></div></body></html>