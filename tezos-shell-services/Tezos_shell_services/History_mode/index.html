<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>History_mode (tezos-shell-services.Tezos_shell_services.History_mode)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-shell-services</a> &#x00BB; <a href="../index.html">Tezos_shell_services</a> &#x00BB; History_mode</nav><header class="odoc-preamble"><h1>Module <code><span>Tezos_shell_services.History_mode</span></code></h1><p>History modes for the chain history storage</p><p>History modes allow a node to require less disk storage. Indeed, depending on the chosen history mode, some parts of the complete chain history can be deleted as they are not required anymore. Three history modes are provided:</p><ul><li>Full mode (default mode): The node stores the minimal data since the genesis required to reconstruct (or 'replay') the complete chain's ledger state.</li></ul><ul><li>Rolling mode: This is the lightest mode as it only maintains a minimal rolling fragment of the chain data so the node can still validate new blocks and synchronize with the head.</li></ul><ul><li>Archive: This is the heaviest mode as it keeps the whole chain data to be able to query any information stored on the chain since the genesis. It is particularly suitable for indexers or block explorers.</li></ul></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-additional_cycles" class="anchored"><a href="#type-additional_cycles" class="anchor"></a><code><span><span class="keyword">type</span> additional_cycles</span><span> = </span><span>{</span></code><table><tr id="type-additional_cycles.offset" class="anchored"><td class="def record field"><a href="#type-additional_cycles.offset" class="anchor"></a><code><span>offset : int;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>The type for defining the number of additional cycles to preserve.</p></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span></code><table><tr id="type-t.Archive" class="anchored"><td class="def variant constructor"><a href="#type-t.Archive" class="anchor"></a><code><span>| </span><span><span class="constructor">Archive</span></span></code></td></tr><tr id="type-t.Full" class="anchored"><td class="def variant constructor"><a href="#type-t.Full" class="anchor"></a><code><span>| </span><span><span class="constructor">Full</span> <span class="keyword">of</span> <a href="#type-additional_cycles">additional_cycles</a></span></code></td></tr><tr id="type-t.Rolling" class="anchored"><td class="def variant constructor"><a href="#type-t.Rolling" class="anchor"></a><code><span>| </span><span><span class="constructor">Rolling</span> <span class="keyword">of</span> <a href="#type-additional_cycles">additional_cycles</a></span></code></td></tr></table></div><div class="spec-doc"><p>The type for defining an history mode.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_offset" class="anchored"><a href="#val-default_offset" class="anchor"></a><code><span><span class="keyword">val</span> default_offset : int</span></code></div><div class="spec-doc"><p>The default value for the number of additional cycles to preserve.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_full" class="anchored"><a href="#val-default_full" class="anchor"></a><code><span><span class="keyword">val</span> default_full : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The default full history mode value. Based on <code>default_offset</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_rolling" class="anchored"><a href="#val-default_rolling" class="anchor"></a><code><span><span class="keyword">val</span> default_rolling : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The default rolling history mode value. Based on <code>default_offset</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default" class="anchored"><a href="#val-default" class="anchor"></a><code><span><span class="keyword">val</span> default : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The default history mode value.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-encoding" class="anchored"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : <span><a href="#type-t">t</a> <span class="xref-unresolved">Tezos_base__TzPervasives</span>.Data_encoding.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pp" class="anchored"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_short" class="anchored"><a href="#val-pp_short" class="anchor"></a><code><span><span class="keyword">val</span> pp_short : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-tag" class="anchored"><a href="#val-tag" class="anchor"></a><code><span><span class="keyword">val</span> tag : <span><a href="#type-t">t</a> <a href="../../../tezos-stdlib/Tezos_stdlib/Tag/index.html#type-def">Tezos_stdlib.Tag.def</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Legacy" class="anchored"><a href="#module-Legacy" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="Legacy/index.html">Legacy</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The module for handling legacy history modes. It is only used for legacy support, see <code>Tezos_store</code>.Legacy and <code>Tezos_store</code>.Snapshots.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-convert" class="anchored"><a href="#val-convert" class="anchor"></a><code><span><span class="keyword">val</span> convert : <span><a href="Legacy/index.html#type-t">Legacy.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>convert legacy</code> returns the history mode of a given <code>legacy</code> history mode, using the default offset values.</p></div></div></div></body></html>