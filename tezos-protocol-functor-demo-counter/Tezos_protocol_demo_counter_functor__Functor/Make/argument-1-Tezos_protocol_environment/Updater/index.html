<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Updater (tezos-protocol-functor-demo-counter.Tezos_protocol_demo_counter_functor__Functor.Make.1-Tezos_protocol_environment.Updater)</title><link rel="stylesheet" href="../../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">tezos-protocol-functor-demo-counter</a> &#x00BB; <a href="../../../index.html">Tezos_protocol_demo_counter_functor__Functor</a> &#x00BB; <a href="../../index.html">Make</a> &#x00BB; <a href="../index.html">1-Tezos_protocol_environment</a> &#x00BB; Updater</nav><h1>Module <code>1-Tezos_protocol_environment.Updater</code></h1></header><aside><p>Tezos Protocol Environment - Protocol updater.</p></aside><dl><dt class="spec type" id="type-validation_result"><a href="#type-validation_result" class="anchor"></a><code><span class="keyword">type</span> validation_result</code><code> = </code><code>{</code><table class="record"><tr id="type-validation_result.context" class="anchored"><td class="def field"><a href="#type-validation_result.context" class="anchor"></a><code>context : <a href="../Context/index.html#type-t">Context.t</a>;</code></td><td class="doc"><p>The resulting context, it will be used for the next block.</p></td></tr><tr id="type-validation_result.fitness" class="anchored"><td class="def field"><a href="#type-validation_result.fitness" class="anchor"></a><code>fitness : <a href="../Fitness/index.html#type-t">Fitness.t</a>;</code></td><td class="doc"><p>The effective fitness of the block (to be compared with the 'announced' one in the block header.</p></td></tr><tr id="type-validation_result.message" class="anchored"><td class="def field"><a href="#type-validation_result.message" class="anchor"></a><code>message : <span>string option</span>;</code></td><td class="doc"><p>An optional informative message to be used as in the 'git commit' of the block's context.</p></td></tr><tr id="type-validation_result.max_operations_ttl" class="anchored"><td class="def field"><a href="#type-validation_result.max_operations_ttl" class="anchor"></a><code>max_operations_ttl : int;</code></td><td class="doc"><p>The &quot;time-to-live&quot; of operation for the next block: any operations whose 'branch' is older than 'ttl' blocks in the past cannot be included in the next block.</p></td></tr><tr id="type-validation_result.last_allowed_fork_level" class="anchored"><td class="def field"><a href="#type-validation_result.last_allowed_fork_level" class="anchor"></a><code>last_allowed_fork_level : <a href="../Int32/index.html#type-t">Int32.t</a>;</code></td><td class="doc"><p>The level of the last block for which the node might consider an alternate branch. The shell should consider as invalid any branch whose fork point is older than the given level</p></td></tr></table><code>}</code></dt><dd><p>Validation result: the record returned by the protocol on the successful validation of a block.</p></dd></dl><dl><dt class="spec type" id="type-quota"><a href="#type-quota" class="anchor"></a><code><span class="keyword">type</span> quota</code><code> = </code><code>{</code><table class="record"><tr id="type-quota.max_size" class="anchored"><td class="def field"><a href="#type-quota.max_size" class="anchor"></a><code>max_size : int;</code></td><td class="doc"><p>The maximum size (in bytes) of the serialized list of operations.</p></td></tr><tr id="type-quota.max_op" class="anchored"><td class="def field"><a href="#type-quota.max_op" class="anchor"></a><code>max_op : <span>int option</span>;</code></td><td class="doc"><p>The maximum number of operation. <code>None</code> means no limit.</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-rpc_context"><a href="#type-rpc_context" class="anchor"></a><code><span class="keyword">type</span> rpc_context</code><code> = </code><code>{</code><table class="record"><tr id="type-rpc_context.block_hash" class="anchored"><td class="def field"><a href="#type-rpc_context.block_hash" class="anchor"></a><code>block_hash : <a href="../Block_hash/index.html#type-t">Block_hash.t</a>;</code></td></tr><tr id="type-rpc_context.block_header" class="anchored"><td class="def field"><a href="#type-rpc_context.block_header" class="anchor"></a><code>block_header : <a href="../Block_header/index.html#type-shell_header">Block_header.shell_header</a>;</code></td></tr><tr id="type-rpc_context.context" class="anchored"><td class="def field"><a href="#type-rpc_context.context" class="anchor"></a><code>context : <a href="../Context/index.html#type-t">Context.t</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec module-type" id="module-type-PROTOCOL"><a href="#module-type-PROTOCOL" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-PROTOCOL/index.html">PROTOCOL</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>This is the signature of a Tezos protocol implementation. It has access to the standard library and the Environment module.</p></dd></dl><dl><dt class="spec value" id="val-activate"><a href="#val-activate" class="anchor"></a><code><span class="keyword">val</span> activate : <a href="../Context/index.html#type-t">Context.t</a> <span>&#45;&gt;</span> <a href="../Protocol_hash/index.html#type-t">Protocol_hash.t</a> <span>&#45;&gt;</span> <span><a href="../Context/index.html#type-t">Context.t</a> <a href="../Lwt/index.html#type-t">Lwt.t</a></span></code></dt><dd><p>Activates a given protocol version from a given context. This means that the context used for the next block will use this version (this is not an immediate change). The version must have been previously compiled successfully.</p></dd></dl><dl><dt class="spec value" id="val-fork_test_chain"><a href="#val-fork_test_chain" class="anchor"></a><code><span class="keyword">val</span> fork_test_chain : <a href="../Context/index.html#type-t">Context.t</a> <span>&#45;&gt;</span> <span>protocol:<a href="../Protocol_hash/index.html#type-t">Protocol_hash.t</a></span> <span>&#45;&gt;</span> <span>expiration:<a href="../Time/index.html#type-t">Time.t</a></span> <span>&#45;&gt;</span> <span><a href="../Context/index.html#type-t">Context.t</a> <a href="../Lwt/index.html#type-t">Lwt.t</a></span></code></dt><dd><p>Fork a test chain. The forked chain will use the current block as genesis, and <code>protocol</code> as economic protocol. The chain will be destroyed when a (successor) block will have a timestamp greater than <code>expiration</code>. The protocol must have been previously compiled successfully.</p></dd></dl></div></body></html>