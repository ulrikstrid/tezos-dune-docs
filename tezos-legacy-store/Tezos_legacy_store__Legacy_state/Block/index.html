<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Block (tezos-legacy-store.Tezos_legacy_store__Legacy_state.Block)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-legacy-store</a> &#x00BB; <a href="../index.html">Tezos_legacy_store__Legacy_state</a> &#x00BB; Block</nav><h1>Module <code>Tezos_legacy_store__Legacy_state.Block</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.chain_state" class="anchored"><td class="def field"><a href="#type-t.chain_state" class="anchor"></a><code>chain_state : <a href="../Chain/index.html#type-t">Chain.t</a>;</code></td></tr><tr id="type-t.hash" class="anchored"><td class="def field"><a href="#type-t.hash" class="anchor"></a><code>hash : <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a>;</code></td></tr><tr id="type-t.header" class="anchored"><td class="def field"><a href="#type-t.header" class="anchor"></a><code>header : <a href="../../../tezos-base/Tezos_base/Block_header/index.html#type-t">Tezos_base__TzPervasives.Block_header.t</a>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-block"><a href="#type-block" class="anchor"></a><code><span class="keyword">type</span> block</code><code> = <a href="index.html#type-t">t</a></code></dt></dl><dl><dt class="spec module" id="module-Header"><a href="#module-Header" class="anchor"></a><code><span class="keyword">module</span> <a href="Header/index.html">Header</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Abstract view over block header storage. This module aims to abstract over block header's <code>read</code>, <code>read_opt</code> and <code>known</code> functions by calling the adequate function depending on the block being pruned or not.</p></dd></dl><dl><dt class="spec value" id="val-known"><a href="#val-known" class="anchor"></a><code><span class="keyword">val</span> known : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> <span>&#45;&gt;</span> <span>bool Lwt.t</span></code></dt><dt class="spec value" id="val-known_valid"><a href="#val-known_valid" class="anchor"></a><code><span class="keyword">val</span> known_valid : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> <span>&#45;&gt;</span> <span>bool Lwt.t</span></code></dt><dt class="spec value" id="val-known_invalid"><a href="#val-known_invalid" class="anchor"></a><code><span class="keyword">val</span> known_invalid : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> <span>&#45;&gt;</span> <span>bool Lwt.t</span></code></dt><dt class="spec value" id="val-read_invalid"><a href="#val-read_invalid" class="anchor"></a><code><span class="keyword">val</span> read_invalid : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> <span>&#45;&gt;</span> <span><span><a href="../../Tezos_legacy_store/Legacy_store/Block/index.html#type-invalid_block">Tezos_legacy_store.Legacy_store.Block.invalid_block</a> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-list_invalid"><a href="#val-list_invalid" class="anchor"></a><code><span class="keyword">val</span> list_invalid : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <span><span><span>(<a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> * int32 * <span><a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-error">Tezos_base__TzPervasives.error</a> list</span>)</span> list</span> Lwt.t</span></code></dt><dt class="spec value" id="val-unmark_invalid"><a href="#val-unmark_invalid" class="anchor"></a><code><span class="keyword">val</span> unmark_invalid : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> <span>&#45;&gt;</span> <span><span>unit <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-read"><a href="#val-read" class="anchor"></a><code><span class="keyword">val</span> read : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> <span>&#45;&gt;</span> <span><span><a href="index.html#type-t">t</a> <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-read_contents_opt"><a href="#val-read_contents_opt" class="anchor"></a><code><span class="keyword">val</span> read_contents_opt : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../../Tezos_legacy_store/Legacy_store/Block/index.html#type-contents">Tezos_legacy_store.Legacy_store.Block.contents</a> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-read_opt"><a href="#val-read_opt" class="anchor"></a><code><span class="keyword">val</span> read_opt : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> <span>&#45;&gt;</span> <span><span><a href="index.html#type-t">t</a> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-read_predecessor"><a href="#val-read_predecessor" class="anchor"></a><code><span class="keyword">val</span> read_predecessor : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <span>pred:int</span> <span>&#45;&gt;</span> <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> <span>&#45;&gt;</span> <span><span><a href="index.html#type-t">t</a> option</span> Lwt.t</span></code></dt><dd><p>Will return the full block if the block has never been cleaned (all blocks for nodes whose history-mode is set to archive), only the header for nodes below the save point (nodes in full or rolling history-mode). Will fail with `Not_found` if the given hash is unknown.</p></dd></dl><dl><dt class="spec value" id="val-store"><a href="#val-store" class="anchor"></a><code><span class="keyword">val</span> store : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-base/Tezos_base/Block_header/index.html#type-t">Tezos_base__TzPervasives.Block_header.t</a> <span>&#45;&gt;</span> Stdlib.Bytes.t <span>&#45;&gt;</span> <span><span><a href="../../../tezos-base/Tezos_base/Operation/index.html#type-t">Tezos_base__TzPervasives.Operation.t</a> list</span> list</span> <span>&#45;&gt;</span> <span><span>Stdlib.Bytes.t list</span> list</span> <span>&#45;&gt;</span> <span><a href="../../../tezos-crypto/Tezos_crypto/Block_metadata_hash/index.html#type-t">Tezos_crypto.Block_metadata_hash.t</a> option</span> <span>&#45;&gt;</span> <span><span><span><a href="../../../tezos-crypto/Tezos_crypto/Operation_metadata_hash/index.html#type-t">Tezos_crypto.Operation_metadata_hash.t</a> list</span> list</span> option</span> <span>&#45;&gt;</span> <a href="../../../tezos-validation/Tezos_validation/Block_validation/index.html#type-validation_store">Tezos_validation.Block_validation.validation_store</a> <span>&#45;&gt;</span> <span>forking_testchain:bool</span> <span>&#45;&gt;</span> <span><span><span><a href="index.html#type-block">block</a> option</span> <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-store_invalid"><a href="#val-store_invalid" class="anchor"></a><code><span class="keyword">val</span> store_invalid : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-base/Tezos_base/Block_header/index.html#type-t">Tezos_base__TzPervasives.Block_header.t</a> <span>&#45;&gt;</span> <span><a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-error">Tezos_base__TzPervasives.error</a> list</span> <span>&#45;&gt;</span> <span><span>bool <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>unit <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dd><p><code>remove block</code> deletes every occurrence of <code>block</code> in the different stores. If <code>block</code> is the current head, the head is also backtracked to the <code>block</code> predecessor</p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-hash"><a href="#val-hash" class="anchor"></a><code><span class="keyword">val</span> hash : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a></code></dt><dt class="spec value" id="val-header"><a href="#val-header" class="anchor"></a><code><span class="keyword">val</span> header : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../tezos-base/Tezos_base/Block_header/index.html#type-t">Tezos_base__TzPervasives.Block_header.t</a></code></dt><dt class="spec value" id="val-header_of_hash"><a href="#val-header_of_hash" class="anchor"></a><code><span class="keyword">val</span> header_of_hash : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> <span>&#45;&gt;</span> <span><span><a href="../../../tezos-base/Tezos_base/Block_header/index.html#type-t">Tezos_base__TzPervasives.Block_header.t</a> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-shell_header"><a href="#val-shell_header" class="anchor"></a><code><span class="keyword">val</span> shell_header : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../tezos-base/Tezos_base/Block_header/index.html#type-shell_header">Tezos_base__TzPervasives.Block_header.shell_header</a></code></dt><dt class="spec value" id="val-timestamp"><a href="#val-timestamp" class="anchor"></a><code><span class="keyword">val</span> timestamp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../tezos-base/Tezos_base__Time/Protocol/index.html#type-t">Tezos_base__TzPervasives.Time.Protocol.t</a></code></dt><dt class="spec value" id="val-fitness"><a href="#val-fitness" class="anchor"></a><code><span class="keyword">val</span> fitness : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../tezos-base/Tezos_base/Fitness/index.html#type-t">Tezos_base__TzPervasives.Fitness.t</a></code></dt><dt class="spec value" id="val-validation_passes"><a href="#val-validation_passes" class="anchor"></a><code><span class="keyword">val</span> validation_passes : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-chain_id"><a href="#val-chain_id" class="anchor"></a><code><span class="keyword">val</span> chain_id : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../tezos-crypto/Tezos_crypto/Chain_id/index.html#type-t">Tezos_crypto.Chain_id.t</a></code></dt><dt class="spec value" id="val-chain_state"><a href="#val-chain_state" class="anchor"></a><code><span class="keyword">val</span> chain_state : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Chain/index.html#type-t">Chain.t</a></code></dt><dt class="spec value" id="val-level"><a href="#val-level" class="anchor"></a><code><span class="keyword">val</span> level : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Stdlib.Int32.t</code></dt><dt class="spec value" id="val-message"><a href="#val-message" class="anchor"></a><code><span class="keyword">val</span> message : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><span>string option</span> <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-max_operations_ttl"><a href="#val-max_operations_ttl" class="anchor"></a><code><span class="keyword">val</span> max_operations_ttl : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>int <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-metadata"><a href="#val-metadata" class="anchor"></a><code><span class="keyword">val</span> metadata : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>Stdlib.Bytes.t <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-last_allowed_fork_level"><a href="#val-last_allowed_fork_level" class="anchor"></a><code><span class="keyword">val</span> last_allowed_fork_level : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>Stdlib.Int32.t <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-is_genesis"><a href="#val-is_genesis" class="anchor"></a><code><span class="keyword">val</span> is_genesis : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-predecessor"><a href="#val-predecessor" class="anchor"></a><code><span class="keyword">val</span> predecessor : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="index.html#type-t">t</a> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-predecessor_n"><a href="#val-predecessor_n" class="anchor"></a><code><span class="keyword">val</span> predecessor_n : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span><a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-is_valid_for_checkpoint"><a href="#val-is_valid_for_checkpoint" class="anchor"></a><code><span class="keyword">val</span> is_valid_for_checkpoint : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../tezos-base/Tezos_base/Block_header/index.html#type-t">Tezos_base__TzPervasives.Block_header.t</a> <span>&#45;&gt;</span> <span>bool Lwt.t</span></code></dt><dt class="spec value" id="val-context"><a href="#val-context" class="anchor"></a><code><span class="keyword">val</span> context : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../../../tezos-context/Tezos_context/Context/index.html#type-t">Tezos_context.Context.t</a> <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-context_opt"><a href="#val-context_opt" class="anchor"></a><code><span class="keyword">val</span> context_opt : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../../../tezos-context/Tezos_context/Context/index.html#type-t">Tezos_context.Context.t</a> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-context_exn"><a href="#val-context_exn" class="anchor"></a><code><span class="keyword">val</span> context_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../../../tezos-context/Tezos_context/Context/index.html#type-t">Tezos_context.Context.t</a> Lwt.t</span></code></dt><dt class="spec value" id="val-context_exists"><a href="#val-context_exists" class="anchor"></a><code><span class="keyword">val</span> context_exists : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>bool Lwt.t</span></code></dt><dt class="spec value" id="val-protocol_hash"><a href="#val-protocol_hash" class="anchor"></a><code><span class="keyword">val</span> protocol_hash : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../../../tezos-crypto/Tezos_crypto/Protocol_hash/index.html#type-t">Tezos_crypto.Protocol_hash.t</a> <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-protocol_hash_exn"><a href="#val-protocol_hash_exn" class="anchor"></a><code><span class="keyword">val</span> protocol_hash_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../../../tezos-crypto/Tezos_crypto/Protocol_hash/index.html#type-t">Tezos_crypto.Protocol_hash.t</a> Lwt.t</span></code></dt><dt class="spec value" id="val-test_chain"><a href="#val-test_chain" class="anchor"></a><code><span class="keyword">val</span> test_chain : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<a href="../../../tezos-base/Tezos_base/Test_chain_status/index.html#type-t">Tezos_base__TzPervasives.Test_chain_status.t</a> * <span><a href="index.html#type-t">t</a> option</span>)</span> Lwt.t</span></code></dt><dt class="spec value" id="val-protocol_level"><a href="#val-protocol_level" class="anchor"></a><code><span class="keyword">val</span> protocol_level : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-operation_hashes"><a href="#val-operation_hashes" class="anchor"></a><code><span class="keyword">val</span> operation_hashes : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span>(<span><a href="../../../tezos-crypto/Tezos_crypto/Operation_hash/index.html#type-t">Tezos_crypto.Operation_hash.t</a> list</span> * <a href="../../../tezos-crypto/Tezos_crypto/Operation_list_list_hash/index.html#type-path">Tezos_crypto.Operation_list_list_hash.path</a>)</span> Lwt.t</span></code></dt><dt class="spec value" id="val-all_operation_hashes"><a href="#val-all_operation_hashes" class="anchor"></a><code><span class="keyword">val</span> all_operation_hashes : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><span><a href="../../../tezos-crypto/Tezos_crypto/Operation_hash/index.html#type-t">Tezos_crypto.Operation_hash.t</a> list</span> list</span> Lwt.t</span></code></dt><dt class="spec value" id="val-operations"><a href="#val-operations" class="anchor"></a><code><span class="keyword">val</span> operations : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span>(<span><a href="../../../tezos-base/Tezos_base/Operation/index.html#type-t">Tezos_base__TzPervasives.Operation.t</a> list</span> * <a href="../../../tezos-crypto/Tezos_crypto/Operation_list_list_hash/index.html#type-path">Tezos_crypto.Operation_list_list_hash.path</a>)</span> Lwt.t</span></code></dt><dt class="spec value" id="val-all_operations"><a href="#val-all_operations" class="anchor"></a><code><span class="keyword">val</span> all_operations : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><span><a href="../../../tezos-base/Tezos_base/Operation/index.html#type-t">Tezos_base__TzPervasives.Operation.t</a> list</span> list</span> Lwt.t</span></code></dt><dt class="spec value" id="val-operations_metadata"><a href="#val-operations_metadata" class="anchor"></a><code><span class="keyword">val</span> operations_metadata : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span>Stdlib.Bytes.t list</span> Lwt.t</span></code></dt><dt class="spec value" id="val-all_operations_metadata"><a href="#val-all_operations_metadata" class="anchor"></a><code><span class="keyword">val</span> all_operations_metadata : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><span>Stdlib.Bytes.t list</span> list</span> Lwt.t</span></code></dt><dt class="spec value" id="val-metadata_hash"><a href="#val-metadata_hash" class="anchor"></a><code><span class="keyword">val</span> metadata_hash : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../../../tezos-crypto/Tezos_crypto/Block_metadata_hash/index.html#type-t">Tezos_crypto.Block_metadata_hash.t</a> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-operations_metadata_hashes"><a href="#val-operations_metadata_hashes" class="anchor"></a><code><span class="keyword">val</span> operations_metadata_hashes : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span><span><span><a href="../../../tezos-crypto/Tezos_crypto/Operation_metadata_hash/index.html#type-t">Tezos_crypto.Operation_metadata_hash.t</a> list</span> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-all_operations_metadata_hashes"><a href="#val-all_operations_metadata_hashes" class="anchor"></a><code><span class="keyword">val</span> all_operations_metadata_hashes : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><span><span><a href="../../../tezos-crypto/Tezos_crypto/Operation_metadata_hash/index.html#type-t">Tezos_crypto.Operation_metadata_hash.t</a> list</span> list</span> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-all_operations_metadata_hash"><a href="#val-all_operations_metadata_hash" class="anchor"></a><code><span class="keyword">val</span> all_operations_metadata_hash : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../../../tezos-crypto/Tezos_crypto/Operation_metadata_list_list_hash/index.html#type-t">Tezos_crypto.Operation_metadata_list_list_hash.t</a> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-watcher"><a href="#val-watcher" class="anchor"></a><code><span class="keyword">val</span> watcher : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-block">block</a> Lwt_stream.t</span> * Lwt_watcher.stopper</code></dt><dt class="spec value" id="val-known_ancestor"><a href="#val-known_ancestor" class="anchor"></a><code><span class="keyword">val</span> known_ancestor : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-base/Tezos_base/Block_locator/index.html#type-t">Tezos_base__TzPervasives.Block_locator.t</a> <span>&#45;&gt;</span> <span><span><a href="../../../tezos-base/Tezos_base/Block_locator/index.html#type-t">Tezos_base__TzPervasives.Block_locator.t</a> option</span> Lwt.t</span></code></dt><dd><p><code>known_ancestor chain_state locator</code> computes the unknown prefix in the <code>locator</code> according to <code>chain_state</code>. It either returns:</p><ul><li><code>Some (h, hist)</code> when we find a valid block, where <code>hist</code> is the unknown prefix, ending with the first valid block found.</li><li><code>Some (h, hist)</code> when we don't find any block known valid nor invalid and the node runs in full or rolling mode. In this case <code>(h, hist)</code> is the given <code>locator</code>.</li><li><code>None</code> when the node runs in archive history mode and we find an invalid block or no valid block in the <code>locator</code>.</li><li><code>None</code> when the node runs in full or rolling mode and we find an invalid block in the <code>locator</code>.</li></ul></dd></dl><dl><dt class="spec value" id="val-get_rpc_directory"><a href="#val-get_rpc_directory" class="anchor"></a><code><span class="keyword">val</span> get_rpc_directory : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><span><a href="index.html#type-t">t</a> <a href="../../../tezos-rpc/Tezos_rpc/RPC_directory/index.html#type-t">Tezos_rpc.RPC_directory.t</a></span> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-set_rpc_directory"><a href="#val-set_rpc_directory" class="anchor"></a><code><span class="keyword">val</span> set_rpc_directory : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> <a href="../../../tezos-rpc/Tezos_rpc/RPC_directory/index.html#type-t">Tezos_rpc.RPC_directory.t</a></span> <span>&#45;&gt;</span> <span><span>unit <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dt class="spec value" id="val-get_header_rpc_directory"><a href="#val-get_header_rpc_directory" class="anchor"></a><code><span class="keyword">val</span> get_header_rpc_directory : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-base/Tezos_base/Block_header/index.html#type-t">Tezos_base__TzPervasives.Block_header.t</a> <span>&#45;&gt;</span> <span><span><span><span>(<a href="../Chain/index.html#type-t">Chain.t</a> * <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> * <a href="../../../tezos-base/Tezos_base/Block_header/index.html#type-t">Tezos_base__TzPervasives.Block_header.t</a>)</span> <a href="../../../tezos-rpc/Tezos_rpc/RPC_directory/index.html#type-t">Tezos_rpc.RPC_directory.t</a></span> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-set_header_rpc_directory"><a href="#val-set_header_rpc_directory" class="anchor"></a><code><span class="keyword">val</span> set_header_rpc_directory : <a href="../Chain/index.html#type-t">Chain.t</a> <span>&#45;&gt;</span> <a href="../../../tezos-base/Tezos_base/Block_header/index.html#type-t">Tezos_base__TzPervasives.Block_header.t</a> <span>&#45;&gt;</span> <span><span>(<a href="../Chain/index.html#type-t">Chain.t</a> * <a href="../../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> * <a href="../../../tezos-base/Tezos_base/Block_header/index.html#type-t">Tezos_base__TzPervasives.Block_header.t</a>)</span> <a href="../../../tezos-rpc/Tezos_rpc/RPC_directory/index.html#type-t">Tezos_rpc.RPC_directory.t</a></span> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt></dl></div></body></html>