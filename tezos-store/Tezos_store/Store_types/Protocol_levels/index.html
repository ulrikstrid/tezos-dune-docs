<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Protocol_levels (tezos-store.Tezos_store.Store_types.Protocol_levels)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">tezos-store</a> &#x00BB; <a href="../../index.html">Tezos_store</a> &#x00BB; <a href="../index.html">Store_types</a> &#x00BB; Protocol_levels</nav><h1>Module <code>Store_types.Protocol_levels</code></h1><p>Module <code>Protocol_levels</code> represents an associative map of protocol levels to corresponding blocks which supposedly activate new protocols, that is to say blocks that acknowledge a protocol change in the next block.</p></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../../../tezos-error-monad/Tezos_error_monad__TzLwtreslib/Map/index.html#module-type-S">Tezos_base__TzPervasives.Map.S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../../tezos-error-monad/Tezos_error_monad__TzLwtreslib/Map/module-type-S/index.html#type-key">key</a> = int</code></span></summary><dl><dt class="spec type" id="type-key"><a href="#type-key" class="anchor"></a><code><span class="keyword">type</span> key</code><code> = int</code></dt><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>+'a t</span></code></dt></dl><div class="spec module" id="module-Legacy"><a href="#module-Legacy" class="anchor"></a><code><span class="keyword">module</span> <a href="Legacy/index.html">Legacy</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span class="keyword">val</span> is_empty : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span class="keyword">val</span> mem : <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-update"><a href="#val-update" class="anchor"></a><code><span class="keyword">val</span> update : <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span>(<span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-singleton"><a href="#val-singleton" class="anchor"></a><code><span class="keyword">val</span> singleton : <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> option</span> <span>&#45;&gt;</span> <span><span class="type-var">'c</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'c</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-union"><a href="#val-union" class="anchor"></a><code><span class="keyword">val</span> union : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> int)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-iter_e"><a href="#val-iter_e" class="anchor"></a><code><span class="keyword">val</span> iter_e : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(unit, <span class="type-var">'trace</span>)</span> Stdlib.result</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(unit, <span class="type-var">'trace</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-iter_s"><a href="#val-iter_s" class="anchor"></a><code><span class="keyword">val</span> iter_s : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dt class="spec value" id="val-iter_p"><a href="#val-iter_p" class="anchor"></a><code><span class="keyword">val</span> iter_p : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dt class="spec value" id="val-iter_es"><a href="#val-iter_es" class="anchor"></a><code><span class="keyword">val</span> iter_es : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span>(unit, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span>(unit, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dt class="spec value" id="val-fold_e"><a href="#val-fold_e" class="anchor"></a><code><span class="keyword">val</span> fold_e : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-fold_s"><a href="#val-fold_s" class="anchor"></a><code><span class="keyword">val</span> fold_s : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span></code></dt><dt class="spec value" id="val-fold_es"><a href="#val-fold_es" class="anchor"></a><code><span class="keyword">val</span> fold_es : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-for_all"><a href="#val-for_all" class="anchor"></a><code><span class="keyword">val</span> for_all : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-exists"><a href="#val-exists" class="anchor"></a><code><span class="keyword">val</span> exists : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val</span> filter : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-partition"><a href="#val-partition" class="anchor"></a><code><span class="keyword">val</span> partition : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> * <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-cardinal"><a href="#val-cardinal" class="anchor"></a><code><span class="keyword">val</span> cardinal : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-bindings"><a href="#val-bindings" class="anchor"></a><code><span class="keyword">val</span> bindings : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-key">key</a> * <span class="type-var">'a</span>)</span> list</span></code></dt><dt class="spec value" id="val-min_binding"><a href="#val-min_binding" class="anchor"></a><code><span class="keyword">val</span> min_binding : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-key">key</a> * <span class="type-var">'a</span>)</span> option</span></code></dt><dt class="spec value" id="val-max_binding"><a href="#val-max_binding" class="anchor"></a><code><span class="keyword">val</span> max_binding : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-key">key</a> * <span class="type-var">'a</span>)</span> option</span></code></dt><dt class="spec value" id="val-choose"><a href="#val-choose" class="anchor"></a><code><span class="keyword">val</span> choose : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-key">key</a> * <span class="type-var">'a</span>)</span> option</span></code></dt><dt class="spec value" id="val-split"><a href="#val-split" class="anchor"></a><code><span class="keyword">val</span> split : <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> * <span><span class="type-var">'a</span> option</span> * <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> option</span></code></dt><dt class="spec value" id="val-find_first"><a href="#val-find_first" class="anchor"></a><code><span class="keyword">val</span> find_first : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-key">key</a> * <span class="type-var">'a</span>)</span> option</span></code></dt><dt class="spec value" id="val-find_last"><a href="#val-find_last" class="anchor"></a><code><span class="keyword">val</span> find_last : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-key">key</a> * <span class="type-var">'a</span>)</span> option</span></code></dt><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-mapi"><a href="#val-mapi" class="anchor"></a><code><span class="keyword">val</span> mapi : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-to_seq"><a href="#val-to_seq" class="anchor"></a><code><span class="keyword">val</span> to_seq : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-key">key</a> * <span class="type-var">'a</span>)</span> Stdlib.Seq.t</span></code></dt><dt class="spec value" id="val-to_seq_from"><a href="#val-to_seq_from" class="anchor"></a><code><span class="keyword">val</span> to_seq_from : <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-key">key</a> * <span class="type-var">'a</span>)</span> Stdlib.Seq.t</span></code></dt><dt class="spec value" id="val-add_seq"><a href="#val-add_seq" class="anchor"></a><code><span class="keyword">val</span> add_seq : <span><span>(<a href="index.html#type-key">key</a> * <span class="type-var">'a</span>)</span> Stdlib.Seq.t</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-of_seq"><a href="#val-of_seq" class="anchor"></a><code><span class="keyword">val</span> of_seq : <span><span>(<a href="index.html#type-key">key</a> * <span class="type-var">'a</span>)</span> Stdlib.Seq.t</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dt class="spec value" id="val-iter_ep"><a href="#val-iter_ep" class="anchor"></a><code><span class="keyword">val</span> iter_ep : <span>(<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span>(unit, <span><span class="type-var">'error</span> <a href="../../../../tezos-error-monad/Tezos_error_monad/TzTrace/index.html#type-trace">Tezos_error_monad.TzTrace.trace</a></span>)</span> Stdlib.result</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span>(unit, <span><span class="type-var">'error</span> <a href="../../../../tezos-error-monad/Tezos_error_monad/TzTrace/index.html#type-trace">Tezos_error_monad.TzTrace.trace</a></span>)</span> Stdlib.result</span> Lwt.t</span></code></dt></dl></details></div></div></div><dl><dt class="spec type" id="type-commit_info"><a href="#type-commit_info" class="anchor"></a><code><span class="keyword">type</span> commit_info</code><code> = </code><code>{</code><table class="record"><tr id="type-commit_info.author" class="anchored"><td class="def field"><a href="#type-commit_info.author" class="anchor"></a><code>author : string;</code></td></tr><tr id="type-commit_info.message" class="anchored"><td class="def field"><a href="#type-commit_info.message" class="anchor"></a><code>message : string;</code></td></tr><tr id="type-commit_info.test_chain_status" class="anchored"><td class="def field"><a href="#type-commit_info.test_chain_status" class="anchor"></a><code>test_chain_status : <a href="../../../../tezos-base/Tezos_base/Test_chain_status/index.html#type-t">Tezos_base__TzPervasives.Test_chain_status.t</a>;</code></td></tr><tr id="type-commit_info.predecessor_block_metadata_hash" class="anchored"><td class="def field"><a href="#type-commit_info.predecessor_block_metadata_hash" class="anchor"></a><code>predecessor_block_metadata_hash : <span><a href="../../../../tezos-crypto/Tezos_crypto/Block_metadata_hash/index.html#type-t">Tezos_crypto.Block_metadata_hash.t</a> option</span>;</code></td></tr><tr id="type-commit_info.predecessor_ops_metadata_hash" class="anchored"><td class="def field"><a href="#type-commit_info.predecessor_ops_metadata_hash" class="anchor"></a><code>predecessor_ops_metadata_hash : <span><a href="../../../../tezos-crypto/Tezos_crypto/Operation_metadata_list_list_hash/index.html#type-t">Tezos_crypto.Operation_metadata_list_list_hash.t</a> option</span>;</code></td></tr><tr id="type-commit_info.data_merkle_root" class="anchored"><td class="def field"><a href="#type-commit_info.data_merkle_root" class="anchor"></a><code>data_merkle_root : <a href="../../../../tezos-crypto/Tezos_crypto/Context_hash/index.html#type-t">Tezos_crypto.Context_hash.t</a>;</code></td></tr><tr id="type-commit_info.parents_contexts" class="anchored"><td class="def field"><a href="#type-commit_info.parents_contexts" class="anchor"></a><code>parents_contexts : <span><a href="../../../../tezos-crypto/Tezos_crypto/Context_hash/index.html#type-t">Tezos_crypto.Context_hash.t</a> list</span>;</code></td></tr></table><code>}</code></dt><dd><p>The type representing a subset of the commit information. These are used to easily check that a given <code>Context_hash.t</code>, with the associated context not present on disk, is consistent. It is used to verify that an announced protocol is indeed the one that was committed on disk. Fields are:</p><ul><li><code>author</code> is the commit's author;</li><li><code>message</code> is the commit's message;</li><li><code>test_chain_status</code> is the status of the test chain at commit time;</li><li><code>data_merkle_root</code> is the merkle root of the context's data main node;</li><li><code>parents_contexts</code> are the context hashes of this commit's parents.</li></ul><p>This structure should be populated with the result of <a href="../../../../tezos-context/Tezos_context/Context/index.html#val-retrieve_commit_info"><code>Tezos_context.Context.retrieve_commit_info</code></a>. The consistency check is done by <a href="../../../../tezos-context/Tezos_context/Context/index.html#val-check_protocol_commit_consistency"><code>Tezos_context.Context.check_protocol_commit_consistency</code></a> when a context in imported in the leger state, for example, when importing a snapshot.</p></dd></dl><dl><dt class="spec value" id="val-commit_info_of_tuple"><a href="#val-commit_info_of_tuple" class="anchor"></a><code><span class="keyword">val</span> commit_info_of_tuple : <span>(<a href="../../../../tezos-crypto/Tezos_crypto/Protocol_hash/index.html#type-t">Tezos_crypto.Protocol_hash.t</a> * string * string * <a href="../../../../tezos-base/Tezos_base__Time/Protocol/index.html#type-t">Tezos_base__TzPervasives.Time.Protocol.t</a> * <a href="../../../../tezos-base/Tezos_base/Test_chain_status/index.html#type-t">Tezos_base__TzPervasives.Test_chain_status.t</a> * <a href="../../../../tezos-crypto/Tezos_crypto/Context_hash/index.html#type-t">Tezos_crypto.Context_hash.t</a> * <span><a href="../../../../tezos-crypto/Tezos_crypto/Block_metadata_hash/index.html#type-t">Tezos_crypto.Block_metadata_hash.t</a> option</span> * <span><a href="../../../../tezos-crypto/Tezos_crypto/Operation_metadata_list_list_hash/index.html#type-t">Tezos_crypto.Operation_metadata_list_list_hash.t</a> option</span> * <span><a href="../../../../tezos-crypto/Tezos_crypto/Context_hash/index.html#type-t">Tezos_crypto.Context_hash.t</a> list</span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-commit_info">commit_info</a></code></dt><dt class="spec value" id="val-commit_info_encoding"><a href="#val-commit_info_encoding" class="anchor"></a><code><span class="keyword">val</span> commit_info_encoding : <span><a href="index.html#type-commit_info">commit_info</a> <a href="../../../../tezos-base/Tezos_base__TzPervasives/index.html#module-Data_encoding">Tezos_base__TzPervasives.Data_encoding</a>.t</span></code></dt><dd><p>Encoding for <a href="index.html#type-commit_info"><code>commit_info</code></a>.</p></dd></dl><dl><dt class="spec type" id="type-activation_block"><a href="#type-activation_block" class="anchor"></a><code><span class="keyword">type</span> activation_block</code><code> = </code><code>{</code><table class="record"><tr id="type-activation_block.block" class="anchored"><td class="def field"><a href="#type-activation_block.block" class="anchor"></a><code>block : <a href="../index.html#type-block_descriptor">block_descriptor</a>;</code></td></tr><tr id="type-activation_block.protocol" class="anchored"><td class="def field"><a href="#type-activation_block.protocol" class="anchor"></a><code>protocol : <a href="../../../../tezos-crypto/Tezos_crypto/Protocol_hash/index.html#type-t">Tezos_crypto.Protocol_hash.t</a>;</code></td></tr><tr id="type-activation_block.commit_info" class="anchored"><td class="def field"><a href="#type-activation_block.commit_info" class="anchor"></a><code>commit_info : <span><a href="index.html#type-commit_info">commit_info</a> option</span>;</code></td></tr></table><code>}</code></dt><dd><p>The type for activation blocks.</p><p>An activation block refers to a block which activated a new protocol <code>N+1</code>. Thus, the block header related to that activation block will have a protocol level which differs from its predecessor. As this block aims to activate a new protocol, the <code>next_protocol</code> and <code>protocol</code> fields from the metadata differs: <code>next_protocol</code> refers to the hash of the activated protocol. As a consequence, this block handled by protocol <code>N</code> and is the last block of that protocol.</p><p><b>WARNING.</b> Commit information are optional to allow retro-compatibility: the LMDB legacy store does not contain such information. Thus, populating the protocol levels' map while upgrading the storage would prevent us from storing an activation block which is used to retrieve the <code>protocol</code> to load, and therefore, being unable to decode stored blocks. In the future, when a sufficient number of nodes have fully migrated, we can stitch the missing commit information by hard-coding them, allowing us to remove the option.</p></dd></dl><dl><dt class="spec value" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span class="keyword">val</span> encoding : <span><span><a href="index.html#type-activation_block">activation_block</a> <a href="index.html#type-t">t</a></span> <a href="../../../../tezos-base/Tezos_base__TzPervasives/index.html#module-Data_encoding">Tezos_base__TzPervasives.Data_encoding</a>.t</span></code></dt><dd><p>Encoding for the protocol level's association map.</p></dd></dl></div></body></html>