<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tezt__Regression (tezt.Tezt__Regression)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">tezt</a> &#x00BB; Tezt__Regression</nav><h1>Module <code>Tezt__Regression</code></h1><p>Run Tezt regression tests and capture their output.</p><p>NOTE: consider using dune cram when it becomes available: https://dune.readthedocs.io/en/stable/tests.html#cram-tests</p></header><dl><dt class="spec value" id="val-register"><a href="#val-register" class="anchor"></a><code><span class="keyword">val</span> register : <span>__FILE__:string</span> <span>&#45;&gt;</span> <span>title:string</span> <span>&#45;&gt;</span> <span>tags:<span>string list</span></span> <span>&#45;&gt;</span> <span>output_file:string</span> <span>&#45;&gt;</span> <span>?&#8288;regression_output_path:string</span> <span>&#45;&gt;</span> <span>(unit <span>&#45;&gt;</span> <span>unit Lwt.t</span>)</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Register a regression test.</p><p>This function is a wrapper around <code>Test.register</code>. It adds the &quot;regression&quot; tag to the <code>tags</code> list provided by the argument.</p><p>The <code>output_file</code> is a filename, where the output of the test is stored and read to be compared on subsequent runs. The output file with &quot;.out&quot; filename extension added is placed in the <code>regression_output_path</code>, which is by default &quot;tezt/_regressions&quot;.</p></dd></dl><dl><dt class="spec value" id="val-capture"><a href="#val-capture" class="anchor"></a><code><span class="keyword">val</span> capture : string <span>&#45;&gt;</span> unit</code></dt><dd><p>Capture some output of a regression test.</p><p>Call this to record a string into the <code>output_file</code> given to <code>register</code>. A newline character <code>\n</code> will be added after it.</p><p>This function only records its argument when called while a regression test is running, i.e. from the body of <code>Regression.register</code>. If you call it outside of <code>Regression.register</code>, it has no effect. So you can define a function that captures and use it with or without regression testing.</p><p>A typical use is to define custom process hooks that substitute non-deterministic parts of the output with deterministic ones. See also <a href="index.html#val-hooks"><code>hooks</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-hooks"><a href="#val-hooks" class="anchor"></a><code><span class="keyword">val</span> hooks : <a href="../Tezt/Process/index.html#type-hooks">Tezt.Process.hooks</a></code></dt><dd><p>Hooks that enable regression testing when attached to a process ran from a <a href="index.html#val-register"><code>register</code></a>ed regression test function.</p><p>The hooks will <a href="index.html#val-capture"><code>capture</code></a> the spawned command, its arguments and the output of its execution into the registered <code>output_file</code>.</p></dd></dl></div></body></html>