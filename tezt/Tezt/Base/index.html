<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Base (tezt.Tezt.Base)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">tezt</a> &#x00BB; <a href="../index.html">Tezt</a> &#x00BB; Base</nav><header class="odoc-preamble"><h1>Module <code><span>Tezt.Base</span></code></h1><p>Base functions.</p></header><nav class="odoc-toc"><ul><li><a href="#strings">Strings</a></li><li><a href="#concurrency-monad">Concurrency Monad</a></li><li><a href="#lists">Lists</a></li><li><a href="#regular-expressions">Regular Expressions</a></li><li><a href="#promises">Promises</a></li><li><a href="#input/output">Input/Output</a></li><li><a href="#common-structures">Common structures</a></li></ul></nav><div class="odoc-content"><h3 id="strings"><a href="#strings" class="anchor"></a>Strings</h3><div class="odoc-spec"><div class="spec value" id="val-(//)" class="anchored"><a href="#val-(//)" class="anchor"></a><code><span><span class="keyword">val</span> (//) : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Same as <code>Filename.concat</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-sf" class="anchored"><a href="#val-sf" class="anchor"></a><code><span><span class="keyword">val</span> sf : <span><span><span>(<span class="type-var">'a</span>, unit, string)</span> <span class="xref-unresolved">Stdlib</span>.format</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Same as <code>Printf.sprintf</code>.</p></div></div><h3 id="concurrency-monad"><a href="#concurrency-monad" class="anchor"></a>Concurrency Monad</h3><div class="odoc-spec"><div class="spec value" id="val-let*" class="anchored"><a href="#val-let*" class="anchor"></a><code><span><span class="keyword">val</span> let* : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Same as <code>Lwt.bind</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-and*" class="anchored"><a href="#val-and*" class="anchor"></a><code><span><span class="keyword">val</span> and* : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <span class="xref-unresolved">Lwt</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Same as <code>Lwt.both</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-return" class="anchored"><a href="#val-return" class="anchor"></a><code><span><span class="keyword">val</span> return : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Same as <code>Lwt.return</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unit" class="anchored"><a href="#val-unit" class="anchor"></a><code><span><span class="keyword">val</span> unit : <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Same as <code>Lwt.return_unit</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-none" class="anchored"><a href="#val-none" class="anchor"></a><code><span><span class="keyword">val</span> none : <span><span><span class="type-var">'a</span> option</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Same as <code>Lwt.return_none</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-some" class="anchored"><a href="#val-some" class="anchor"></a><code><span><span class="keyword">val</span> some : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Same as <code>Lwt.return_some</code>.</p></div></div><h3 id="lists"><a href="#lists" class="anchor"></a>Lists</h3><div class="odoc-spec"><div class="spec value" id="val-range" class="anchored"><a href="#val-range" class="anchor"></a><code><span><span class="keyword">val</span> range : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p>Make a list of all integers between two integers.</p><p>If the first argument is greater than the second argument, return the empty list.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-list_find_map" class="anchored"><a href="#val-list_find_map" class="anchor"></a><code><span><span class="keyword">val</span> list_find_map : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span></span></code></div><div class="spec-doc"><p>Backport of <code>List.find_map</code> from OCaml 4.10.</p></div></div><h3 id="regular-expressions"><a href="#regular-expressions" class="anchor"></a>Regular Expressions</h3><div class="odoc-spec"><div class="spec type" id="type-rex" class="anchored"><a href="#type-rex" class="anchor"></a><code><span><span class="keyword">type</span> rex</span></code></div><div class="spec-doc"><p>Compiled regular expressions.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rex" class="anchored"><a href="#val-rex" class="anchor"></a><code><span><span class="keyword">val</span> rex : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-rex">rex</a></span></code></div><div class="spec-doc"><p>Compile a regular expression using Perl syntax.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-show_rex" class="anchored"><a href="#val-show_rex" class="anchor"></a><code><span><span class="keyword">val</span> show_rex : <span><a href="#type-rex">rex</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Convert a regular expression to a string using Perl syntax.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-(=~)" class="anchored"><a href="#val-(=~)" class="anchor"></a><code><span><span class="keyword">val</span> (=~) : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-rex">rex</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Test whether a string matches a regular expression.</p><p>Example: <code>&quot;number 1234 matches&quot; =~ rex &quot;\\d+&quot;</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-(=~!)" class="anchored"><a href="#val-(=~!)" class="anchor"></a><code><span><span class="keyword">val</span> (=~!) : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-rex">rex</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Negation of <code>=~</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-(=~*)" class="anchored"><a href="#val-(=~*)" class="anchor"></a><code><span><span class="keyword">val</span> (=~*) : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-rex">rex</a> <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p>Match a regular expression with one capture group.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-(=~**)" class="anchored"><a href="#val-(=~**)" class="anchor"></a><code><span><span class="keyword">val</span> (=~**) : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-rex">rex</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(string * string)</span> option</span></span></code></div><div class="spec-doc"><p>Match a regular expression with two capture groups.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-replace_string" class="anchored"><a href="#val-replace_string" class="anchor"></a><code><span><span class="keyword">val</span> replace_string : <span>?pos:int <span class="arrow">&#45;&gt;</span></span> <span>?len:int <span class="arrow">&#45;&gt;</span></span> <span>?all:bool <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-rex">rex</a> <span class="arrow">&#45;&gt;</span></span> <span>by:string <span class="arrow">&#45;&gt;</span></span>
<span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>replace_string ~all rex ~by s</code> iterates on <code>s</code>, and replaces every occurrence of <code>rex</code> with <code>by</code>. If <code>all = false</code>, then only the first occurrence of <code>rex</code> is replaced.</p></div></div><h3 id="promises"><a href="#promises" class="anchor"></a>Promises</h3><div class="odoc-spec"><div class="spec value" id="val-repeat" class="anchored"><a href="#val-repeat" class="anchor"></a><code><span><span class="keyword">val</span> repeat : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p>Repeat something a given amount of times.</p></div></div><h3 id="input/output"><a href="#input/output" class="anchor"></a>Input/Output</h3><div class="odoc-spec"><div class="spec value" id="val-with_open_out" class="anchored"><a href="#val-with_open_out" class="anchor"></a><code><span><span class="keyword">val</span> with_open_out : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="xref-unresolved">Stdlib</span>.out_channel <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Open file, use function to write output then close the output. In case of error while writing, the channel is closed before raising the exception</p></div></div><div class="odoc-spec"><div class="spec value" id="val-with_open_in" class="anchored"><a href="#val-with_open_in" class="anchor"></a><code><span><span class="keyword">val</span> with_open_in : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="xref-unresolved">Stdlib</span>.in_channel <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Open file, use function to read input then close the input. In case of error while reading, the channel is closed before raising the exception *</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_file" class="anchored"><a href="#val-read_file" class="anchor"></a><code><span><span class="keyword">val</span> read_file : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>read_file filename</code> returns the full contents of file <code>filename</code></p></div></div><h3 id="common-structures"><a href="#common-structures" class="anchor"></a>Common structures</h3><div class="odoc-spec"><div class="spec module" id="module-String_map" class="anchored"><a href="#module-String_map" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>String_map</span><span> : <span class="xref-unresolved">Stdlib</span>.Map.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">key</span> = <span class="xref-unresolved">string</span></span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-String_set" class="anchored"><a href="#module-String_set" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>String_set</span><span> : <span class="xref-unresolved">Stdlib</span>.Set.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">elt</span> = <span class="xref-unresolved">string</span></span></span></code></div></div></div></body></html>