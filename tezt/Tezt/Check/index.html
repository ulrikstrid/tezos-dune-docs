<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Check (tezt.Tezt.Check)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezt</a> &#x00BB; <a href="../index.html">Tezt</a> &#x00BB; Check</nav><header class="odoc-preamble"><h1>Module <code><span>Tezt.Check</span></code></h1><p>Assertions.</p><p>This module defines predicates that call <code>Test.fail</code> when they do not hold. Using these predicates gives you more consistent error messages.</p></header><nav class="odoc-toc"><ul><li><a href="#comparable-types">Comparable Types</a></li><li><a href="#predicates">Predicates</a></li></ul></nav><div class="odoc-content"><h3 id="comparable-types"><a href="#comparable-types" class="anchor"></a>Comparable Types</h3><div class="odoc-spec"><div class="spec type" id="type-typ" class="anchored"><a href="#type-typ" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a typ</span></span></code></div><div class="spec-doc"><p>Type descriptions.</p><p>A <code>t typ</code> equips a type <code>t</code> with a pretty printer, and either an equality or a comparison function.</p><p>All types can be used with <code>eq</code> and <code>neq</code>, but some types will result in an exception when used with <code>lt</code>, <code>le</code>, <code>gt</code> and <code>ge</code>. Such types are said to be non comparable.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unit" class="anchored"><a href="#val-unit" class="anchor"></a><code><span><span class="keyword">val</span> unit : <span>unit <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The unit type.</p><p>Not very useful on its own, but may be useful inside more structured types.</p><p>This type is comparable.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-bool" class="anchored"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span>bool <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The boolean type.</p><p>Not very useful on its own since one can write <code>if not b then Test.fail ...</code>, but may be useful inside more structured types.</p><p>This type is comparable with <code>true &gt; false</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-char" class="anchored"><a href="#val-char" class="anchor"></a><code><span><span class="keyword">val</span> char : <span>char <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The character type.</p><p>This type is comparable. Characters are compared by comparing their byte representation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int" class="anchored"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span>int <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The integer type.</p><p>This type is comparable.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int32" class="anchored"><a href="#val-int32" class="anchor"></a><code><span><span class="keyword">val</span> int32 : <span>int32 <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The 32-bit integer type.</p><p>This type is comparable.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-int64" class="anchored"><a href="#val-int64" class="anchor"></a><code><span><span class="keyword">val</span> int64 : <span>int64 <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The 64-bit integer type.</p><p>This type is comparable.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-float" class="anchored"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : <span>float <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The float type.</p><p>Note that testing float equality or inequality is often a bad idea. Prefer <code>float_epsilon</code> when it makes sense.</p><p>This type is comparable.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-float_epsilon" class="anchored"><a href="#val-float_epsilon" class="anchor"></a><code><span><span class="keyword">val</span> float_epsilon : <span>float <span class="arrow">&#45;&gt;</span></span> <span>float <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The float type with an approximative equality function.</p><p>The argument is how much of a difference can two values have and still be considered equal.</p><p>This type is comparable.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-string" class="anchored"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span>string <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>The string type.</p><p>This type is comparable in lexicographic order, where each character is compared using the same comparison function as <code>char</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-option" class="anchored"><a href="#val-option" class="anchor"></a><code><span><span class="keyword">val</span> option : <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> option</span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Make an option type.</p><p>If the item type is comparable, the result is comparable. <code>None</code> is always lesser than <code>Some _</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-list" class="anchored"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Make a list type.</p><p>If the item type is comparable, the result is comparable in lexicographic order.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-array" class="anchored"><a href="#val-array" class="anchor"></a><code><span><span class="keyword">val</span> array : <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> array</span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Make an array type.</p><p>If the item type is comparable, the result is comparable in lexicographic order.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-tuple2" class="anchored"><a href="#val-tuple2" class="anchor"></a><code><span><span class="keyword">val</span> tuple2 : <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Make a 2-tuple type.</p><p>If both item types are comparable, the result is comparable in lexicographic order.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-tuple3" class="anchored"><a href="#val-tuple3" class="anchor"></a><code><span><span class="keyword">val</span> tuple3 : <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Make a 3-tuple type.</p><p>If all item types are comparable, the result is comparable in lexicographic order.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-tuple4" class="anchored"><a href="#val-tuple4" class="anchor"></a><code><span><span class="keyword">val</span> tuple4 : <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'d</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span>)</span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Make a 4-tuple type.</p><p>If all item types are comparable, the result is comparable in lexicographic order.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-convert" class="anchored"><a href="#val-convert" class="anchor"></a><code><span><span class="keyword">val</span> convert : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Make a type by encoding to another.</p><p>Usage: <code>convert encode typ</code></p><p>Example: <code>convert (fun { x; y } -&gt; x, y) (tuple2 int string)</code></p><p>Values are converted to <code>typ</code> using <code>encode</code> before being pretty-printed or compared. The result type is comparable if <code>typ</code> is comparable.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-equalable" class="anchored"><a href="#val-equalable" class="anchor"></a><code><span><span class="keyword">val</span> equalable : <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Make a custom type from a pretty-printer and an equality function.</p><p>The result is not comparable.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-comparable" class="anchored"><a href="#val-comparable" class="anchor"></a><code><span><span class="keyword">val</span> comparable : <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Make a custom type from a pretty-printer and a comparison function.</p></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-EQUALABLE" class="anchored"><a href="#module-type-EQUALABLE" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-EQUALABLE/index.html">EQUALABLE</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-equalable_module" class="anchored"><a href="#val-equalable_module" class="anchor"></a><code><span><span class="keyword">val</span> equalable_module : <span><span>(<span class="keyword">module</span> <a href="module-type-EQUALABLE/index.html">EQUALABLE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-EQUALABLE/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-equalable"><code>equalable</code></a> but takes a module.</p><p>Example: <code>equalable_module (module String)</code>.</p></div></div><div class="odoc-spec"><div class="spec module-type" id="module-type-COMPARABLE" class="anchored"><a href="#module-type-COMPARABLE" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-COMPARABLE/index.html">COMPARABLE</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-comparable_module" class="anchored"><a href="#val-comparable_module" class="anchor"></a><code><span><span class="keyword">val</span> comparable_module : <span><span>(<span class="keyword">module</span> <a href="module-type-COMPARABLE/index.html">COMPARABLE</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-COMPARABLE/index.html#type-t">t</a> = <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span></span></code></div><div class="spec-doc"><p>Same as <a href="#val-comparable"><code>comparable</code></a> but takes a module.</p><p>Example: <code>comparable_module (module String)</code>.</p></div></div><h3 id="predicates"><a href="#predicates" class="anchor"></a>Predicates</h3><p>For all functions of this section, if the test fails, the function calls <code>Test.fail</code> with the error message given in <code>~error_msg</code>. This <code>~error_msg</code> may contain placeholders <code>%L</code> and <code>%R</code> where:</p><ul><li><code>%L</code> is replaced by the left-hand side value of the operator;</li><li><code>%R</code> is replaced by the right-hand side value of the operator.</li></ul><p>Here are some examples of <code>~error_msg</code> for inspiration:</p><ul><li><code>&quot;expected filename = %R, got %L&quot;</code></li><li><code>&quot;expected list size &gt;= %R, got %L&quot;</code></li><li><code>&quot;expected f to be monotonous, got f x = %L and f y = %R with x &lt; y&quot;</code></li></ul><div class="odoc-spec"><div class="spec value" id="val-(=)" class="anchored"><a href="#val-(=)" class="anchor"></a><code><span><span class="keyword">val</span> (=) : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span>error_msg:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that a value is equal to another.</p><p>Example: <code>Check.((value = expected) int ~error_msg:&quot;expected value = %R, got %L&quot;)</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;&gt;)" class="anchored"><a href="#val-(&lt;&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;&gt;) : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span>error_msg:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that a value is not equal to another.</p><p>Example: <code>Check.((value &lt;&gt; wrong) int ~error_msg:&quot;expected value &lt;&gt; %R&quot;)</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;)" class="anchored"><a href="#val-(&lt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;) : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span>error_msg:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that a value is less than another.</p><p>Example: <code>Check.((value &lt; threshold) int ~error_msg:&quot;expected value &lt; %R, got %L&quot;)</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;=)" class="anchored"><a href="#val-(&lt;=)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;=) : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span>error_msg:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that a value is less than or equal to another.</p><p>Example: <code>Check.((value &lt;= threshold) int ~error_msg:&quot;expected value &lt;= %R, got %L&quot;)</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-(&gt;)" class="anchored"><a href="#val-(&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;) : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span>error_msg:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that a value is greater than another.</p><p>Example: <code>Check.((value &gt; threshold) int ~error_msg:&quot;expected value &gt; %R, got %L&quot;)</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-(&gt;=)" class="anchored"><a href="#val-(&gt;=)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;=) : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-typ">typ</a></span> <span class="arrow">&#45;&gt;</span></span> <span>error_msg:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that a value is greater than or equal to another.</p><p>Example: <code>Check.((value &gt;= threshold) int ~error_msg:&quot;expected value &gt;= %R, got %L&quot;)</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-(=~)" class="anchored"><a href="#val-(=~)" class="anchor"></a><code><span><span class="keyword">val</span> (=~) : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Base/index.html#type-rex">Base.rex</a> <span class="arrow">&#45;&gt;</span></span> <span>error_msg:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that a string matches a regular expression.</p><p>Example: <code>Check.((value =~ rex) int ~error_msg:&quot;expected value =~ %R, got %L&quot;)</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-(=~!)" class="anchored"><a href="#val-(=~!)" class="anchor"></a><code><span><span class="keyword">val</span> (=~!) : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Base/index.html#type-rex">Base.rex</a> <span class="arrow">&#45;&gt;</span></span> <span>error_msg:string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Check that a string does not match a regular expression.</p><p>Example: <code>Check.((value =~! rex) int ~error_msg:&quot;expected value =~! %R, got %L&quot;)</code></p></div></div></div></body></html>