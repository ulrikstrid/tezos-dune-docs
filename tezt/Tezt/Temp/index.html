<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Temp (tezt.Tezt.Temp)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezt</a> &#x00BB; <a href="../index.html">Tezt</a> &#x00BB; Temp</nav><h1>Module <code>Tezt.Temp</code></h1></header><aside><p>Temporary files for tests.</p></aside><dl><dt class="spec value" id="val-file"><a href="#val-file" class="anchor"></a><code><span class="keyword">val</span> file : <span>?&#8288;runner:<a href="../Runner/index.html#type-t">Runner.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;perms:Unix.file_perm</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dd><p>Get a temporary file name.</p><p>For instance:</p><ul><li><code>file &quot;hello.ml&quot;</code> may return something like <code>&quot;/tmp/tezt-1234/1/hello.ml&quot;</code>;</li><li><code>file &quot;some/dir/hello.ml&quot;</code> may return <code>&quot;/tmp/tezt-1234/1/some/dir/hello.ml&quot;</code>;</li><li><code>file &quot;/dir/hello.ml&quot;</code> may return <code>&quot;/tmp/tezt-1234/1/dir/hello.ml&quot;</code>.</li></ul><p>This function also creates the directory (and its parents) needed to host the resulting file.</p><p><code>perms</code> is the permissions for parent directories if they are created. Default is <code>0o755</code>, i.e. <code>rwxr-xr-x</code>.</p><p>If <code>runner</code> is specified, the temporary file is registered to be located in this remote runner, which means that it will be removed using SSH by the <code>clean up</code> function.</p><p><code>file base</code> always returns the same result for a given <code>base</code> and for the same process.</p></dd></dl><dl><dt class="spec value" id="val-dir"><a href="#val-dir" class="anchor"></a><code><span class="keyword">val</span> dir : <span>?&#8288;runner:<a href="../Runner/index.html#type-t">Runner.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;perms:Unix.file_perm</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dd><p>Get a temporary file name and create it as a directory.</p></dd></dl><dl><dt class="spec value" id="val-start"><a href="#val-start" class="anchor"></a><code><span class="keyword">val</span> start : unit <span>&#45;&gt;</span> string</code></dt><dd><p>Allow calls to <code>file</code> and <code>dir</code> until the next <code>clean_up</code> or <code>stop</code>.</p><p>Return the main temporary directory, e.g. <code>&quot;/tmp/tezt-1234/1&quot;</code>, so that it can be displayed to users.</p><p>Calls to <code>file</code> and <code>dir</code> which are made before <code>start</code> result in an error.</p><p>Don't call this directly, it is called by <a href="../Test/index.html#val-run"><code>Test.run</code></a>. This prevents you from creating temporary files accidentally before your test actually runs. Indeed, if your test is disabled from the command-line it should not create temporary files. By using <a href="../Test/index.html#val-run"><code>Test.run</code></a> you also ensure that <a href="index.html#val-clean_up"><code>clean_up</code></a> is called.</p></dd></dl><dl><dt class="spec value" id="val-stop"><a href="#val-stop" class="anchor"></a><code><span class="keyword">val</span> stop : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Disallow calls to <code>file</code> and <code>dir</code> until the next <code>start</code>.</p><p>This can be called in place of <code>clean_up</code> if you want to keep temporary files.</p></dd></dl><dl><dt class="spec value" id="val-clean_up"><a href="#val-clean_up" class="anchor"></a><code><span class="keyword">val</span> clean_up : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Delete temporary files and directories.</p><p>All files which were returned by <code>file</code> are deleted. All directories which were returned by <code>dir</code> are deleted, but only if they did not already exist. All parent directories that were created are then deleted, but only if they are empty.</p></dd></dl></div></body></html>