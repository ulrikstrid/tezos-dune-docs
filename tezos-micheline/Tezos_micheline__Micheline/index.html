<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tezos_micheline__Micheline (tezos-micheline.Tezos_micheline__Micheline)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">tezos-micheline</a> &#x00BB; Tezos_micheline__Micheline</nav><h1>Module <code>Tezos_micheline__Micheline</code></h1></header><dl><dt class="spec type" id="type-annot"><a href="#type-annot" class="anchor"></a><code><span class="keyword">type</span> annot</code><code> = <span>string list</span></code></dt><dt class="spec type" id="type-node"><a href="#type-node" class="anchor"></a><code><span class="keyword">type</span> <span>('l, 'p) node</span></code><code> = </code><table class="variant"><tr id="type-node.Int" class="anchored"><td class="def constructor"><a href="#type-node.Int" class="anchor"></a><code>| </code><code><span class="constructor">Int</span> <span class="keyword">of</span> <span class="type-var">'l</span> * Z.t</code></td></tr><tr id="type-node.String" class="anchored"><td class="def constructor"><a href="#type-node.String" class="anchor"></a><code>| </code><code><span class="constructor">String</span> <span class="keyword">of</span> <span class="type-var">'l</span> * string</code></td></tr><tr id="type-node.Bytes" class="anchored"><td class="def constructor"><a href="#type-node.Bytes" class="anchor"></a><code>| </code><code><span class="constructor">Bytes</span> <span class="keyword">of</span> <span class="type-var">'l</span> * Stdlib.Bytes.t</code></td></tr><tr id="type-node.Prim" class="anchored"><td class="def constructor"><a href="#type-node.Prim" class="anchor"></a><code>| </code><code><span class="constructor">Prim</span> <span class="keyword">of</span> <span class="type-var">'l</span> * <span class="type-var">'p</span> * <span><span><span>(<span class="type-var">'l</span>, <span class="type-var">'p</span>)</span> <a href="index.html#type-node">node</a></span> list</span> * <a href="index.html#type-annot">annot</a></code></td></tr><tr id="type-node.Seq" class="anchored"><td class="def constructor"><a href="#type-node.Seq" class="anchor"></a><code>| </code><code><span class="constructor">Seq</span> <span class="keyword">of</span> <span class="type-var">'l</span> * <span><span><span>(<span class="type-var">'l</span>, <span class="type-var">'p</span>)</span> <a href="index.html#type-node">node</a></span> list</span></code></td></tr></table></dt><dd><p>The abstract syntax tree of Micheline expressions. The first parameter is used to contain locations, but can also embed custom data. The second parameter is the type of primitive names.</p></dd></dl><dl><dt class="spec value" id="val-table_encoding"><a href="#val-table_encoding" class="anchor"></a><code><span class="keyword">val</span> table_encoding : <span>variant:string</span> <span>&#45;&gt;</span> <span><span class="type-var">'l</span> Data_encoding.encoding</span> <span>&#45;&gt;</span> <span><span class="type-var">'p</span> Data_encoding.encoding</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'l</span>, <span class="type-var">'p</span>)</span> <a href="index.html#type-node">node</a></span> Data_encoding.encoding</span></code></dt><dd><p>Encoding for expressions, as their <a href="index.html#type-canonical"><code>canonical</code></a> encoding. Locations are stored in a side table. See <a href="index.html#val-canonical_encoding"><code>canonical_encoding</code></a> for the <code>variant</code> parameter.</p></dd></dl><dl><dt class="spec value" id="val-erased_encoding"><a href="#val-erased_encoding" class="anchor"></a><code><span class="keyword">val</span> erased_encoding : <span>variant:string</span> <span>&#45;&gt;</span> <span class="type-var">'l</span> <span>&#45;&gt;</span> <span><span class="type-var">'p</span> Data_encoding.encoding</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'l</span>, <span class="type-var">'p</span>)</span> <a href="index.html#type-node">node</a></span> Data_encoding.encoding</span></code></dt><dd><p>Encoding for expressions, as their <a href="index.html#type-canonical"><code>canonical</code></a> encoding. Locations are erased when serialized, and restored to a provided default value when deserialized. See <a href="index.html#val-canonical_encoding"><code>canonical_encoding</code></a> for the <code>variant</code> parameter.</p></dd></dl><dl><dt class="spec value" id="val-location"><a href="#val-location" class="anchor"></a><code><span class="keyword">val</span> location : <span><span>(<span class="type-var">'l</span>, <span class="type-var">'p</span>)</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span class="type-var">'l</span></code></dt><dd><p>Extract the location of the node.</p></dd></dl><dl><dt class="spec value" id="val-annotations"><a href="#val-annotations" class="anchor"></a><code><span class="keyword">val</span> annotations : <span><span>(<span class="type-var">'l</span>, <span class="type-var">'p</span>)</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span>string list</span></code></dt><dd><p>Extract the annotations of the node.</p></dd></dl><dl><dt class="spec type" id="type-canonical"><a href="#type-canonical" class="anchor"></a><code><span class="keyword">type</span> <span>'p canonical</span></code></dt><dd><p>Expression form using canonical integer numbering as locations. The root has number zero, and each node adds one in the order of infix traversal. To be used when locations are not important, or when one wants to attach properties to nodes in an expression without rewriting it (using an indirection table with canonical locations as keys).</p></dd></dl><dl><dt class="spec type" id="type-canonical_location"><a href="#type-canonical_location" class="anchor"></a><code><span class="keyword">type</span> canonical_location</code><code> = int</code></dt><dd><p>Canonical integer locations that appear inside <a href="index.html#type-canonical"><code>canonical</code></a> expressions.</p></dd></dl><dl><dt class="spec value" id="val-canonical_location_encoding"><a href="#val-canonical_location_encoding" class="anchor"></a><code><span class="keyword">val</span> canonical_location_encoding : <span><a href="index.html#type-canonical_location">canonical_location</a> Data_encoding.encoding</span></code></dt><dd><p>Encoding for canonical integer locations.</p></dd></dl><dl><dt class="spec value" id="val-canonical_encoding"><a href="#val-canonical_encoding" class="anchor"></a><code><span class="keyword">val</span> canonical_encoding : <span>variant:string</span> <span>&#45;&gt;</span> <span><span class="type-var">'l</span> Data_encoding.encoding</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'l</span> <a href="index.html#type-canonical">canonical</a></span> Data_encoding.encoding</span></code></dt><dd><p>Encoding for expressions in canonical form. The first parameter is a name used to produce named definitions in the schemas. Make sure to use different names if two expression variants with different primitive encodings are used in the same schema.</p></dd></dl><dl><dt class="spec value" id="val-canonical_encoding_v0"><a href="#val-canonical_encoding_v0" class="anchor"></a><code><span class="keyword">val</span> canonical_encoding_v0 : <span>variant:string</span> <span>&#45;&gt;</span> <span><span class="type-var">'l</span> Data_encoding.encoding</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'l</span> <a href="index.html#type-canonical">canonical</a></span> Data_encoding.encoding</span></code></dt><dd><p>Old version of <a href="index.html#val-canonical_encoding"><code>canonical_encoding</code></a> for backward compatibility. Do not use in new code.</p></dd></dl><dl><dt class="spec value" id="val-canonical_encoding_v1"><a href="#val-canonical_encoding_v1" class="anchor"></a><code><span class="keyword">val</span> canonical_encoding_v1 : <span>variant:string</span> <span>&#45;&gt;</span> <span><span class="type-var">'l</span> Data_encoding.encoding</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'l</span> <a href="index.html#type-canonical">canonical</a></span> Data_encoding.encoding</span></code></dt><dd><p>Alias for <a href="index.html#val-canonical_encoding"><code>canonical_encoding</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-strip_locations"><a href="#val-strip_locations" class="anchor"></a><code><span class="keyword">val</span> strip_locations : <span><span>(<span class="type-var">_</span>, <span class="type-var">'p</span>)</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'p</span> <a href="index.html#type-canonical">canonical</a></span></code></dt><dd><p>Compute the canonical form of an expression. Drops the concrete locations completely.</p></dd></dl><dl><dt class="spec value" id="val-root"><a href="#val-root" class="anchor"></a><code><span class="keyword">val</span> root : <span><span class="type-var">'p</span> <a href="index.html#type-canonical">canonical</a></span> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-canonical_location">canonical_location</a>, <span class="type-var">'p</span>)</span> <a href="index.html#type-node">node</a></span></code></dt><dd><p>Give the root node of an expression in canonical form.</p></dd></dl><dl><dt class="spec value" id="val-extract_locations"><a href="#val-extract_locations" class="anchor"></a><code><span class="keyword">val</span> extract_locations : <span><span>(<span class="type-var">'l</span>, <span class="type-var">'p</span>)</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'p</span> <a href="index.html#type-canonical">canonical</a></span> * <span><span>(<a href="index.html#type-canonical_location">canonical_location</a> * <span class="type-var">'l</span>)</span> list</span></code></dt><dd><p>Compute the canonical form of an expression. Saves the concrete locations in an association list.</p></dd></dl><dl><dt class="spec value" id="val-inject_locations"><a href="#val-inject_locations" class="anchor"></a><code><span class="keyword">val</span> inject_locations : <span>(<a href="index.html#type-canonical_location">canonical_location</a> <span>&#45;&gt;</span> <span class="type-var">'l</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'p</span> <a href="index.html#type-canonical">canonical</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'l</span>, <span class="type-var">'p</span>)</span> <a href="index.html#type-node">node</a></span></code></dt><dd><p>Transforms an expression in canonical form into a polymorphic one. Takes a mapping function to inject the concrete locations.</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-canonical">canonical</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-canonical">canonical</a></span></code></dt><dd><p>Copies the tree, updating its primitives.</p></dd></dl><dl><dt class="spec value" id="val-map_node"><a href="#val-map_node" class="anchor"></a><code><span class="keyword">val</span> map_node : <span>(<span class="type-var">'la</span> <span>&#45;&gt;</span> <span class="type-var">'lb</span>)</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'pa</span> <span>&#45;&gt;</span> <span class="type-var">'pb</span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'la</span>, <span class="type-var">'pa</span>)</span> <a href="index.html#type-node">node</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'lb</span>, <span class="type-var">'pb</span>)</span> <a href="index.html#type-node">node</a></span></code></dt><dd><p>Copies the tree, updating its primitives and locations.</p></dd></dl></div></body></html>