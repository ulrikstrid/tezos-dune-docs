<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Monad (tezos-lwt-result-stdlib.Tezos_lwt_result_stdlib.Lwtreslib.Traced.Monad)</title><link rel="stylesheet" href="../../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../../index.html">tezos-lwt-result-stdlib</a> &#x00BB; <a href="../../../index.html">Tezos_lwt_result_stdlib</a> &#x00BB; <a href="../../index.html">Lwtreslib</a> &#x00BB; <a href="../index.html">Traced</a> &#x00BB; Monad</nav><h1>Module <code>Traced.Monad</code></h1></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../../../Bare_sigs/Monad/index.html#module-type-S">Bare_sigs.Monad.S</a></code></span></summary><dl><dt class="spec value" id="val-(&gt;&gt;=)"><a href="#val-(&gt;&gt;=)" class="anchor"></a><code><span class="keyword">val</span> (&gt;&gt;=) : <span><span class="type-var">'a</span> Lwt.t</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span></code></dt><dt class="spec value" id="val-(&gt;|=)"><a href="#val-(&gt;|=)" class="anchor"></a><code><span class="keyword">val</span> (&gt;|=) : <span><span class="type-var">'a</span> Lwt.t</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span></code></dt></dl><aside><p>result monad</p></aside><dl><dt class="spec value" id="val-ok"><a href="#val-ok" class="anchor"></a><code><span class="keyword">val</span> ok : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-error"><a href="#val-error" class="anchor"></a><code><span class="keyword">val</span> error : <span class="type-var">'error</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'error</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-(&gt;&gt;?)"><a href="#val-(&gt;&gt;?)" class="anchor"></a><code><span class="keyword">val</span> (&gt;&gt;?) : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-(&gt;|?)"><a href="#val-(&gt;|?)" class="anchor"></a><code><span class="keyword">val</span> (&gt;|?) : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span></code></dt></dl><aside><p>lwt-result combined monad</p></aside><dl><dt class="spec value" id="val-ok_s"><a href="#val-ok_s" class="anchor"></a><code><span class="keyword">val</span> ok_s : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-return"><a href="#val-return" class="anchor"></a><code><span class="keyword">val</span> return : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-error_s"><a href="#val-error_s" class="anchor"></a><code><span class="keyword">val</span> error_s : <span class="type-var">'error</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'error</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-fail"><a href="#val-fail" class="anchor"></a><code><span class="keyword">val</span> fail : <span class="type-var">'error</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'error</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-(&gt;&gt;=?)"><a href="#val-(&gt;&gt;=?)" class="anchor"></a><code><span class="keyword">val</span> (&gt;&gt;=?) : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-(&gt;|=?)"><a href="#val-(&gt;|=?)" class="anchor"></a><code><span class="keyword">val</span> (&gt;|=?) : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt></dl><aside><p>Mixing operators</p></aside><aside><p>All operators follow this naming convention:</p><ul><li>the first character is <code>&gt;</code></li><li>the second character is <code>&gt;</code> for <code>bind</code> and <code>|</code> for <code>map</code></li><li>the next character is <code>=</code> for Lwt or <code>?</code> for Error</li><li>the next character (if present) is <code>=</code> for Lwt or <code>?</code> for Error, it is only used for operator that are within both monads.</li></ul></aside><dl><dt class="spec value" id="val-(&gt;&gt;?=)"><a href="#val-(&gt;&gt;?=)" class="anchor"></a><code><span class="keyword">val</span> (&gt;&gt;?=) : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-(&gt;|?=)"><a href="#val-(&gt;|?=)" class="anchor"></a><code><span class="keyword">val</span> (&gt;|?=) : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt></dl><aside><p>preallocated in-monad values</p></aside><dl><dt class="spec value" id="val-unit_s"><a href="#val-unit_s" class="anchor"></a><code><span class="keyword">val</span> unit_s : <span>unit Lwt.t</span></code></dt><dt class="spec value" id="val-unit_e"><a href="#val-unit_e" class="anchor"></a><code><span class="keyword">val</span> unit_e : <span><span>(unit, <span class="type-var">'trace</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-unit_es"><a href="#val-unit_es" class="anchor"></a><code><span class="keyword">val</span> unit_es : <span><span><span>(unit, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-none_s"><a href="#val-none_s" class="anchor"></a><code><span class="keyword">val</span> none_s : <span><span><span class="type-var">'a</span> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-none_e"><a href="#val-none_e" class="anchor"></a><code><span class="keyword">val</span> none_e : <span><span>(<span><span class="type-var">'a</span> option</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-none_es"><a href="#val-none_es" class="anchor"></a><code><span class="keyword">val</span> none_es : <span><span><span>(<span><span class="type-var">'a</span> option</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-some_s"><a href="#val-some_s" class="anchor"></a><code><span class="keyword">val</span> some_s : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> Lwt.t</span></code></dt><dt class="spec value" id="val-some_e"><a href="#val-some_e" class="anchor"></a><code><span class="keyword">val</span> some_e : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span>(<span><span class="type-var">'a</span> option</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-some_es"><a href="#val-some_es" class="anchor"></a><code><span class="keyword">val</span> some_es : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span><span>(<span><span class="type-var">'a</span> option</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-nil_s"><a href="#val-nil_s" class="anchor"></a><code><span class="keyword">val</span> nil_s : <span><span><span class="type-var">'a</span> list</span> Lwt.t</span></code></dt><dt class="spec value" id="val-nil_e"><a href="#val-nil_e" class="anchor"></a><code><span class="keyword">val</span> nil_e : <span><span>(<span><span class="type-var">'a</span> list</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-nil_es"><a href="#val-nil_es" class="anchor"></a><code><span class="keyword">val</span> nil_es : <span><span><span>(<span><span class="type-var">'a</span> list</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-true_s"><a href="#val-true_s" class="anchor"></a><code><span class="keyword">val</span> true_s : <span>bool Lwt.t</span></code></dt><dt class="spec value" id="val-true_e"><a href="#val-true_e" class="anchor"></a><code><span class="keyword">val</span> true_e : <span><span>(bool, <span class="type-var">'trace</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-true_es"><a href="#val-true_es" class="anchor"></a><code><span class="keyword">val</span> true_es : <span><span><span>(bool, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-false_s"><a href="#val-false_s" class="anchor"></a><code><span class="keyword">val</span> false_s : <span>bool Lwt.t</span></code></dt><dt class="spec value" id="val-false_e"><a href="#val-false_e" class="anchor"></a><code><span class="keyword">val</span> false_e : <span><span>(bool, <span class="type-var">'trace</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-false_es"><a href="#val-false_es" class="anchor"></a><code><span class="keyword">val</span> false_es : <span><span><span>(bool, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt></dl><aside><p>additional preallocated in-monad values</p><p>this is for backwards compatibility and for similarity with Lwt</p></aside><dl><dt class="spec value" id="val-ok_unit"><a href="#val-ok_unit" class="anchor"></a><code><span class="keyword">val</span> ok_unit : <span><span>(unit, <span class="type-var">'error</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-return_unit"><a href="#val-return_unit" class="anchor"></a><code><span class="keyword">val</span> return_unit : <span><span><span>(unit, <span class="type-var">'error</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt></dl><aside><p>joins</p></aside><dl><dt class="spec value" id="val-join_p"><a href="#val-join_p" class="anchor"></a><code><span class="keyword">val</span> join_p : <span><span>unit Lwt.t</span> list</span> <span>&#45;&gt;</span> <span>unit Lwt.t</span></code></dt><dt class="spec value" id="val-all_p"><a href="#val-all_p" class="anchor"></a><code><span class="keyword">val</span> all_p : <span><span><span class="type-var">'a</span> Lwt.t</span> list</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> list</span> Lwt.t</span></code></dt><dt class="spec value" id="val-both_p"><a href="#val-both_p" class="anchor"></a><code><span class="keyword">val</span> both_p : <span><span class="type-var">'a</span> Lwt.t</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> Lwt.t</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> Lwt.t</span></code></dt><dt class="spec value" id="val-join_e"><a href="#val-join_e" class="anchor"></a><code><span class="keyword">val</span> join_e : <span><span><span>(unit, <span class="type-var">'trace</span>)</span> Stdlib.result</span> list</span> <span>&#45;&gt;</span> <span><span>(unit, <span><span class="type-var">'trace</span> list</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-all_e"><a href="#val-all_e" class="anchor"></a><code><span class="keyword">val</span> all_e : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> list</span> <span>&#45;&gt;</span> <span><span>(<span><span class="type-var">'a</span> list</span>, <span><span class="type-var">'trace</span> list</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-both_e"><a href="#val-both_e" class="anchor"></a><code><span class="keyword">val</span> both_e : <span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>, <span><span class="type-var">'trace</span> list</span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-join_ep"><a href="#val-join_ep" class="anchor"></a><code><span class="keyword">val</span> join_ep : <span><span><span><span>(unit, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span> list</span> <span>&#45;&gt;</span> <span><span><span>(unit, <span><span class="type-var">'trace</span> list</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-all_ep"><a href="#val-all_ep" class="anchor"></a><code><span class="keyword">val</span> all_ep : <span><span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span> list</span> <span>&#45;&gt;</span> <span><span><span>(<span><span class="type-var">'a</span> list</span>, <span><span class="type-var">'trace</span> list</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-both_ep"><a href="#val-both_ep" class="anchor"></a><code><span class="keyword">val</span> both_ep : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'b</span>, <span class="type-var">'trace</span>)</span> Stdlib.result</span> Lwt.t</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>, <span><span class="type-var">'trace</span> list</span>)</span> Stdlib.result</span> Lwt.t</span></code></dt></dl></details></div></div></div><dl><dt class="spec type" id="type-trace"><a href="#type-trace" class="anchor"></a><code><span class="keyword">type</span> <span>'error trace</span></code><code> = <span><span class="type-var">'error</span> <a href="../argument-1-Trace/index.html#type-trace">Trace.trace</a></span></code></dt><dd><p><code>'error trace</code> is intended to be substituted by a type provided by a <code>Trace</code> module (<code>with type 'error trace := 'error Trace.trace</code>)</p></dd></dl><dl><dt class="spec value" id="val-error_trace"><a href="#val-error_trace" class="anchor"></a><code><span class="keyword">val</span> error_trace : <span class="type-var">'error</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span></code></dt><dd><p><code>error_trace e</code> is <code>Error (Trace.make e)</code> where <code>Trace</code> is the <a href="../../../../Traced_sigs/Trace/index.html"><code>Trace</code></a> module that provides the trace type and functions.</p></dd></dl><dl><dt class="spec value" id="val-fail_trace"><a href="#val-fail_trace" class="anchor"></a><code><span class="keyword">val</span> fail_trace : <span class="type-var">'error</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dd><p><code>fail_trace e</code> is <code>Lwt.return (Error (Trace.make e))</code> where <code>Trace</code> is the <a href="../../../../Traced_sigs/Trace/index.html"><code>Trace</code></a> module that provides the trace type and functions.</p></dd></dl><dl><dt class="spec value" id="val-join_e"><a href="#val-join_e" class="anchor"></a><code><span class="keyword">val</span> join_e : <span><span><span>(unit, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> list</span> <span>&#45;&gt;</span> <span><span>(unit, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span></code></dt><dd><p><code>join</code>, <code>all</code>, and <code>both</code> all return traces rather than lists of errors. This applies to both result-only and Lwt-result monads.</p></dd></dl><dl><dt class="spec value" id="val-all_e"><a href="#val-all_e" class="anchor"></a><code><span class="keyword">val</span> all_e : <span><span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> list</span> <span>&#45;&gt;</span> <span><span>(<span><span class="type-var">'a</span> list</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-both_e"><a href="#val-both_e" class="anchor"></a><code><span class="keyword">val</span> both_e : <span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span></code></dt><dt class="spec value" id="val-join_ep"><a href="#val-join_ep" class="anchor"></a><code><span class="keyword">val</span> join_ep : <span><span><span><span>(unit, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> Lwt.t</span> list</span> <span>&#45;&gt;</span> <span><span><span>(unit, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-all_ep"><a href="#val-all_ep" class="anchor"></a><code><span class="keyword">val</span> all_ep : <span><span><span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> Lwt.t</span> list</span> <span>&#45;&gt;</span> <span><span><span>(<span><span class="type-var">'a</span> list</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> Lwt.t</span></code></dt><dt class="spec value" id="val-both_ep"><a href="#val-both_ep" class="anchor"></a><code><span class="keyword">val</span> both_ep : <span><span><span>(<span class="type-var">'a</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> Lwt.t</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'b</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> Lwt.t</span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>, <span><span class="type-var">'error</span> <a href="index.html#type-trace">trace</a></span>)</span> Stdlib.result</span> Lwt.t</span></code></dt></dl></div></body></html>