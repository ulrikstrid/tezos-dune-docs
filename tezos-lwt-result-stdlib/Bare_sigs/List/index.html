<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>List (tezos-lwt-result-stdlib.Bare_sigs.List)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-lwt-result-stdlib</a> &#x00BB; <a href="../index.html">Bare_sigs</a> &#x00BB; List</nav><header class="odoc-preamble"><h1>Module <code><span>Bare_sigs.List</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#list">List</a><ul><li><a href="#basics">Basics</a></li><li><a href="#double-traversal-and-combine">Double-traversal and combine</a><ul><li><a href="#special-considerations">Special considerations</a></li></ul></li></ul></li></ul></nav><div class="odoc-content"><h2 id="list"><a href="#list" class="anchor"></a>List</h2><p>A replacement for <code>Stdlib</code>.List which:</p><ul><li>replaces the exception-raising functions by exception-safe variants,</li><li>provides Lwt-, result- and Lwt-result-aware traversors.</li></ul><p><code>List</code> is intended to shadow both <code>Stdlib</code>.List and <code>Lwt_list</code>.</p><h3 id="basics"><a href="#basics" class="anchor"></a>Basics</h3><p>Checkout <code>Lwtreslib</code> for an introduction to the naming and semantic convention of Lwtreslib. In a nutshell:</p><ul><li>Stdlib functions that raise exceptions are replaced by safe variants (typically returning <code>option</code>).</li><li>The <code>_e</code> suffix is for result-aware traversors (&quot;e&quot; stands for &quot;error&quot;), <code>_s</code> and <code>_p</code> are for Lwt-aware, and <code>_es</code> and <code>_ep</code> are for Lwt-result-aware.</li><li><code>_e</code>, <code>_s</code>, and <code>_es</code> traversors are <i>fail-early</i>: they stop traversal as soon as a failure (<code>Error</code> or <code>Fail</code>) occurs; <code>_p</code> and <code>_ep</code> traversors are <i>best-effort</i>: they only resolve once all of the intermediate promises have, even if a failure occurs.</li></ul><h3 id="double-traversal-and-combine"><a href="#double-traversal-and-combine" class="anchor"></a>Double-traversal and combine</h3><p>Note that double-list traversors (<code>iter2</code>, <code>map2</code>, etc., and also <code>combine</code>) take an additional <code>when_different_lengths</code> parameter. This is to control the error that is returned when the two lists passed as arguments have different lengths.</p><p>This mechanism is a replacement for <code>Stdlib</code>.List.iter2 (etc.) raising <code>Invalid_argument</code>.</p><p>Note that, as per the fail-early behaviour mentioned above, <code>_e</code>, <code>_s</code>, and <code>_es</code> traversors will have already processed the common-prefix before the error is returned.</p><p>Because the best-effort behaviour of <code>_p</code> and <code>_ep</code> is unsatisfying for this failure case, double parallel traversors are omitted from this library. (Specifically, it is not obvious whether nor how the <code>when_different_lengths</code> error should be composed with the other errors.)</p><p>To obtain a different behaviour for sequential traversors, or to process two lists in parallel, you can use <code>combine</code> or any of the alternative that handles the error differently: <code>combine_drop</code>, <code>combine_with_leftovers</code>. Finally, the <code>rev_combine</code> is provided to allow to avoid multiple-reversing.</p><h4 id="special-considerations"><a href="#special-considerations" class="anchor"></a>Special considerations</h4><p>Because they traverse the list from right-to-left, the <code>fold_right2</code> function and all its variants fail with <code>when_different_lengths</code> before any of the processing starts. Whilst this is still within the fail-early behaviour, it may be surprising enough that it requires mentioning here.</p><p>Because they may return early, <code>for_all2</code> and <code>exists2</code> and all their variants may return <code>Ok _</code> even tough the arguments have different lengths.</p><div class="odoc-spec"><div class="spec module-type" id="module-type-S" class="anchored"><a href="#module-type-S" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-S/index.html">S</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>