<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tezos_baking_008_PtEdo2Zk__Client_baking_forge (tezos-baking-008-PtEdo2Zk.Tezos_baking_008_PtEdo2Zk__Client_baking_forge)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">tezos-baking-008-PtEdo2Zk</a> &#x00BB; Tezos_baking_008_PtEdo2Zk__Client_baking_forge</nav><h1>Module <code>Tezos_baking_008_PtEdo2Zk__Client_baking_forge</code></h1></header><dl><dt class="spec value" id="val-generate_seed_nonce"><a href="#val-generate_seed_nonce" class="anchor"></a><code><span class="keyword">val</span> generate_seed_nonce : unit <span>&#45;&gt;</span> <a href="../../tezos-protocol-008-PtEdo2Zk/Tezos_raw_protocol_008_PtEdo2Zk/Alpha_context/Nonce/index.html#type-t">Tezos_raw_protocol_008_PtEdo2Zk.Alpha_context.Nonce.t</a></code></dt><dd><p><code>generate_seed_nonce ()</code> is a random nonce that is typically used in block headers. When baking, bakers generate random nonces whose hash is committed in the block they bake. They will typically reveal the aforementioned nonce during the next cycle.</p></dd></dl><dl><dt class="spec value" id="val-inject_block"><a href="#val-inject_block" class="anchor"></a><code><span class="keyword">val</span> inject_block : <a href="../../tezos-client-008-PtEdo2Zk/Tezos_client_008_PtEdo2Zk/index.html#module-Protocol_client_context">Tezos_client_008_PtEdo2Zk.Protocol_client_context</a>.#full <span>&#45;&gt;</span> <span>?&#8288;force:bool</span> <span>&#45;&gt;</span> <span>?&#8288;seed_nonce_hash:<a href="../../tezos-protocol-008-PtEdo2Zk/Tezos_raw_protocol_008_PtEdo2Zk/Nonce_hash/index.html#type-t">Tezos_raw_protocol_008_PtEdo2Zk.Nonce_hash.t</a></span> <span>&#45;&gt;</span> <span>chain:<a href="../../tezos-shell-services/Tezos_shell_services/Chain_services/index.html#type-chain">Tezos_shell_services.Chain_services.chain</a></span> <span>&#45;&gt;</span> <span>shell_header:<a href="../../tezos-protocol-008-PtEdo2Zk/Tezos_raw_protocol_008_PtEdo2Zk/Alpha_context/Block_header/index.html#type-shell_header">Tezos_raw_protocol_008_PtEdo2Zk.Alpha_context.Block_header.shell_header</a></span> <span>&#45;&gt;</span> <span>priority:int</span> <span>&#45;&gt;</span> <span>delegate_pkh:<a href="../../tezos-crypto/Tezos_crypto/Signature/Public_key_hash/index.html#type-t">Tezos_crypto.Signature.Public_key_hash.t</a></span> <span>&#45;&gt;</span> <span>delegate_sk:<a href="../../tezos-client-base/Tezos_client_base/Client_keys/index.html#type-sk_uri">Tezos_client_base.Client_keys.sk_uri</a></span> <span>&#45;&gt;</span> <span>level:<a href="../../tezos-protocol-008-PtEdo2Zk/Tezos_raw_protocol_008_PtEdo2Zk/Alpha_context/Raw_level/index.html#type-t">Tezos_raw_protocol_008_PtEdo2Zk.Alpha_context.Raw_level.t</a></span> <span>&#45;&gt;</span> <span><span><a href="../../tezos-protocol-008-PtEdo2Zk/Tezos_raw_protocol_008_PtEdo2Zk/Alpha_context/Operation/index.html#type-raw">Tezos_raw_protocol_008_PtEdo2Zk.Alpha_context.Operation.raw</a> list</span> list</span> <span>&#45;&gt;</span> <span><span><a href="../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> <a href="../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dd><p><code>inject_block cctxt blk ?force ~priority ~timestamp ~fitness
    ~seed_nonce ~src_sk ops</code> tries to inject a block in the node. If <code>?force</code> is set, the fitness check will be bypassed. <code>priority</code> will be used to compute the baking slot (level is precomputed). <code>src_sk</code> is used to sign the block header.</p></dd></dl><dl><dt class="spec extension"><code><span class="keyword">type</span> <a href="../../tezos-base/Tezos_base__TzPervasives/index.html#type-error">Tezos_base__TzPervasives.error</a> += </code><code><span class="extension">Failed_to_preapply</span> <span class="keyword">of</span> <a href="../../tezos-base/Tezos_base/Operation/index.html#type-t">Tezos_base.Operation.t</a> * <span><a href="../../tezos-base/Tezos_base__TzPervasives/index.html#type-error">Tezos_base__TzPervasives.error</a> list</span></code></dt></dl><dl><dt class="spec value" id="val-forge_block"><a href="#val-forge_block" class="anchor"></a><code><span class="keyword">val</span> forge_block : <a href="../../tezos-client-008-PtEdo2Zk/Tezos_client_008_PtEdo2Zk/index.html#module-Protocol_client_context">Tezos_client_008_PtEdo2Zk.Protocol_client_context</a>.#full <span>&#45;&gt;</span> <span>?&#8288;force:bool</span> <span>&#45;&gt;</span> <span>?&#8288;operations:<span><a href="../../tezos-protocol-008-PtEdo2Zk/Tezos_raw_protocol_008_PtEdo2Zk/Alpha_context/Operation/index.html#type-packed">Tezos_raw_protocol_008_PtEdo2Zk.Alpha_context.Operation.packed</a> list</span></span> <span>&#45;&gt;</span> <span>?&#8288;best_effort:bool</span> <span>&#45;&gt;</span> <span>?&#8288;sort:bool</span> <span>&#45;&gt;</span> <span>?&#8288;minimal_fees:<a href="../../tezos-protocol-008-PtEdo2Zk/Tezos_raw_protocol_008_PtEdo2Zk/Alpha_context/Tez/index.html#type-t">Tezos_raw_protocol_008_PtEdo2Zk.Alpha_context.Tez.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;minimal_nanotez_per_gas_unit:Q.t</span> <span>&#45;&gt;</span> <span>?&#8288;minimal_nanotez_per_byte:Q.t</span> <span>&#45;&gt;</span> <span>?&#8288;timestamp:<a href="../../tezos-base/Tezos_base__Time/Protocol/index.html#type-t">Tezos_base__TzPervasives.Time.Protocol.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;mempool:string</span> <span>&#45;&gt;</span> <span>?&#8288;context_path:string</span> <span>&#45;&gt;</span> <span>?&#8288;seed_nonce_hash:<a href="../../tezos-protocol-008-PtEdo2Zk/Tezos_raw_protocol_008_PtEdo2Zk/Nonce_hash/index.html#type-t">Tezos_raw_protocol_008_PtEdo2Zk.Nonce_hash.t</a></span> <span>&#45;&gt;</span> <span>chain:<a href="../../tezos-shell-services/Tezos_shell_services/Chain_services/index.html#type-chain">Tezos_shell_services.Chain_services.chain</a></span> <span>&#45;&gt;</span> <span>priority:<span>[ <span>`Set of int</span> <span><span>| `Auto</span> of <a href="../../tezos-protocol-008-PtEdo2Zk/Tezos_raw_protocol_008_PtEdo2Zk/Alpha_context/index.html#type-public_key_hash">Tezos_raw_protocol_008_PtEdo2Zk.Alpha_context.public_key_hash</a> * <span>int option</span></span> ]</span></span> <span>&#45;&gt;</span> <span>delegate_pkh:<a href="../../tezos-crypto/Tezos_crypto/Signature/Public_key_hash/index.html#type-t">Tezos_crypto.Signature.Public_key_hash.t</a></span> <span>&#45;&gt;</span> <span>delegate_sk:<a href="../../tezos-client-base/Tezos_client_base/Client_keys/index.html#type-sk_uri">Tezos_client_base.Client_keys.sk_uri</a></span> <span>&#45;&gt;</span> <a href="../../tezos-shell-services/Tezos_shell_services/Block_services/index.html#type-block">Tezos_shell_services.Block_services.block</a> <span>&#45;&gt;</span> <span><span><a href="../../tezos-crypto/Tezos_crypto/Block_hash/index.html#type-t">Tezos_crypto.Block_hash.t</a> <a href="../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt><dd><p><code>forge_block cctxt ?fee_threshold ?force ?operations ?best_effort
    ?sort ?timestamp ?max_priority ?priority ~seed_nonce ~src_sk
    pk_hash parent_blk</code> injects a block in the node. In addition of inject_block, it will:</p><p>* Operations: If <code>?operations</code> is <code>None</code>, it will get pending operations and add them to the block. Otherwise, provided operations will be used. In both cases, they will be validated.</p><p>* Baking priority: If <code>`Auto</code> is used, it will be computed from the public key hash of the specified contract, optionally capped to a maximum value, and optionally restricting for free baking slot.</p><p>* Timestamp: If <code>?timestamp</code> is set, and is compatible with the computed baking priority, it will be used. Otherwise, it will be set at the best baking priority.</p><p>* Fee Threshold: If <code>?fee_threshold</code> is given, operations with fees lower than it are not added to the block.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <a href="../../tezos-client-008-PtEdo2Zk/Tezos_client_008_PtEdo2Zk/index.html#module-Protocol_client_context">Tezos_client_008_PtEdo2Zk.Protocol_client_context</a>.#full <span>&#45;&gt;</span> <span>user_activated_upgrades:<a href="../../tezos-base/Tezos_base/User_activated/index.html#type-upgrades">Tezos_base__TzPervasives.User_activated.upgrades</a></span> <span>&#45;&gt;</span> <span>?&#8288;minimal_fees:<a href="../../tezos-protocol-008-PtEdo2Zk/Tezos_raw_protocol_008_PtEdo2Zk/Alpha_context/Tez/index.html#type-t">Tezos_raw_protocol_008_PtEdo2Zk.Alpha_context.Tez.t</a></span> <span>&#45;&gt;</span> <span>?&#8288;minimal_nanotez_per_gas_unit:Q.t</span> <span>&#45;&gt;</span> <span>?&#8288;minimal_nanotez_per_byte:Q.t</span> <span>&#45;&gt;</span> <span>?&#8288;max_priority:int</span> <span>&#45;&gt;</span> <span>chain:<a href="../../tezos-shell-services/Tezos_shell_services/Chain_services/index.html#type-chain">Tezos_shell_services.Chain_services.chain</a></span> <span>&#45;&gt;</span> <span>context_path:string</span> <span>&#45;&gt;</span> <span><a href="../../tezos-protocol-008-PtEdo2Zk/Tezos_raw_protocol_008_PtEdo2Zk/Alpha_context/index.html#type-public_key_hash">Tezos_raw_protocol_008_PtEdo2Zk.Alpha_context.public_key_hash</a> list</span> <span>&#45;&gt;</span> <span><span><a href="../Tezos_baking_008_PtEdo2Zk/Client_baking_blocks/index.html#type-block_info">Tezos_baking_008_PtEdo2Zk.Client_baking_blocks.block_info</a> <a href="../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt_stream.t</span> <span>&#45;&gt;</span> <span><span>unit <a href="../../tezos-base/Tezos_base__TzPervasives/index.html#type-tzresult">Tezos_base__TzPervasives.tzresult</a></span> Lwt.t</span></code></dt></dl></div></body></html>