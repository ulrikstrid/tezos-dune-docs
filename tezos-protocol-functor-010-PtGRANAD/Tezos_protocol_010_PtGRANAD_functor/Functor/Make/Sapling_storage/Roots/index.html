<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Roots (tezos-protocol-functor-010-PtGRANAD.Tezos_protocol_010_PtGRANAD_functor.Functor.Make.Sapling_storage.Roots)</title><link rel="stylesheet" href="../../../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../../../index.html">tezos-protocol-functor-010-PtGRANAD</a> &#x00BB; <a href="../../../../index.html">Tezos_protocol_010_PtGRANAD_functor</a> &#x00BB; <a href="../../../index.html">Functor</a> &#x00BB; <a href="../../index.html">Make</a> &#x00BB; <a href="../index.html">Sapling_storage</a> &#x00BB; Roots</nav><h1>Module <code>Sapling_storage.Roots</code></h1><p>Bounded queue of roots. The full size is initialized with the default uncommitted root, that's why roots storage doesn't need to be carbonated. A maximum of one new root is added per protocol level. If multiple transactions for the same shielded pool are processed during the same contract call or several calls in the same block, only the last root will be stored. This property prevents transactions in the same block from depending on each other and guarantees that a transaction will be valid for a least two hours (hence the 120 size) after being forged.</p></header><dl><dt class="spec value" id="val-size"><a href="#val-size" class="anchor"></a><code><span class="keyword">val</span> size : int32</code></dt><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span>&#45;&gt;</span> <a href="../../Storage/Sapling/index.html#type-id">Storage.Sapling.id</a> <span>&#45;&gt;</span> <span><span><span>(<a href="../../Storage/Sapling/Roots/index.html#type-value">Storage.Sapling.Roots.value</a>, <span><a href="../../argument-1-Tezos_protocol_environment/Error_monad/index.html#type-error">Tezos_protocol_environment.Error_monad.error</a> <a href="../../argument-1-Tezos_protocol_environment/Error_monad/index.html#type-trace">Tezos_protocol_environment.Error_monad.trace</a></span>)</span> <a href="../../argument-1-Tezos_protocol_environment/Pervasives/index.html#type-result">Tezos_protocol_environment.Pervasives.result</a></span> <a href="../../argument-1-Tezos_protocol_environment/Lwt/index.html#type-t">Tezos_protocol_environment.Lwt.t</a></span></code></dt><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : <a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span>&#45;&gt;</span> <a href="../../Storage/Sapling/index.html#type-id">Storage.Sapling.id</a> <span>&#45;&gt;</span> <span><span><span>(<a href="../../Raw_context/index.html#type-t">Raw_context.t</a>, <span><a href="../../argument-1-Tezos_protocol_environment/Error_monad/index.html#type-error">Tezos_protocol_environment.Error_monad.error</a> <a href="../../argument-1-Tezos_protocol_environment/Error_monad/index.html#type-trace">Tezos_protocol_environment.Error_monad.trace</a></span>)</span> <a href="../../argument-1-Tezos_protocol_environment/Pervasives/index.html#type-result">Tezos_protocol_environment.Pervasives.result</a></span> <a href="../../argument-1-Tezos_protocol_environment/Lwt/index.html#type-t">Tezos_protocol_environment.Lwt.t</a></span></code></dt><dt class="spec value" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span class="keyword">val</span> mem : <a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span>&#45;&gt;</span> <a href="../../Storage/Sapling/index.html#type-id">Storage.Sapling.id</a> <span>&#45;&gt;</span> <a href="../../argument-1-Tezos_protocol_environment/Sapling/Hash/index.html#type-t">Tezos_protocol_environment.Sapling.Hash.t</a> <span>&#45;&gt;</span> <span><span><span>(bool, <span><a href="../../argument-1-Tezos_protocol_environment/Error_monad/index.html#type-error">Tezos_protocol_environment.Error_monad.error</a> <a href="../../argument-1-Tezos_protocol_environment/Error_monad/index.html#type-trace">Tezos_protocol_environment.Error_monad.trace</a></span>)</span> <a href="../../argument-1-Tezos_protocol_environment/Pervasives/index.html#type-result">Tezos_protocol_environment.Pervasives.result</a></span> <a href="../../argument-1-Tezos_protocol_environment/Lwt/index.html#type-t">Tezos_protocol_environment.Lwt.t</a></span></code></dt><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <a href="../../Raw_context/index.html#type-t">Raw_context.t</a> <span>&#45;&gt;</span> <a href="../../Storage/Sapling/index.html#type-id">Storage.Sapling.id</a> <span>&#45;&gt;</span> <a href="../../Storage/Sapling/Roots/index.html#type-value">Storage.Sapling.Roots.value</a> <span>&#45;&gt;</span> <span><span><span>(<a href="../../Raw_context/index.html#type-t">Raw_context.t</a>, <span><a href="../../argument-1-Tezos_protocol_environment/Error_monad/index.html#type-error">Tezos_protocol_environment.Error_monad.error</a> <a href="../../argument-1-Tezos_protocol_environment/Error_monad/index.html#type-trace">Tezos_protocol_environment.Error_monad.trace</a></span>)</span> <a href="../../argument-1-Tezos_protocol_environment/Pervasives/index.html#type-result">Tezos_protocol_environment.Pervasives.result</a></span> <a href="../../argument-1-Tezos_protocol_environment/Lwt/index.html#type-t">Tezos_protocol_environment.Lwt.t</a></span></code></dt></dl></div></body></html>