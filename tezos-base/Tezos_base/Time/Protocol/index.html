<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Protocol (tezos-base.Tezos_base.Time.Protocol)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">tezos-base</a> &#x00BB; <a href="../../index.html">Tezos_base</a> &#x00BB; <a href="../index.html">Time</a> &#x00BB; Protocol</nav><header class="odoc-preamble"><h1>Module <code><span>Time.Protocol</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#protocol-time">Protocol time</a><ul><li><a href="#conversions-to-and-from-string-representations">Conversions to and from string representations</a></li><li><a href="#serialization-functions">Serialization functions</a></li><li><a href="#pretty-printing-functions">Pretty-printing functions</a></li></ul></li></ul></nav><div class="odoc-content"><h2 id="protocol-time"><a href="#protocol-time" class="anchor"></a>Protocol time</h2><p>The out-of-protocol view of in-protocol timestamps. The precision of in-protocol timestamps are only precise to the second.</p><p>Note that the out-of-protocol view does not necessarily match the in-protocol representation.</p><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type of protocol times</p></div></div><div class="odoc-spec"><div class="spec value" id="val-epoch" class="anchored"><a href="#val-epoch" class="anchor"></a><code><span><span class="keyword">val</span> epoch : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Unix epoch is 1970-01-01 00:00:00 +0000 (UTC).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-min_rfc3339" class="anchored"><a href="#val-min_rfc3339" class="anchor"></a><code><span><span class="keyword">val</span> min_rfc3339 : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The first instant supported by RFC 3339, corresponds to 0000-01-01 00:00:00 +0000 (UTC).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-max_rfc3339" class="anchored"><a href="#val-max_rfc3339" class="anchor"></a><code><span><span class="keyword">val</span> max_rfc3339 : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The last instant supported by RFC 3339, corresponds to 9999-12-31 23:59:59 +0000 (UTC).</p></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../../../tezos-stdlib/Tezos_stdlib/Compare/module-type-S/index.html">Tezos_stdlib.Compare.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../../tezos-stdlib/Tezos_stdlib/Compare/module-type-S/index.html#type-t">t</a> := <a href="#type-t">t</a></span></span></code></summary><div class="odoc-spec"><div class="spec value" id="val-(=)" class="anchored"><a href="#val-(=)" class="anchor"></a><code><span><span class="keyword">val</span> (=) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;&gt;)" class="anchored"><a href="#val-(&lt;&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;&gt;) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;)" class="anchored"><a href="#val-(&lt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;=)" class="anchored"><a href="#val-(&lt;=)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;=) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&gt;=)" class="anchored"><a href="#val-(&gt;=)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;=) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&gt;)" class="anchored"><a href="#val-(&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;) : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-compare" class="anchored"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-max" class="anchored"><a href="#val-max" class="anchor"></a><code><span><span class="keyword">val</span> max : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-min" class="anchored"><a href="#val-min" class="anchor"></a><code><span><span class="keyword">val</span> min : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div></details></div><div class="odoc-spec"><div class="spec value" id="val-add" class="anchored"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int64 <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>add t s</code> is <code>s</code> seconds later than <code>t</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-diff" class="anchored"><a href="#val-diff" class="anchor"></a><code><span><span class="keyword">val</span> diff : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int64</span></code></div><div class="spec-doc"><p><code>diff a b</code> is the number of seconds between <code>a</code> and <code>b</code>. It is negative if <code>b</code> is later than <code>a</code>.</p></div></div><h3 id="conversions-to-and-from-string-representations"><a href="#conversions-to-and-from-string-representations" class="anchor"></a>Conversions to and from string representations</h3><div class="odoc-spec"><div class="spec value" id="val-of_notation" class="anchored"><a href="#val-of_notation" class="anchor"></a><code><span><span class="keyword">val</span> of_notation : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div><div class="spec-doc"><p>Convert a string in the RFC3339 format (e.g., <code>&quot;1970-01-01T00:00:00Z&quot;</code>) into a protocol time. Invalid RFC3339 notations will return <code>None</code>.</p><p>Note that years outside the 0000-9999 range are invalid RFC3339-wise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_notation_exn" class="anchored"><a href="#val-of_notation_exn" class="anchor"></a><code><span><span class="keyword">val</span> of_notation_exn : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Convert a string in the RFC3339 format (e.g., <code>&quot;1970-01-01T00:00:00Z&quot;</code>) into a protocol time. Invalid RFC3339 notations will raise <code>Invalid_argument</code>.</p><p>Note that years outside the 0000-9999 range are invalid RFC3339-wise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_notation" class="anchored"><a href="#val-to_notation" class="anchor"></a><code><span><span class="keyword">val</span> to_notation : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Convert a protocol time into an RFC3339 notation (e.g., <code>&quot;1970-01-01T00:00:00Z&quot;</code>).</p><p>Note that years outside the 0000-9999 range will raise <code>Invalid_argument</code> as they are invalid RFC3339-wise.</p></div></div><p>Conversion to and from &quot;number of seconds since epoch&quot; representation.</p><div class="odoc-spec"><div class="spec value" id="val-of_seconds" class="anchored"><a href="#val-of_seconds" class="anchor"></a><code><span><span class="keyword">val</span> of_seconds : <span>int64 <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Make a Protocol time from a number of seconds since the <a href="#val-epoch"><code>epoch</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_seconds" class="anchored"><a href="#val-to_seconds" class="anchor"></a><code><span><span class="keyword">val</span> to_seconds : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int64</span></code></div><div class="spec-doc"><p>Convert a Protocol time into a number of seconds since the <a href="#val-epoch"><code>epoch</code></a>.</p></div></div><h3 id="serialization-functions"><a href="#serialization-functions" class="anchor"></a>Serialization functions</h3><div class="odoc-spec"><div class="spec value" id="val-encoding" class="anchored"><a href="#val-encoding" class="anchor"></a><code><span><span class="keyword">val</span> encoding : <span><a href="#type-t">t</a> <span class="xref-unresolved">Data_encoding</span>.t</span></span></code></div><div class="spec-doc"><p>Binary and JSON encoding.</p><p>Binary is always encoding/decoding as <code>int64</code>.</p><p>JSON is more complex (for backward compatibility and user-friendliness):</p><ul><li>encoding uses the RFC3339 format (e.g., <code>&quot;1970-01-01T00:00:00Z&quot;</code>) if the year is between 0000 and 9999 (RFC3339-compatible); otherwise it uses the <code>int64</code> format</li><li>decoding tries to decode as an RFC3339 notation, and if it fails, it decodes as <code>int64</code>.</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-rfc_encoding" class="anchored"><a href="#val-rfc_encoding" class="anchor"></a><code><span><span class="keyword">val</span> rfc_encoding : <span><a href="#type-t">t</a> <span class="xref-unresolved">Data_encoding</span>.t</span></span></code></div><div class="spec-doc"><p>Note: the RFC has a different range than the internal representation. Specifically, the RFC can only represent times between 0000-00-00 and 9999-12-31 (inclusive). The RFC-encoding fails for dates outside of this range.</p><p>For this reason, it is preferable to use <a href="#val-encoding"><code>encoding</code></a> and only resort to <code>rfc_encoding</code> for human-readable format.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-rpc_arg" class="anchored"><a href="#val-rpc_arg" class="anchor"></a><code><span><span class="keyword">val</span> rpc_arg : <span><a href="#type-t">t</a> <a href="../../../../tezos-rpc/Tezos_rpc/RPC_arg/index.html#type-t">Tezos_rpc.RPC_arg.t</a></span></span></code></div></div><h3 id="pretty-printing-functions"><a href="#pretty-printing-functions" class="anchor"></a>Pretty-printing functions</h3><div class="odoc-spec"><div class="spec value" id="val-pp" class="anchored"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty print as a number of seconds after epoch.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-pp_hum" class="anchored"><a href="#val-pp_hum" class="anchor"></a><code><span><span class="keyword">val</span> pp_hum : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Note: pretty-printing uses the RFC3339 for human-readability. As mentioned in the comment on <a href="#val-rfc_encoding"><code>rfc_encoding</code></a>, this representation fails when given dates too far in the future (after 9999-12-31) or the past (before 0000-00-00).</p><p>For reliable, generic pretty-printing use <a href="#val-pp"><code>pp</code></a>.</p></div></div></div></body></html>