<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Protocol (tezos-base.Tezos_base__Time.Protocol)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-base</a> &#x00BB; <a href="../index.html">Tezos_base__Time</a> &#x00BB; Protocol</nav><h1>Module <code>Tezos_base__Time.Protocol</code></h1><nav class="toc"><ul><li><a href="#protocol-time">Protocol time</a><ul><li><a href="#conversions-to-and-from-string-representations">Conversions to and from string representations</a></li><li><a href="#serialization-functions">Serialization functions</a></li><li><a href="#pretty-printing-functions">Pretty-printing functions</a></li></ul></li></ul></nav></header><section><header><h2 id="protocol-time"><a href="#protocol-time" class="anchor"></a>Protocol time</h2></header><aside><p>The out-of-protocol view of in-protocol timestamps. The precision of in-protocol timestamps are only precise to the second.</p><p>Note that the out-of-protocol view does not necessarily match the in-protocol representation.</p></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The type of protocol times</p></dd></dl><dl><dt class="spec value" id="val-epoch"><a href="#val-epoch" class="anchor"></a><code><span class="keyword">val</span> epoch : <a href="index.html#type-t">t</a></code></dt><dd><p>Unix epoch is 1970-01-01 00:00:00 +0000 (UTC).</p></dd></dl><dl><dt class="spec value" id="val-min_rfc3339"><a href="#val-min_rfc3339" class="anchor"></a><code><span class="keyword">val</span> min_rfc3339 : <a href="index.html#type-t">t</a></code></dt><dd><p>The first instant supported by RFC 3339, corresponds to 0000-01-01 00:00:00 +0000 (UTC).</p></dd></dl><dl><dt class="spec value" id="val-max_rfc3339"><a href="#val-max_rfc3339" class="anchor"></a><code><span class="keyword">val</span> max_rfc3339 : <a href="index.html#type-t">t</a></code></dt><dd><p>The last instant supported by RFC 3339, corresponds to 9999-12-31 23:59:59 +0000 (UTC).</p></dd></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../../tezos-stdlib/Tezos_stdlib/Compare/index.html#module-type-S">Tezos_stdlib.Compare.S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../tezos-stdlib/Tezos_stdlib/Compare/module-type-S/index.html#type-t">t</a> := <a href="index.html#type-t">t</a></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec value" id="val-(=)"><a href="#val-(=)" class="anchor"></a><code><span class="keyword">val</span> (=) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&lt;&gt;)"><a href="#val-(&lt;&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;&gt;) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&lt;)"><a href="#val-(&lt;)" class="anchor"></a><code><span class="keyword">val</span> (&lt;) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&lt;=)"><a href="#val-(&lt;=)" class="anchor"></a><code><span class="keyword">val</span> (&lt;=) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&gt;=)"><a href="#val-(&gt;=)" class="anchor"></a><code><span class="keyword">val</span> (&gt;=) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-(&gt;)"><a href="#val-(&gt;)" class="anchor"></a><code><span class="keyword">val</span> (&gt;) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-max"><a href="#val-max" class="anchor"></a><code><span class="keyword">val</span> max : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-min"><a href="#val-min" class="anchor"></a><code><span class="keyword">val</span> min : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt></dl></details></div></div></div><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int64 <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>add t s</code> is <code>s</code> seconds later than <code>t</code></p></dd></dl><dl><dt class="spec value" id="val-diff"><a href="#val-diff" class="anchor"></a><code><span class="keyword">val</span> diff : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int64</code></dt><dd><p><code>diff a b</code> is the number of seconds between <code>a</code> and <code>b</code>. It is negative if <code>b</code> is later than <code>a</code>.</p></dd></dl><section><header><h3 id="conversions-to-and-from-string-representations"><a href="#conversions-to-and-from-string-representations" class="anchor"></a>Conversions to and from string representations</h3></header><dl><dt class="spec value" id="val-of_notation"><a href="#val-of_notation" class="anchor"></a><code><span class="keyword">val</span> of_notation : string <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> option</span></code></dt><dd><p>Convert a string in the RFC3339 format (e.g., <code>&quot;1970-01-01T00:00:00Z&quot;</code>) into a protocol time. Invalid RFC3339 notations will return <code>None</code>.</p><p>Note that years outside the 0000-9999 range are invalid RFC3339-wise.</p></dd></dl><dl><dt class="spec value" id="val-of_notation_exn"><a href="#val-of_notation_exn" class="anchor"></a><code><span class="keyword">val</span> of_notation_exn : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Convert a string in the RFC3339 format (e.g., <code>&quot;1970-01-01T00:00:00Z&quot;</code>) into a protocol time. Invalid RFC3339 notations will raise <code>Invalid_argument</code>.</p><p>Note that years outside the 0000-9999 range are invalid RFC3339-wise.</p></dd></dl><dl><dt class="spec value" id="val-to_notation"><a href="#val-to_notation" class="anchor"></a><code><span class="keyword">val</span> to_notation : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Convert a protocol time into an RFC3339 notation (e.g., <code>&quot;1970-01-01T00:00:00Z&quot;</code>).</p><p>Note that years outside the 0000-9999 range will raise <code>Invalid_argument</code> as they are invalid RFC3339-wise.</p></dd></dl><aside><p>Conversion to and from &quot;number of seconds since epoch&quot; representation.</p></aside><dl><dt class="spec value" id="val-of_seconds"><a href="#val-of_seconds" class="anchor"></a><code><span class="keyword">val</span> of_seconds : int64 <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Make a Protocol time from a number of seconds since the <a href="index.html#val-epoch"><code>epoch</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-to_seconds"><a href="#val-to_seconds" class="anchor"></a><code><span class="keyword">val</span> to_seconds : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int64</code></dt><dd><p>Convert a Protocol time into a number of seconds since the <a href="index.html#val-epoch"><code>epoch</code></a>.</p></dd></dl></section><section><header><h3 id="serialization-functions"><a href="#serialization-functions" class="anchor"></a>Serialization functions</h3></header><dl><dt class="spec value" id="val-encoding"><a href="#val-encoding" class="anchor"></a><code><span class="keyword">val</span> encoding : <span><a href="index.html#type-t">t</a> Data_encoding.t</span></code></dt><dd><p>Binary and JSON encoding.</p><p>Binary is always encoding/decoding as <code>int64</code>.</p><p>JSON is more complex (for backward compatibility and user-friendliness):</p><ul><li>encoding uses the RFC3339 format (e.g., <code>&quot;1970-01-01T00:00:00Z&quot;</code>) if the year is between 0000 and 9999 (RFC3339-compatible); otherwise it uses the <code>int64</code> format</li><li>decoding tries to decode as an RFC3339 notation, and if it fails, it decodes as <code>int64</code>.</li></ul></dd></dl><dl><dt class="spec value" id="val-rfc_encoding"><a href="#val-rfc_encoding" class="anchor"></a><code><span class="keyword">val</span> rfc_encoding : <span><a href="index.html#type-t">t</a> Data_encoding.t</span></code></dt><dd><p>Note: the RFC has a different range than the internal representation. Specifically, the RFC can only represent times between 0000-00-00 and 9999-12-31 (inclusive). The RFC-encoding fails for dates outside of this range.</p><p>For this reason, it is preferable to use <a href="index.html#val-encoding"><code>encoding</code></a> and only resort to <code>rfc_encoding</code> for human-readable format.</p></dd></dl><dl><dt class="spec value" id="val-rpc_arg"><a href="#val-rpc_arg" class="anchor"></a><code><span class="keyword">val</span> rpc_arg : <span><a href="index.html#type-t">t</a> <a href="../../../tezos-rpc/Tezos_rpc/RPC_arg/index.html#type-t">Tezos_rpc.RPC_arg.t</a></span></code></dt></dl></section><section><header><h3 id="pretty-printing-functions"><a href="#pretty-printing-functions" class="anchor"></a>Pretty-printing functions</h3></header><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Pretty print as a number of seconds after epoch.</p></dd></dl><dl><dt class="spec value" id="val-pp_hum"><a href="#val-pp_hum" class="anchor"></a><code><span class="keyword">val</span> pp_hum : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Note: pretty-printing uses the RFC3339 for human-readability. As mentioned in the comment on <a href="index.html#val-rfc_encoding"><code>rfc_encoding</code></a>, this representation fails when given dates too far in the future (after 9999-12-31) or the past (before 0000-00-00).</p><p>For reliable, generic pretty-printing use <a href="index.html#val-pp"><code>pp</code></a>.</p></dd></dl></section></section></div></body></html>