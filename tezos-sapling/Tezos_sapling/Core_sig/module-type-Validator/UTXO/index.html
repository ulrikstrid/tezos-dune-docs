<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>UTXO (tezos-sapling.Tezos_sapling.Core_sig.Validator.UTXO)</title><link rel="stylesheet" href="../../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">tezos-sapling</a> &#x00BB; <a href="../../../index.html">Tezos_sapling</a> &#x00BB; <a href="../../index.html">Core_sig</a> &#x00BB; <a href="../index.html">Validator</a> &#x00BB; UTXO</nav><header class="odoc-preamble"><h1>Module <code><span>Validator.UTXO</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-rk" class="anchored"><a href="#type-rk" class="anchor"></a><code><span><span class="keyword">type</span> rk</span></code></div><div class="spec-doc"><p>Randomised signature keys. All inputs are signed with a randomised version of a secret key. *</p></div></div><div class="odoc-spec"><div class="spec type" id="type-spend_proof" class="anchored"><a href="#type-spend_proof" class="anchor"></a><code><span><span class="keyword">type</span> spend_proof</span></code></div><div class="spec-doc"><p>Zero knowledge proofs needed to spend a transaction outputs. See spec section 4.15 *</p></div></div><div class="odoc-spec"><div class="spec type" id="type-spend_sig" class="anchored"><a href="#type-spend_sig" class="anchor"></a><code><span><span class="keyword">type</span> spend_sig</span></code></div><div class="spec-doc"><p>Signature needed to spend tokens. Computed with a randomised version of the secret key and verifies under a randomised version of the public key. Signs a hash of an input concatenated with an optional anti-replay string. *</p></div></div><div class="odoc-spec"><div class="spec type" id="type-output_proof" class="anchored"><a href="#type-output_proof" class="anchor"></a><code><span><span class="keyword">type</span> output_proof</span></code></div><div class="spec-doc"><p>Zero-knowledge proof needed to create money. See spec section 4.15 *</p></div></div><div class="odoc-spec"><div class="spec type" id="type-input" class="anchored"><a href="#type-input" class="anchor"></a><code><span><span class="keyword">type</span> input</span><span> = </span><span>{</span></code><table><tr id="type-input.cv" class="anchored"><td class="def record field"><a href="#type-input.cv" class="anchor"></a><code><span>cv : <a href="../CV/index.html#type-t">CV.t</a>;</span></code></td></tr><tr id="type-input.nf" class="anchored"><td class="def record field"><a href="#type-input.nf" class="anchor"></a><code><span>nf : <a href="../Nullifier/index.html#type-t">Nullifier.t</a>;</span></code></td></tr><tr id="type-input.rk" class="anchored"><td class="def record field"><a href="#type-input.rk" class="anchor"></a><code><span>rk : <a href="#type-rk">rk</a>;</span></code></td></tr><tr id="type-input.proof_i" class="anchored"><td class="def record field"><a href="#type-input.proof_i" class="anchor"></a><code><span>proof_i : <a href="#type-spend_proof">spend_proof</a>;</span></code></td></tr><tr id="type-input.signature" class="anchored"><td class="def record field"><a href="#type-input.signature" class="anchor"></a><code><span>signature : <a href="#type-spend_sig">spend_sig</a>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Contains the necessary information to spend tokens (except the root which we include in the transaction). *</p></div></div><div class="odoc-spec"><div class="spec value" id="val-input_encoding" class="anchored"><a href="#val-input_encoding" class="anchor"></a><code><span><span class="keyword">val</span> input_encoding : <span><a href="#type-input">input</a> <span class="xref-unresolved">Data_encoding</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-output" class="anchored"><a href="#type-output" class="anchor"></a><code><span><span class="keyword">type</span> output</span><span> = </span><span>{</span></code><table><tr id="type-output.cm" class="anchored"><td class="def record field"><a href="#type-output.cm" class="anchor"></a><code><span>cm : <a href="../Commitment/index.html#type-t">Commitment.t</a>;</span></code></td></tr><tr id="type-output.proof_o" class="anchored"><td class="def record field"><a href="#type-output.proof_o" class="anchor"></a><code><span>proof_o : <a href="#type-output_proof">output_proof</a>;</span></code></td></tr><tr id="type-output.ciphertext" class="anchored"><td class="def record field"><a href="#type-output.ciphertext" class="anchor"></a><code><span>ciphertext : <a href="../Ciphertext/index.html#type-t">Ciphertext.t</a>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Contains the necessary information to create tokens. *</p></div></div><div class="odoc-spec"><div class="spec value" id="val-output_encoding" class="anchored"><a href="#val-output_encoding" class="anchor"></a><code><span><span class="keyword">val</span> output_encoding : <span><a href="#type-output">output</a> <span class="xref-unresolved">Data_encoding</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-binding_sig" class="anchored"><a href="#type-binding_sig" class="anchor"></a><code><span><span class="keyword">type</span> binding_sig</span></code></div><div class="spec-doc"><p>Ties a transaction to a balance (difference between the tokens created and spent). Proves with the commitment values that sum of values of inputs minus sums of values of output equals balance. *</p></div></div><div class="odoc-spec"><div class="spec value" id="val-binding_sig_encoding" class="anchored"><a href="#val-binding_sig_encoding" class="anchor"></a><code><span><span class="keyword">val</span> binding_sig_encoding : <span><a href="#type-binding_sig">binding_sig</a> <span class="xref-unresolved">Data_encoding</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-transaction" class="anchored"><a href="#type-transaction" class="anchor"></a><code><span><span class="keyword">type</span> transaction</span><span> = </span><span>{</span></code><table><tr id="type-transaction.inputs" class="anchored"><td class="def record field"><a href="#type-transaction.inputs" class="anchor"></a><code><span>inputs : <span><a href="#type-input">input</a> list</span>;</span></code></td></tr><tr id="type-transaction.outputs" class="anchored"><td class="def record field"><a href="#type-transaction.outputs" class="anchor"></a><code><span>outputs : <span><a href="#type-output">output</a> list</span>;</span></code></td></tr><tr id="type-transaction.binding_sig" class="anchored"><td class="def record field"><a href="#type-transaction.binding_sig" class="anchor"></a><code><span>binding_sig : <a href="#type-binding_sig">binding_sig</a>;</span></code></td></tr><tr id="type-transaction.balance" class="anchored"><td class="def record field"><a href="#type-transaction.balance" class="anchor"></a><code><span>balance : int64;</span></code></td></tr><tr id="type-transaction.root" class="anchored"><td class="def record field"><a href="#type-transaction.root" class="anchor"></a><code><span>root : <a href="../Hash/index.html#type-t">Hash.t</a>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Transaction that is sent to a verifier. The root corresponds to a merkle tree where the inputs are present. Even if this root can in principle be very old, a verifier may keep only the last n known roots considering anything older as invalid. The memo_size field is checked at encoding and encoding to be the real memo size of all outputs. A transaction leaks the balance between inputs and outputs and the number of inputs and outputs. Note that the number of inputs is limited to 5208 and number of outputs to 2019, by a check in the encoding. This is important to avoid invalidating a proof over the balance as described in section 4.12 of the spec.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-transaction_encoding" class="anchored"><a href="#val-transaction_encoding" class="anchor"></a><code><span><span class="keyword">val</span> transaction_encoding : <span><a href="#type-transaction">transaction</a> <span class="xref-unresolved">Data_encoding</span>.t</span></span></code></div><div class="spec-doc"><p>The encoding enforces the limits on number of inputs and outputs.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-max_amount" class="anchored"><a href="#val-max_amount" class="anchor"></a><code><span><span class="keyword">val</span> max_amount : int64</span></code></div><div class="spec-doc"><p>Maximum amount of shielded tokens. This value is imposed by librustzcash. *</p></div></div><div class="odoc-spec"><div class="spec value" id="val-valid_amount" class="anchored"><a href="#val-valid_amount" class="anchor"></a><code><span><span class="keyword">val</span> valid_amount : <span>int64 <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div></div></body></html>