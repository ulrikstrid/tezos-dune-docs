<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Acl (tezos-rpc-http-server.Tezos_rpc_http_server__RPC_server.Acl)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">tezos-rpc-http-server</a> &#x00BB; <a href="../index.html">Tezos_rpc_http_server__RPC_server</a> &#x00BB; Acl</nav><h1>Module <code>Tezos_rpc_http_server__RPC_server.Acl</code></h1></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> Resto_acl.Acl</code></span></summary><dl><dt class="spec type" id="type-chunk_matcher"><a href="#type-chunk_matcher" class="anchor"></a><code><span class="keyword">type</span> chunk_matcher</code><code> = Resto_acl__Acl.chunk_matcher</code><code> = </code><table class="variant"><tr id="type-chunk_matcher.Literal" class="anchored"><td class="def constructor"><a href="#type-chunk_matcher.Literal" class="anchor"></a><code>| </code><code><span class="constructor">Literal</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-chunk_matcher.Wildcard" class="anchored"><td class="def constructor"><a href="#type-chunk_matcher.Wildcard" class="anchor"></a><code>| </code><code><span class="constructor">Wildcard</span></code></td></tr></table></dt><dt class="spec type" id="type-path_matcher"><a href="#type-path_matcher" class="anchor"></a><code><span class="keyword">type</span> path_matcher</code><code> = Resto_acl__Acl.path_matcher</code><code> = </code><table class="variant"><tr id="type-path_matcher.Exact" class="anchored"><td class="def constructor"><a href="#type-path_matcher.Exact" class="anchor"></a><code>| </code><code><span class="constructor">Exact</span> <span class="keyword">of</span> <span><a href="index.html#type-chunk_matcher">chunk_matcher</a> list</span></code></td></tr><tr id="type-path_matcher.FollowedByAnySuffix" class="anchored"><td class="def constructor"><a href="#type-path_matcher.FollowedByAnySuffix" class="anchor"></a><code>| </code><code><span class="constructor">FollowedByAnySuffix</span> <span class="keyword">of</span> <span><a href="index.html#type-chunk_matcher">chunk_matcher</a> list</span></code></td></tr></table></dt><dt class="spec type" id="type-meth_matcher"><a href="#type-meth_matcher" class="anchor"></a><code><span class="keyword">type</span> meth_matcher</code><code> = Resto_acl__Acl.meth_matcher</code><code> = </code><table class="variant"><tr id="type-meth_matcher.Exact" class="anchored"><td class="def constructor"><a href="#type-meth_matcher.Exact" class="anchor"></a><code>| </code><code><span class="constructor">Exact</span> <span class="keyword">of</span> Resto.meth</code></td></tr><tr id="type-meth_matcher.Any" class="anchored"><td class="def constructor"><a href="#type-meth_matcher.Any" class="anchor"></a><code>| </code><code><span class="constructor">Any</span></code></td></tr></table></dt><dt class="spec type" id="type-matcher"><a href="#type-matcher" class="anchor"></a><code><span class="keyword">type</span> matcher</code><code> = Resto_acl__Acl.matcher</code><code> = </code><code>{</code><table class="record"><tr id="type-matcher.meth" class="anchored"><td class="def field"><a href="#type-matcher.meth" class="anchor"></a><code>meth : <a href="index.html#type-meth_matcher">meth_matcher</a>;</code></td></tr><tr id="type-matcher.path" class="anchored"><td class="def field"><a href="#type-matcher.path" class="anchor"></a><code>path : <a href="index.html#type-path_matcher">path_matcher</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-parse"><a href="#val-parse" class="anchor"></a><code><span class="keyword">val</span> parse : string <span>&#45;&gt;</span> <a href="index.html#type-matcher">matcher</a></code></dt></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = Resto_acl__Acl.t</code><code> = </code><table class="variant"><tr id="type-t.Allow_all" class="anchored"><td class="def constructor"><a href="#type-t.Allow_all" class="anchor"></a><code>| </code><code><span class="constructor">Allow_all</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-t.except" class="anchored"><td class="def field"><a href="#type-t.except" class="anchor"></a><code>except : <span><a href="index.html#type-matcher">matcher</a> list</span>;</code></td></tr></table><code>}</code></td></tr><tr id="type-t.Deny_all" class="anchored"><td class="def constructor"><a href="#type-t.Deny_all" class="anchor"></a><code>| </code><code><span class="constructor">Deny_all</span> <span class="keyword">of</span> </code><code>{</code><table class="record"><tr id="type-t.except" class="anchored"><td class="def field"><a href="#type-t.except" class="anchor"></a><code>except : <span><a href="index.html#type-matcher">matcher</a> list</span>;</code></td></tr></table><code>}</code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-allowed"><a href="#val-allowed" class="anchor"></a><code><span class="keyword">val</span> allowed : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>meth:Resto.meth</span> <span>&#45;&gt;</span> <span>path:<span>string list</span></span> <span>&#45;&gt;</span> bool</code></dt></dl></details></div></div></div><dl><dt class="spec type" id="type-policy"><a href="#type-policy" class="anchor"></a><code><span class="keyword">type</span> policy</code></dt><dd><p>A policy for the whole RPC server is a set of access control lists for the different addresses that the RPC server listens to. It is represented as an association list mapping listening addresses (in string literal forms) to deny/access access policies.</p></dd></dl><dl><dt class="spec value" id="val-default"><a href="#val-default" class="anchor"></a><code><span class="keyword">val</span> default : <a href="index.html#type-t">t</a></code></dt><dd><p>Default ACL policy in case none is defined in configuration. For the sake of backwards compatibility it allows access to all resources. This will probably change in the future so that access to sensitive resources is restricted.</p></dd></dl><dl><dt class="spec value" id="val-put_policy"><a href="#val-put_policy" class="anchor"></a><code><span class="keyword">val</span> put_policy : <span>(<a href="../../../tezos-base/Tezos_base__P2p_point/Id/index.html#type-addr_port_id">Tezos_base__TzPervasives.P2p_point.Id.addr_port_id</a> * <a href="index.html#type-t">t</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-policy">policy</a> <span>&#45;&gt;</span> <a href="index.html#type-policy">policy</a></code></dt><dd><p>Add an ACL for given address into the policy. Overrides previously existing policy for that address if any.</p></dd></dl><dl><dt class="spec value" id="val-empty_policy"><a href="#val-empty_policy" class="anchor"></a><code><span class="keyword">val</span> empty_policy : <a href="index.html#type-policy">policy</a></code></dt><dd><p>Empty ACL policy allows access to all endpoints. Currently it's the same as <code>default</code> below, but that will likely change in the future, therefore it's better to use <code>default</code> rather than this value. It's mainly intended for testing.</p></dd></dl><dl><dt class="spec value" id="val-default_policy"><a href="#val-default_policy" class="anchor"></a><code><span class="keyword">val</span> default_policy : <a href="index.html#type-policy">policy</a></code></dt><dd><p>This is the default policy. Currently equivalent to <code>empty</code> above, but that will likely change at some point in the future.</p></dd></dl><dl><dt class="spec value" id="val-policy_encoding"><a href="#val-policy_encoding" class="anchor"></a><code><span class="keyword">val</span> policy_encoding : <span><a href="index.html#type-policy">policy</a> <a href="../../../tezos-base/Tezos_base__TzPervasives/index.html#module-Data_encoding">Tezos_base__TzPervasives.Data_encoding</a>.t</span></code></dt><dt class="spec value" id="val-policy_to_string"><a href="#val-policy_to_string" class="anchor"></a><code><span class="keyword">val</span> policy_to_string : <a href="index.html#type-policy">policy</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Returns the JSON representation of the policy.</p></dd></dl><dl><dt class="spec value" id="val-find_policy"><a href="#val-find_policy" class="anchor"></a><code><span class="keyword">val</span> find_policy : <a href="index.html#type-policy">policy</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> option</span></code></dt><dd><p><code>find_policy policy address</code> looks for the <code>address</code> within the <code>policy</code> and returns corresponding access control list.</p><p>An ACL is considered matching if its corresponding host-name part matches the host-name part of the <code>address</code> and either:</p><ul><li>its corresponding port also matches <code>address</code>'s port OR</li><li>its corresponding address does not mention any port at all.</li></ul><p>The first ACL whose corresponding address matches these criteria is returned.</p></dd></dl><dl><dt class="spec value" id="val-matcher_to_string"><a href="#val-matcher_to_string" class="anchor"></a><code><span class="keyword">val</span> matcher_to_string : <a href="index.html#type-matcher">matcher</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Returns string representation of a given matcher. Useful for testing.</p></dd></dl></div></body></html>