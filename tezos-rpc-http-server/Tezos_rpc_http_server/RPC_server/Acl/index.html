<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Acl (tezos-rpc-http-server.Tezos_rpc_http_server.RPC_server.Acl)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc %%VERSION%%"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">tezos-rpc-http-server</a> &#x00BB; <a href="../../index.html">Tezos_rpc_http_server</a> &#x00BB; <a href="../index.html">RPC_server</a> &#x00BB; Acl</nav><header class="odoc-preamble"><h1>Module <code><span>RPC_server.Acl</span></code></h1></header><div class="odoc-content"><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="xref-unresolved">Resto_acl</span>.Acl</span></code></summary><div class="odoc-spec"><div class="spec type" id="type-chunk_matcher" class="anchored"><a href="#type-chunk_matcher" class="anchor"></a><code><span><span class="keyword">type</span> chunk_matcher</span><span> = <span class="xref-unresolved">Resto_acl__Acl</span>.chunk_matcher</span><span> = </span></code><table><tr id="type-chunk_matcher.Literal" class="anchored"><td class="def variant constructor"><a href="#type-chunk_matcher.Literal" class="anchor"></a><code><span>| </span><span><span class="constructor">Literal</span> <span class="keyword">of</span> string</span></code></td></tr><tr id="type-chunk_matcher.Wildcard" class="anchored"><td class="def variant constructor"><a href="#type-chunk_matcher.Wildcard" class="anchor"></a><code><span>| </span><span><span class="constructor">Wildcard</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-path_matcher" class="anchored"><a href="#type-path_matcher" class="anchor"></a><code><span><span class="keyword">type</span> path_matcher</span><span> = <span class="xref-unresolved">Resto_acl__Acl</span>.path_matcher</span><span> = </span></code><table><tr id="type-path_matcher.Exact" class="anchored"><td class="def variant constructor"><a href="#type-path_matcher.Exact" class="anchor"></a><code><span>| </span><span><span class="constructor">Exact</span> <span class="keyword">of</span> <span><a href="#type-chunk_matcher">chunk_matcher</a> list</span></span></code></td></tr><tr id="type-path_matcher.FollowedByAnySuffix" class="anchored"><td class="def variant constructor"><a href="#type-path_matcher.FollowedByAnySuffix" class="anchor"></a><code><span>| </span><span><span class="constructor">FollowedByAnySuffix</span> <span class="keyword">of</span> <span><a href="#type-chunk_matcher">chunk_matcher</a> list</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-meth_matcher" class="anchored"><a href="#type-meth_matcher" class="anchor"></a><code><span><span class="keyword">type</span> meth_matcher</span><span> = <span class="xref-unresolved">Resto_acl__Acl</span>.meth_matcher</span><span> = </span></code><table><tr id="type-meth_matcher.Exact" class="anchored"><td class="def variant constructor"><a href="#type-meth_matcher.Exact" class="anchor"></a><code><span>| </span><span><span class="constructor">Exact</span> <span class="keyword">of</span> <span class="xref-unresolved">Resto</span>.meth</span></code></td></tr><tr id="type-meth_matcher.Any" class="anchored"><td class="def variant constructor"><a href="#type-meth_matcher.Any" class="anchor"></a><code><span>| </span><span><span class="constructor">Any</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-matcher" class="anchored"><a href="#type-matcher" class="anchor"></a><code><span><span class="keyword">type</span> matcher</span><span> = <span class="xref-unresolved">Resto_acl__Acl</span>.matcher</span><span> = </span><span>{</span></code><table><tr id="type-matcher.meth" class="anchored"><td class="def record field"><a href="#type-matcher.meth" class="anchor"></a><code><span>meth : <a href="#type-meth_matcher">meth_matcher</a>;</span></code></td></tr><tr id="type-matcher.path" class="anchored"><td class="def record field"><a href="#type-matcher.path" class="anchor"></a><code><span>path : <a href="#type-path_matcher">path_matcher</a>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-parse" class="anchored"><a href="#val-parse" class="anchor"></a><code><span><span class="keyword">val</span> parse : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-matcher">matcher</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span class="xref-unresolved">Resto_acl__Acl</span>.t</span><span> = </span></code><table><tr id="type-t.Allow_all" class="anchored"><td class="def variant constructor"><a href="#type-t.Allow_all" class="anchor"></a><code><span>| </span><span><span class="constructor">Allow_all</span> <span class="keyword">of</span> </span><span>{</span></code><table><tr id="type-t.except" class="anchored"><td class="def record field"><a href="#type-t.except" class="anchor"></a><code><span>except : <span><a href="#type-matcher">matcher</a> list</span>;</span></code></td></tr></table><code><span>}</span></code></td></tr><tr id="type-t.Deny_all" class="anchored"><td class="def variant constructor"><a href="#type-t.Deny_all" class="anchor"></a><code><span>| </span><span><span class="constructor">Deny_all</span> <span class="keyword">of</span> </span><span>{</span></code><table><tr id="type-t.except" class="anchored"><td class="def record field"><a href="#type-t.except" class="anchor"></a><code><span>except : <span><a href="#type-matcher">matcher</a> list</span>;</span></code></td></tr></table><code><span>}</span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-allowed" class="anchored"><a href="#val-allowed" class="anchor"></a><code><span><span class="keyword">val</span> allowed : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>meth:<span class="xref-unresolved">Resto</span>.meth <span class="arrow">&#45;&gt;</span></span> <span>path:<span>string list</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div></details></div><div class="odoc-spec"><div class="spec type" id="type-policy" class="anchored"><a href="#type-policy" class="anchor"></a><code><span><span class="keyword">type</span> policy</span></code></div><div class="spec-doc"><p>A policy for the whole RPC server is a set of access control lists for the different addresses that the RPC server listens to. It is represented as an association list mapping listening addresses (in string literal forms) to deny/access access policies.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default" class="anchored"><a href="#val-default" class="anchor"></a><code><span><span class="keyword">val</span> default : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Default ACL policy in case none is defined in configuration. For the sake of backwards compatibility it allows access to all resources. This will probably change in the future so that access to sensitive resources is restricted.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-put_policy" class="anchored"><a href="#val-put_policy" class="anchor"></a><code><span><span class="keyword">val</span> put_policy : <span><span>(<a href="../../../../tezos-base/Tezos_base/P2p_point/Id/index.html#type-addr_port_id">Tezos_base.P2p_point.Id.addr_port_id</a> * <a href="#type-t">t</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-policy">policy</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-policy">policy</a></span></code></div><div class="spec-doc"><p>Add an ACL for given address into the policy. Overrides previously existing policy for that address if any.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-empty_policy" class="anchored"><a href="#val-empty_policy" class="anchor"></a><code><span><span class="keyword">val</span> empty_policy : <a href="#type-policy">policy</a></span></code></div><div class="spec-doc"><p>Empty ACL policy allows access to all endpoints. Currently it's the same as <code>default</code> below, but that will likely change in the future, therefore it's better to use <code>default</code> rather than this value. It's mainly intended for testing.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_policy" class="anchored"><a href="#val-default_policy" class="anchor"></a><code><span><span class="keyword">val</span> default_policy : <a href="#type-policy">policy</a></span></code></div><div class="spec-doc"><p>This is the default policy. Currently equivalent to <code>empty</code> above, but that will likely change at some point in the future.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-policy_encoding" class="anchored"><a href="#val-policy_encoding" class="anchor"></a><code><span><span class="keyword">val</span> policy_encoding : <span><a href="#type-policy">policy</a> <span class="xref-unresolved">Tezos_base__TzPervasives</span>.Data_encoding.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-policy_to_string" class="anchored"><a href="#val-policy_to_string" class="anchor"></a><code><span><span class="keyword">val</span> policy_to_string : <span><a href="#type-policy">policy</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns the JSON representation of the policy.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-find_policy" class="anchored"><a href="#val-find_policy" class="anchor"></a><code><span><span class="keyword">val</span> find_policy : <span><a href="#type-policy">policy</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div><div class="spec-doc"><p><code>find_policy policy address</code> looks for the <code>address</code> within the <code>policy</code> and returns corresponding access control list.</p><p>An ACL is considered matching if its corresponding host-name part matches the host-name part of the <code>address</code> and either:</p><ul><li>its corresponding port also matches <code>address</code>'s port OR</li><li>its corresponding address does not mention any port at all.</li></ul><p>The first ACL whose corresponding address matches these criteria is returned.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-matcher_to_string" class="anchored"><a href="#val-matcher_to_string" class="anchor"></a><code><span><span class="keyword">val</span> matcher_to_string : <span><a href="#type-matcher">matcher</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Returns string representation of a given matcher. Useful for testing.</p></div></div></div></body></html>